{
  "version": 3,
  "sources": [
    "../../node_modules/browser-pack/_prelude.js",
    "../src/lib/$.js",
    "../src/lib/list.js",
    "../src/lib/map.js",
    "../src/lib/scroll.js",
    "../src/main.js",
    "../../node_modules/do-something-on-scroll/index.js",
    "../../node_modules/leaflet/dist/leaflet-src.js",
    "../../node_modules/raf-component/index.js",
    "../../node_modules/smoothscroll/smoothscroll.js"
  ],
  "names": [],
  "mappings": "AAAA;sJCGA,QAAA,eAME,IANgB,MAMhB,KAAA,SAAY,YACV,QADkB,GANJ,QAchB,SAAA,SAAA,SAA6B,GAAA,KAAA,SAAA,SAAe,GAAA,UAAA,IAd5B,WAmBhB,YAAA,SAAA,SAAgC,GAAA,KAAA,SAAA,SAAe,GAAA,UAAA,OAnB/B,WAwBhB,YAAA,SAAA,SAAgC,GAAA,KAAA,SAAA,SAAe,GAAA,UAAA,OAxB/B,WA+BhB,GAAA,SAAU,EAAA,KACR,KAAA,SAAA,KACE,oBAAA,EAAA,GADa,KAEb,iBAAA,EAAA,GAlCY,WA0ChB,IAAA,SAAW,EAAA,SAAe,GAAA,KAAA,SAAA,SAAe,GAAA,oBAAA,EAAA,GA1C3C,6DA6CA,MAAA,UAAkB,MAAA,SAElB,IAAI,GAAA,SAAA,MACE,GAAa,GADC,aAEd,GAAA,WACF,KADF,KAGE,KAAA,MAAA,EAAA,mBAAmB,SAAA,iBAHrB,KAFM,sBAUO;;;uFCjDf,QAAA,UAAA,EAAA,MACM,GAAS,GAAI,WAAA,WAAA,OAAS,WAAW,EAAA,QAAxB,KAA8C,WAAW,EAAA,QADlC,MAEhC,EAFgC,UAErB,EAAA,WAAkB,EAAlB,cACR,YAAW,EAAA,QAHpB,IAMO,QAAA,kBAAA,MACD,IAAA,EAAA,IAAA,YAAO,wBAAA,OAAA,SAAA,SACU,GAAA,QAAA,KAAuB,EAAA,QADjC,MAAA,IAAA,SAAA,YAGP,QAAA,SAA2B,SAAA,EADb,KAEd,cAAA,aAAA,UAAA,wBAAuE,EAAA,QAAA,SAFzD,6BAGd,GAAA,YAHc,cAFP,IAAA,KAAA,SAQH,EAAA,SAAS,GAAA,QAAA,SAAqB,EAAA,QAR3B,WAAA,IAAA,SAAA,SASE,GATF,YAAA,KAD+B,aAY1C,cAAA,qBAAA,UAZK,yFAAS,iBAAA,mJAdhB,EAAA,IAAA,YAAA,mBAAA,GAAA,QAAA,SAAA,KAAsC,oCAEpC,mBAAA,YAFoC,6BAGpC,oBAAA,SAHoC,6BAIlC,EAAF,QAAA,SAJoC,oCAK3B,EAAA,OAAA,QAAA,KAAT,SAAA,YALF,WA6BO,IAAI,UAAA,QAAA,UAAW,EAAA,IAAA,YAAA,oBAAA,IAAA,SAAA,SAAgC,GAA3C;;;uFCYX,QAAA,YAAA,MACM,EAAA,KAAS,EAAA,IAAO,IACd,GAAA,wBAAgC,EAAA,KAAA,KAAW,EAAA,KAD7B,kEAElB,QAAU,EAAA,IAAO,EAAjB,MAA0B,KAA1B,gBAAA,MAAA,KAAA,UAFF,gBAIE,IAAA,6CAAyD,EAL7D,yLA1CA,IAAA,UAAA,WAAU,IAAA,eACA,MAAQ,cAChB,oBACA,sBAHE,IAOJ,cAAA,UAAA,WAAoB,cAClB,oDACA,mDACU,GAAV,gBACY,GAAZ,iBACa,EAAI,eACjB,4CACA,wCACY,GAAZ,kBACc,EATZ,KAYJ,aAAA,UAAA,WAAmB,cACjB,uCACA,sCACU,GAAV,gBACY,EAJV,KAOJ,oBACE,kBACA,OACA,iBACA,UAJE,EAQJ,WAAA,WAAA,UAAA,sFACE,eADF,wQAAA,MAAA,KAiBA,IAAA,iBACE,UACA,UAFF,IAMA,IAAA,GAAA,gBAAA,SAAA,GAEM,EAAA,SAAA,MAAqB,EAAA,SAAA,MAAqB,EAAA,UAAc,QAAU,EAAA,UAAc,8BAClF,OAAS,EAAA,OAAT,IAAA,cAAA,MADyF,0BAEzF,OAAS,EAAA,QAAW,KAApB,eAAA,MAFyF,SAGzF,MAAU,EALd,UASO,IAAI,aAAA,QAAA,YAAA,SAAA,SAAqB,GAAA,QAAP,aACd,cAAA,QAAA,cAAA,SAAA,SAAsB,KAAA,GAAA,gBAAN;;;QDpDX,+EEDhB,QAAA,aACM,GAAM,SAAA,gBAAA,WAAsC,SAAA,KAD/B,UAEb,EAAa,SAAA,cAAA,YAFA,iBAGjB,YAHiB,UAIb,EAAM,EAAa,OAAA,YAAA,YACrB,cAAsB,KAAtB,QAAA,OAD6C,qBAE7C,SAFF,WAII,EAAM,EAAa,OAAA,YAAA,YACrB,cAAsB,KAAtB,OAAA,MAD6C,eAE7C,SAVJ,0RATI,QAAS,EAAA,IAAA,YAAT,kBACA,YAAa,EAAA,IAAA,YAAb,mBACA,WAAY,EAAA,IAAA,YAAZ,iBAEJ,QAAA,GAAA,QAAA,SAAA,KAAwB,+CAEb,SAAA,eAAwB,EAAA,OAAA,QAFnC,cAmBA,EAAA,sBAAA,YAAA,QACA;;;uSC/BY,IAAA,wBAAA,kCACA,KAAA,wBAAA,+EAGZ,KAAA,YAAgB,KAAhB,UACA,IAAA,cAAkB,KAAlB;;;ACEA,QAAS,UAAS,GACT,qBACD,oBAAqB,EACrB,UAEJ,aAAa,eACb,cAAgB,WAAW,WACvB,oBAAqB,GACtB,IAGP,QAAS,UACL,GAAI,GAAS,SAAS,KAAK,SAC3B,IAAI,GAAU,WAAY,CACtB,IAAK,GAAI,GAAI,EAAG,EAAI,SAAS,OAAY,EAAJ,EAAO,IACxC,SAAS,GAAG,EAAQ,WAExB,YAAa,EAEb,oBACA,IAAI,QA3BZ,GAAI,KAAM,QAAQ,iBAEd,oBAAqB,EACrB,YACA,WACA,aA0BJ,QAAO,QAAU,SAAS,GACtB,SAAS,KAAK,GACS,GAAnB,SAAS,QACT,OAAO,iBAAiB,SAAU,WAI1C,OAAO,QAAQ,OAAS,SAAS,GAC7B,GAAI,GAAQ,SAAS,QAAQ,EACzB,GAAQ,IACR,SAAS,OAAO,EAAO,GAEJ,GAAnB,SAAS,QACT,OAAO,oBAAoB,SAAU;ID5CjC;;CEKX,SAAU,EAAQ,EAAU,GAC7B,GAAI,GAAO,EAAO,EACd,IAEJ,GAAE,QAAU,QAGU,gBAAX,SAAiD,gBAAnB,QAAO,QAC/C,OAAO,QAAU,EAGW,kBAAX,SAAyB,OAAO,KACjD,OAAO,GAKR,EAAE,WAAa,WAEd,MADA,GAAO,EAAI,EACJ,MAGR,EAAO,EAAI,EAOX,EAAE,MACD,OAAQ,SAAU,GACjB,GACI,GAAG,EAAG,EAAK,EADX,EAAU,MAAM,UAAU,MAAM,KAAK,UAAW,EAGpD,KAAK,EAAI,EAAG,EAAM,EAAQ,OAAY,EAAJ,EAAS,IAAK,CAC/C,EAAM,EAAQ,MACd,KAAK,IAAK,GACL,EAAI,eAAe,KACtB,EAAK,GAAK,EAAI,IAIjB,MAAO,IAGR,KAAM,SAAU,EAAI,GACnB,GAAI,GAAO,UAAU,OAAS,EAAI,MAAM,UAAU,MAAM,KAAK,UAAW,GAAK,IAC7E,OAAO,YACN,MAAO,GAAG,MAAM,EAAK,GAAQ,aAI/B,MAAQ,WACP,GAAI,GAAS,EACT,EAAM,aACV,OAAO,UAAU,GAEhB,MADA,GAAI,GAAO,EAAI,MAAU,EAClB,EAAI,OAIb,WAAY,SAAU,EAAK,EAAQ,GAClC,GAAI,GAAG,CAEP,IAAmB,gBAAR,GAAkB,CAC5B,EAAO,MAAM,UAAU,MAAM,KAAK,UAAW,EAE7C,KAAK,IAAK,GACT,EAAO,MAAM,GAAU,EAAG,EAAI,IAAI,OAAO,GAE1C,QAAO,EAGR,OAAO,GAGR,oBAAqB,SAAU,EAAI,EAAM,GACxC,GAAI,GAAM,CAEV,OAAO,SAAS,KACf,GAAI,GAAO,SAEX,OAAI,QACH,GAAe,IAIhB,GAAO,EAEP,WAAW,WACV,GAAO,EAEH,IACH,EAAU,MAAM,EAAS,GACzB,GAAe,IAEd,OAEH,GAAG,MAAM,EAAS,MAIpB,QAAS,WACR,OAAO,GAGR,UAAW,SAAU,EAAK,GACzB,GAAI,GAAM,KAAK,IAAI,GAAI,GAAU,EACjC,OAAO,MAAK,MAAM,EAAM,GAAO,GAGhC,KAAM,SAAU,GACf,MAAO,GAAI,KAAO,EAAI,OAAS,EAAI,QAAQ,aAAc,KAG1D,WAAY,SAAU,GACrB,MAAO,GAAE,KAAK,KAAK,GAAK,MAAM,QAG/B,WAAY,SAAU,EAAK,GAE1B,MADA,GAAI,QAAU,EAAE,UAAW,EAAI,QAAS,GACjC,EAAI,SAGZ,eAAgB,SAAU,EAAK,EAAa,GAC3C,GAAI,KACJ,KAAK,GAAI,KAAK,GACb,EAAO,KAAK,mBAAmB,EAAY,EAAE,cAAgB,GAAK,IAAM,mBAAmB,EAAI,IAEhG,QAAU,GAA4C,KAA7B,EAAY,QAAQ,KAAqB,IAAN,KAAa,EAAO,KAAK,MAEtF,SAAU,SAAU,EAAK,GACxB,MAAO,GAAI,QAAQ,oBAAqB,SAAU,EAAK,GACtD,GAAI,GAAQ,EAAK,EACjB,IAAI,IAAU,EACb,KAAM,IAAI,OAAM,kCAAoC,EAIrD,OAH4B,kBAAV,KACjB,EAAQ,EAAM,IAER,KAIT,QAAS,MAAM,SAAW,SAAU,GACnC,MAAgD,mBAAxC,OAAO,UAAU,SAAS,KAAK,IAGxC,cAAe,8DAGf,WAIA,QAAS,GAAY,GACpB,GAAI,GAAG,EACH,GAAY,SAAU,MAAO,IAAK,KAEtC,KAAK,EAAI,EAAG,EAAI,EAAS,SAAW,EAAI,IACvC,EAAK,EAAO,EAAS,GAAK,EAG3B,OAAO,GAKR,QAAS,GAAa,GACrB,GAAI,IAAQ,GAAI,MACZ,EAAa,KAAK,IAAI,EAAG,IAAM,EAAO,GAG1C,OADA,GAAW,EAAO,EACX,EAAO,WAAW,EAAI,GAP9B,GAAI,GAAW,EAUX,EAAY,EAAO,uBACf,EAAY,0BAA4B,EAE5C,EAAW,EAAO,sBACd,EAAY,yBACZ,EAAY,gCACZ,SAAU,GAAM,EAAO,aAAa,GAG5C,GAAE,KAAK,iBAAmB,SAAU,EAAI,EAAS,EAAW,GAG3D,MAFA,GAAK,EAAE,KAAK,EAAI,GAEZ,GAAa,IAAc,MAC9B,KAEO,EAAU,KAAK,EAAQ,EAAI,IAIpC,EAAE,KAAK,gBAAkB,SAAU,GAC9B,GACH,EAAS,KAAK,EAAQ,OAOzB,EAAE,OAAS,EAAE,KAAK,OAClB,EAAE,KAAO,EAAE,KAAK,KAChB,EAAE,MAAQ,EAAE,KAAK,MACjB,EAAE,WAAa,EAAE,KAAK,WAQtB,EAAE,MAAQ,aAEV,EAAE,MAAM,OAAS,SAAU,GAG1B,GAAI,GAAW,WAGV,KAAK,YACR,KAAK,WAAW,MAAM,KAAM,WAIzB,KAAK,YACR,KAAK,iBAKH,EAAI,YACR,GAAE,UAAY,KAAK,SAEnB,IAAI,GAAQ,GAAI,EAChB,GAAM,YAAc,EAEpB,EAAS,UAAY,CAGrB,KAAK,GAAI,KAAK,MACT,KAAK,eAAe,IAAY,cAAN,IAC7B,EAAS,GAAK,KAAK,GAKjB,GAAM,UACT,EAAE,OAAO,EAAU,EAAM,eAClB,GAAM,SAIV,EAAM,WACT,EAAE,KAAK,OAAO,MAAM,MAAO,GAAO,OAAO,EAAM,iBACxC,GAAM,UAIV,EAAM,SAAW,EAAM,UAC1B,EAAM,QAAU,EAAE,UAAW,EAAM,QAAS,EAAM,UAInD,EAAE,OAAO,EAAO,GAEhB,EAAM,aAEN,IAAI,GAAS,IAoBb,OAlBA,GAAS,UAAY,EAAO,UAG5B,EAAM,cAAgB,WAErB,IAAI,KAAK,iBAAT,CAEI,EAAO,UAAU,eACpB,EAAO,UAAU,cAAc,KAAK,MAGrC,KAAK,kBAAmB,CAExB,KAAK,GAAI,GAAI,EAAG,EAAM,EAAM,WAAW,OAAY,EAAJ,EAAS,IACvD,EAAM,WAAW,GAAG,KAAK,QAIpB,GAKR,EAAE,MAAM,QAAU,SAAU,GAC3B,EAAE,OAAO,KAAK,UAAW,IAI1B,EAAE,MAAM,aAAe,SAAU,GAChC,EAAE,OAAO,KAAK,UAAU,QAAS,IAIlC,EAAE,MAAM,YAAc,SAAU,GAC/B,GAAI,GAAO,MAAM,UAAU,MAAM,KAAK,UAAW,GAE7C,EAAqB,kBAAP,GAAoB,EAAK,WAC1C,KAAK,GAAI,MAAM,KAAM,GAGtB,MAAK,UAAU,WAAa,KAAK,UAAU,eAC3C,KAAK,UAAU,WAAW,KAAK,GAQhC,IAAI,GAAY,iBAEhB,GAAE,SAEF,EAAE,MAAM,QAEP,iBAAkB,SAAU,EAAO,EAAI,GAGtC,GAAI,EAAE,KAAK,WAAW,EAAO,KAAK,iBAAkB,KAAM,EAAI,GAAY,MAAO,KAEjF,IAEI,GAAG,EAAK,EAAO,EAAM,EAAU,EAAa,EAF5C,EAAS,KAAK,GAAa,KAAK,OAChC,EAAY,GAAW,IAAY,MAAQ,EAAE,MAAM,EAMvD,KAFA,EAAQ,EAAE,KAAK,WAAW,GAErB,EAAI,EAAG,EAAM,EAAM,OAAY,EAAJ,EAAS,IACxC,GACC,OAAQ,EACR,QAAS,GAAW,MAErB,EAAO,EAAM,GAET,GAIH,EAAW,EAAO,OAClB,EAAc,EAAW,OAEzB,EAAY,EAAO,GAAY,EAAO,OAEjC,EAAU,KACd,EAAU,MAGV,EAAO,IAAgB,EAAO,IAAgB,GAAK,GAGpD,EAAU,GAAW,KAAK,KAI1B,EAAO,GAAQ,EAAO,OACtB,EAAO,GAAM,KAAK,GAIpB,OAAO,OAGR,kBAAmB,SAAU,GAC5B,GAAI,GAAS,KAAK,EAClB,SAAS,IAAY,IAAQ,IAAU,EAAO,GAAM,OAAS,GACxC,EAAO,QAAU,IAAU,EAAO,EAAO,YAAc,IAG7E,oBAAqB,SAAU,EAAO,EAAI,GAEzC,IAAK,KAAK,GACT,MAAO,KAGR,KAAK,EACJ,MAAO,MAAK,wBAGb,IAAI,EAAE,KAAK,WAAW,EAAO,KAAK,oBAAqB,KAAM,EAAI,GAAY,MAAO,KAEpF,IAEI,GAAG,EAAK,EAAM,EAAW,EAAG,EAAU,EAAa,EAAW,EAF9D,EAAS,KAAK,GACd,EAAY,GAAW,IAAY,MAAQ,EAAE,MAAM,EAKvD,KAFA,EAAQ,EAAE,KAAK,WAAW,GAErB,EAAI,EAAG,EAAM,EAAM,OAAY,EAAJ,EAAS,IAOxC,GANA,EAAO,EAAM,GACb,EAAW,EAAO,OAClB,EAAc,EAAW,OAEzB,EAAY,EAAO,GAEd,GASJ,GAFA,EAAY,GAAa,EAAY,EAAU,GAAa,EAAO,GAEpD,CACd,IAAK,EAAI,EAAU,OAAS,EAAG,GAAK,EAAG,IACjC,EAAU,GAAG,SAAW,GAAS,GAAY,EAAU,GAAG,UAAY,IAC1E,EAAU,EAAU,OAAO,EAAG,GAG9B,EAAQ,GAAG,OAAS,EAAE,KAAK,QAIzB,IAAW,GAAmC,IAArB,EAAU,eAC/B,GAAU,GACjB,EAAO,kBAnBF,GAAO,SACP,GAAO,SACP,GAAO,EAuBhB,OAAO,OAGR,uBAAwB,WAEvB,aADO,MAAK,GACL,MAGR,UAAW,SAAU,EAAM,GAC1B,IAAK,KAAK,kBAAkB,GAC3B,MAAO,KAGR,IAGI,GAAW,EAAG,EAAK,EAAW,EAH9B,EAAQ,EAAE,KAAK,UAAW,GAAQ,KAAM,EAAM,OAAQ,OAEtD,EAAS,KAAK,EAGlB,IAAI,EAAO,GAIV,IAFA,EAAY,EAAO,GAAM,QAEpB,EAAI,EAAG,EAAM,EAAU,OAAY,EAAJ,EAAS,IAC5C,EAAU,GAAG,OAAO,KAAK,EAAU,GAAG,QAAS,EAKjD,GAAY,EAAO,EAAO,OAE1B,KAAK,IAAa,GAGjB,GAFA,EAAY,EAAU,GAAW,QAGhC,IAAK,EAAI,EAAG,EAAM,EAAU,OAAY,EAAJ,EAAS,IAC5C,EAAU,GAAG,OAAO,KAAK,EAAU,GAAG,QAAS,EAKlD,OAAO,OAGR,wBAAyB,SAAU,EAAO,EAAI,GAE7C,GAAI,EAAE,KAAK,WAAW,EAAO,KAAK,wBAAyB,KAAM,EAAI,GAAY,MAAO,KAExF,IAAI,GAAU,EAAE,KAAK,WACpB,KACK,oBAAoB,EAAO,EAAI,GAC/B,oBAAoB,EAAO,EAAS,IACvC,KAEH,OAAO,MACF,iBAAiB,EAAO,EAAI,GAC5B,iBAAiB,EAAO,EAAS,KAIxC,EAAE,MAAM,OAAO,GAAK,EAAE,MAAM,OAAO,iBACnC,EAAE,MAAM,OAAO,IAAM,EAAE,MAAM,OAAO,oBACpC,EAAE,MAAM,OAAO,KAAO,EAAE,MAAM,OAAO,wBACrC,EAAE,MAAM,OAAO,KAAO,EAAE,MAAM,OAAO,UAOpC,WAEA,GAAI,GAAK,iBAAmB,GAC3B,EAAQ,IAAO,EAAS,iBAGrB,EAAK,UAAU,UAAU,cACzB,EAAkC,KAAzB,EAAG,QAAQ,UACpB,EAAkC,KAAzB,EAAG,QAAQ,UACpB,EAAsC,KAA1B,EAAG,QAAQ,WACvB,EAAoC,KAA1B,EAAG,QAAQ,WACrB,EAA0C,KAA9B,EAAG,OAAO,gBACzB,EAAgC,KAAxB,EAAG,QAAQ,SAEhB,QAAgB,cAAgB,EAAY,GAC5C,GAAa,EAAO,cAAgB,EAAO,eAC9C,EAAW,EAAO,cAAgB,EAAO,UAAU,gBAC/C,EACD,EAAU,oBAAsB,IAAU,EAAO,iBAAmB,GAC1D,cAAgB,IAAU,EAAO,WAAW,4BAC5C,EAAO,WAAW,2BAA2B,QAEvD,EAAM,EAAS,gBACf,EAAO,GAAO,cAAgB,GAAI,MAClC,EAAY,mBAAqB,IAAY,OAAS,IAAI,GAAO,kBAAuB,EACxF,EAAU,kBAAoB,GAAI,MAClC,EAAU,eAAiB,GAAI,MAC/B,GAAS,EAAO,eAAiB,GAAQ,GAAY,GAAW,KAAa,EAE7E,GAAS,EAAO,aAAe,IAAc,GAAW,gBAAkB,IAC5E,EAAO,eAAiB,YAAoB,GAAO,cAErD,GAAE,SACD,GAAI,EACJ,MAAO,EACP,OAAQ,EACR,MAAO,IAAU,IAAW,EAAO,QAAU,EAE7C,QAAS,EACT,UAAW,EAEX,OAAQ,EAER,KAAM,EACN,SAAU,EACV,QAAS,EACT,QAAS,EACT,MAAO,EAEP,OAAQ,EACR,aAAc,GAAU,EACxB,eAAgB,GAAU,EAC1B,YAAa,GAAU,EAAO,MAE9B,MAAO,EACP,UAAW,EACX,QAAS,EAET,OAAQ,MAUV,EAAE,MAAQ,SAAqB,EAAc,EAAe,GAC3D,KAAK,EAAK,EAAQ,KAAK,MAAM,GAAK,EAClC,KAAK,EAAK,EAAQ,KAAK,MAAM,GAAK,GAGnC,EAAE,MAAM,WAEP,MAAO,WACN,MAAO,IAAI,GAAE,MAAM,KAAK,EAAG,KAAK,IAIjC,IAAK,SAAU,GACd,MAAO,MAAK,QAAQ,KAAK,EAAE,MAAM,KAIlC,KAAM,SAAU,GAGf,MAFA,MAAK,GAAK,EAAM,EAChB,KAAK,GAAK,EAAM,EACT,MAGR,SAAU,SAAU,GACnB,MAAO,MAAK,QAAQ,UAAU,EAAE,MAAM,KAGvC,UAAW,SAAU,GAGpB,MAFA,MAAK,GAAK,EAAM,EAChB,KAAK,GAAK,EAAM,EACT,MAGR,SAAU,SAAU,GACnB,MAAO,MAAK,QAAQ,UAAU,IAG/B,UAAW,SAAU,GAGpB,MAFA,MAAK,GAAK,EACV,KAAK,GAAK,EACH,MAGR,WAAY,SAAU,GACrB,MAAO,MAAK,QAAQ,YAAY,IAGjC,YAAa,SAAU,GAGtB,MAFA,MAAK,GAAK,EACV,KAAK,GAAK,EACH,MAGR,MAAO,WACN,MAAO,MAAK,QAAQ,UAGrB,OAAQ,WAGP,MAFA,MAAK,EAAI,KAAK,MAAM,KAAK,GACzB,KAAK,EAAI,KAAK,MAAM,KAAK,GAClB,MAGR,MAAO,WACN,MAAO,MAAK,QAAQ,UAGrB,OAAQ,WAGP,MAFA,MAAK,EAAI,KAAK,MAAM,KAAK,GACzB,KAAK,EAAI,KAAK,MAAM,KAAK,GAClB,MAGR,WAAY,SAAU,GACrB,EAAQ,EAAE,MAAM,EAEhB,IAAI,GAAI,EAAM,EAAI,KAAK,EACnB,EAAI,EAAM,EAAI,KAAK,CAEvB,OAAO,MAAK,KAAK,EAAI,EAAI,EAAI,IAG9B,OAAQ,SAAU,GAGjB,MAFA,GAAQ,EAAE,MAAM,GAET,EAAM,IAAM,KAAK,GACjB,EAAM,IAAM,KAAK,GAGzB,SAAU,SAAU,GAGnB,MAFA,GAAQ,EAAE,MAAM,GAET,KAAK,IAAI,EAAM,IAAM,KAAK,IAAI,KAAK,IACnC,KAAK,IAAI,EAAM,IAAM,KAAK,IAAI,KAAK,IAG3C,SAAU,WACT,MAAO,SACC,EAAE,KAAK,UAAU,KAAK,GAAK,KAC3B,EAAE,KAAK,UAAU,KAAK,GAAK,MAIrC,EAAE,MAAQ,SAAU,EAAG,EAAG,GACzB,MAAI,aAAa,GAAE,MACX,EAEJ,EAAE,KAAK,QAAQ,GACX,GAAI,GAAE,MAAM,EAAE,GAAI,EAAE,IAExB,IAAM,GAAmB,OAAN,EACf,EAED,GAAI,GAAE,MAAM,EAAG,EAAG,IAQ1B,EAAE,OAAS,SAAU,EAAG,GACvB,GAAK,EAIL,IAAK,GAFD,GAAS,GAAK,EAAG,GAAK,EAEjB,EAAI,EAAG,EAAM,EAAO,OAAY,EAAJ,EAAS,IAC7C,KAAK,OAAO,EAAO,KAIrB,EAAE,OAAO,WAER,OAAQ,SAAU,GAYjB,MAXA,GAAQ,EAAE,MAAM,GAEX,KAAK,KAAQ,KAAK,KAItB,KAAK,IAAI,EAAI,KAAK,IAAI,EAAM,EAAG,KAAK,IAAI,GACxC,KAAK,IAAI,EAAI,KAAK,IAAI,EAAM,EAAG,KAAK,IAAI,GACxC,KAAK,IAAI,EAAI,KAAK,IAAI,EAAM,EAAG,KAAK,IAAI,GACxC,KAAK,IAAI,EAAI,KAAK,IAAI,EAAM,EAAG,KAAK,IAAI,KANxC,KAAK,IAAM,EAAM,QACjB,KAAK,IAAM,EAAM,SAOX,MAGR,UAAW,SAAU,GACpB,MAAO,IAAI,GAAE,OACJ,KAAK,IAAI,EAAI,KAAK,IAAI,GAAK,GAC3B,KAAK,IAAI,EAAI,KAAK,IAAI,GAAK,EAAG,IAGxC,cAAe,WACd,MAAO,IAAI,GAAE,MAAM,KAAK,IAAI,EAAG,KAAK,IAAI,IAGzC,YAAa,WACZ,MAAO,IAAI,GAAE,MAAM,KAAK,IAAI,EAAG,KAAK,IAAI,IAGzC,QAAS,WACR,MAAO,MAAK,IAAI,SAAS,KAAK,MAG/B,SAAU,SAAU,GACnB,GAAI,GAAK,CAeT,OAZC,GADqB,gBAAX,GAAI,IAAmB,YAAe,GAAE,MAC5C,EAAE,MAAM,GAER,EAAE,OAAO,GAGZ,YAAe,GAAE,QACpB,EAAM,EAAI,IACV,EAAM,EAAI,KAEV,EAAM,EAAM,EAGL,EAAI,GAAK,KAAK,IAAI,GAClB,EAAI,GAAK,KAAK,IAAI,GAClB,EAAI,GAAK,KAAK,IAAI,GAClB,EAAI,GAAK,KAAK,IAAI,GAG3B,WAAY,SAAU,GACrB,EAAS,EAAE,OAAO,EAElB,IAAI,GAAM,KAAK,IACX,EAAM,KAAK,IACX,EAAO,EAAO,IACd,EAAO,EAAO,IACd,EAAe,EAAK,GAAK,EAAI,GAAO,EAAK,GAAK,EAAI,EAClD,EAAe,EAAK,GAAK,EAAI,GAAO,EAAK,GAAK,EAAI,CAEtD,OAAO,IAAe,GAGvB,QAAS,WACR,SAAU,KAAK,MAAO,KAAK,OAI7B,EAAE,OAAS,SAAU,EAAG,GACvB,OAAK,GAAK,YAAa,GAAE,OACjB,EAED,GAAI,GAAE,OAAO,EAAG,IAQxB,EAAE,eAAiB,SAAU,EAAG,EAAG,EAAG,GACrC,KAAK,GAAK,EACV,KAAK,GAAK,EACV,KAAK,GAAK,EACV,KAAK,GAAK,GAGX,EAAE,eAAe,WAChB,UAAW,SAAU,EAAO,GAC3B,MAAO,MAAK,WAAW,EAAM,QAAS,IAIvC,WAAY,SAAU,EAAO,GAI5B,MAHA,GAAQ,GAAS,EACjB,EAAM,EAAI,GAAS,KAAK,GAAK,EAAM,EAAI,KAAK,IAC5C,EAAM,EAAI,GAAS,KAAK,GAAK,EAAM,EAAI,KAAK,IACrC,GAGR,YAAa,SAAU,EAAO,GAE7B,MADA,GAAQ,GAAS,EACV,GAAI,GAAE,OACJ,EAAM,EAAI,EAAQ,KAAK,IAAM,KAAK,IAClC,EAAM,EAAI,EAAQ,KAAK,IAAM,KAAK,MAS7C,EAAE,SACD,IAAK,SAAU,GACd,MAAsB,gBAAP,GAAkB,EAAS,eAAe,GAAM,GAGhE,SAAU,SAAU,EAAI,GAEvB,GAAI,GAAQ,EAAG,MAAM,EAMrB,KAJK,GAAS,EAAG,eAChB,EAAQ,EAAG,aAAa,MAGnB,GAAmB,SAAV,IAAqB,EAAS,YAAa,CACzD,GAAI,GAAM,EAAS,YAAY,iBAAiB,EAAI,KACpD,GAAQ,EAAM,EAAI,GAAS,KAG5B,MAAiB,SAAV,EAAmB,KAAO,GAGlC,kBAAmB,SAAU,GAE5B,GAKI,GALA,EAAM,EACN,EAAO,EACP,EAAK,EACL,EAAU,EAAS,KACnB,EAAQ,EAAS,eAGrB,GAAG,CAUF,GATA,GAAQ,EAAG,WAAc,EACzB,GAAQ,EAAG,YAAc,EAGzB,GAAO,SAAS,EAAE,QAAQ,SAAS,EAAI,kBAAmB,KAAO,EACjE,GAAQ,SAAS,EAAE,QAAQ,SAAS,EAAI,mBAAoB,KAAO,EAEnE,EAAM,EAAE,QAAQ,SAAS,EAAI,YAEzB,EAAG,eAAiB,GAAmB,aAAR,EAAsB,KAEzD,IAAY,UAAR,EAAiB,CACpB,GAAQ,EAAQ,WAAc,EAAM,WAAc,EAClD,GAAQ,EAAQ,YAAc,EAAM,YAAc,CAClD,OAGD,GAAY,aAAR,IAAuB,EAAG,WAAY,CACzC,GAAI,GAAQ,EAAE,QAAQ,SAAS,EAAI,SAC/B,EAAW,EAAE,QAAQ,SAAS,EAAI,aAClC,EAAI,EAAG,yBAEG,SAAV,GAAiC,SAAb,KACvB,GAAQ,EAAE,KAAO,EAAG,YAIrB,GAAO,EAAE,KAAO,EAAQ,WAAc,EAAM,WAAc,EAE1D,OAGD,EAAK,EAAG,mBAEA,EAET,GAAK,CAEL,GAAG,CACF,GAAI,IAAO,EAAW,KAEtB,IAAQ,EAAG,WAAc,EACzB,GAAQ,EAAG,YAAc,EAEzB,EAAK,EAAG,iBACA,EAET,OAAO,IAAI,GAAE,MAAM,EAAM,IAG1B,cAAe,WAKd,MAJK,GAAE,QAAQ,kBACd,EAAE,QAAQ,iBAAkB,EAC5B,EAAE,QAAQ,UAA+D,QAAnD,EAAE,QAAQ,SAAS,EAAS,KAAM,cAElD,EAAE,QAAQ,WAGlB,OAAQ,SAAU,EAAS,EAAW,GAErC,GAAI,GAAK,EAAS,cAAc,EAOhC,OANA,GAAG,UAAY,EAEX,GACH,EAAU,YAAY,GAGhB,GAGR,SAAU,SAAU,EAAI,GACvB,GAAI,EAAG,YAAc,EACpB,MAAO,GAAG,UAAU,SAAS,EAE9B,IAAI,GAAY,EAAE,QAAQ,UAAU,EACpC,OAAO,GAAU,OAAS,GAAK,GAAI,QAAO,UAAY,EAAO,WAAW,KAAK,IAG9E,SAAU,SAAU,EAAI,GACvB,GAAI,EAAG,YAAc,EAEpB,IAAK,GADD,GAAU,EAAE,KAAK,WAAW,GACvB,EAAI,EAAG,EAAM,EAAQ,OAAY,EAAJ,EAAS,IAC9C,EAAG,UAAU,IAAI,EAAQ,QAEpB,KAAK,EAAE,QAAQ,SAAS,EAAI,GAAO,CACzC,GAAI,GAAY,EAAE,QAAQ,UAAU,EACpC,GAAE,QAAQ,UAAU,GAAK,EAAY,EAAY,IAAM,IAAM,KAI/D,YAAa,SAAU,EAAI,GACtB,EAAG,YAAc,EACpB,EAAG,UAAU,OAAO,GAEpB,EAAE,QAAQ,UAAU,EAAI,EAAE,KAAK,MAAM,IAAM,EAAE,QAAQ,UAAU,GAAM,KAAK,QAAQ,IAAM,EAAO,IAAK,QAItG,UAAW,SAAU,EAAI,GACpB,EAAG,UAAU,UAAY,EAC5B,EAAG,UAAY,EAGf,EAAG,UAAU,QAAU,GAIzB,UAAW,SAAU,GACpB,MAAO,GAAG,UAAU,UAAY,EAAY,EAAG,UAAY,EAAG,UAAU,SAGzE,WAAY,SAAU,EAAI,GAEzB,GAAI,WAAa,GAAG,MACnB,EAAG,MAAM,QAAU,MAEb,IAAI,UAAY,GAAG,MAAO,CAEhC,GAAI,IAAS,EACT,EAAa,kCAGjB,KACC,EAAS,EAAG,QAAQ,KAAK,GACxB,MAAO,GAGR,GAAc,IAAV,EAAe,OAGpB,EAAQ,KAAK,MAAc,IAAR,GAEf,GACH,EAAO,QAAqB,MAAV,EAClB,EAAO,QAAU,GAEjB,EAAG,MAAM,QAAU,WAAa,EAAa,YAAc,EAAQ,MAKtE,SAAU,SAAU,GAInB,IAAK,GAFD,GAAQ,EAAS,gBAAgB,MAE5B,EAAI,EAAG,EAAI,EAAM,OAAQ,IACjC,GAAI,EAAM,IAAM,GACf,MAAO,GAAM,EAGf,QAAO,GAGR,mBAAoB,SAAU,GAK7B,GAAI,GAAO,EAAE,QAAQ,SACjB,EAAO,aAAe,EAAO,KAAO,IAAM,IAC1C,GAAS,EAAO,KAAO,IAAM,GAEjC,OAAO,GAAO,EAAM,EAAI,MAAQ,EAAM,EAAI,KAAO,GAGlD,eAAgB,SAAU,EAAO,GAEhC,GAAI,GAAkB,EAAE,QAAQ,mBAAmB,EAAO,IAAI,EAAO,WAAW,GAAK,KACjF,EAAW,UAAY,EAAQ,IAEnC,OAAO,GAAkB,GAG1B,YAAa,SAAU,EAAI,EAAO,GAGjC,EAAG,aAAe,GAEb,GAAa,EAAE,QAAQ,MAC3B,EAAG,MAAM,EAAE,QAAQ,WAAc,EAAE,QAAQ,mBAAmB,IAE9D,EAAG,MAAM,KAAO,EAAM,EAAI,KAC1B,EAAG,MAAM,IAAM,EAAM,EAAI,OAI3B,YAAa,SAAU,GAKtB,MAAO,GAAG,eAOZ,EAAE,QAAQ,UAAY,EAAE,QAAQ,UACvB,YAAa,kBAAmB,aAAc,eAAgB,gBAKvE,EAAE,QAAQ,WAAa,EAAE,QAAQ,UACxB,mBAAoB,aAAc,cAAe,gBAAiB,iBAE3E,EAAE,QAAQ,eACuB,qBAAzB,EAAE,QAAQ,YAA8D,gBAAzB,EAAE,QAAQ,WACzD,EAAE,QAAQ,WAAa,MAAQ,gBAEvC,WACI,GAAI,iBAAmB,GACnB,EAAE,OAAO,EAAE,SACP,qBAAsB,WAClB,EAAE,SAAS,GAAG,EAAQ,cAAe,EAAE,SAAS,iBAGpD,oBAAqB,WACjB,EAAE,SAAS,IAAI,EAAQ,cAAe,EAAE,SAAS,uBAGtD,CACH,GAAI,GAAqB,EAAE,QAAQ,UAC9B,aAAc,mBAAoB,cAAe,gBAAiB,gBAEvE,GAAE,OAAO,EAAE,SACP,qBAAsB,WAClB,GAAI,EAAoB,CACpB,GAAI,GAAQ,EAAS,gBAAgB,KACrC,MAAK,YAAc,EAAM,GACzB,EAAM,GAAsB,SAIpC,oBAAqB,WACb,IACA,EAAS,gBAAgB,MAAM,GAAsB,KAAK,kBACnD,MAAK,gBAM/B,EAAE,OAAO,EAAE,SACV,iBAAkB,WACjB,EAAE,SAAS,GAAG,EAAQ,YAAa,EAAE,SAAS,iBAG/C,gBAAiB,WAChB,EAAE,SAAS,IAAI,EAAQ,YAAa,EAAE,SAAS,sBAUlD,EAAE,OAAS,SAAU,EAAK,EAAK,GAI9B,GAHA,EAAM,WAAW,GACjB,EAAM,WAAW,GAEb,MAAM,IAAQ,MAAM,GACvB,KAAM,IAAI,OAAM,2BAA6B,EAAM,KAAO,EAAM,IAGjE,MAAK,IAAM,EACX,KAAK,IAAM,EAEP,IAAQ,IACX,KAAK,IAAM,WAAW,KAIxB,EAAE,OAAO,EAAE,QACV,WAAY,KAAK,GAAK,IACtB,WAAY,IAAM,KAAK,GACvB,WAAY,OAGb,EAAE,OAAO,WACR,OAAQ,SAAU,GACjB,IAAK,EAAO,OAAO,CAEnB,GAAM,EAAE,OAAO,EAEf,IAAI,GAAS,KAAK,IACV,KAAK,IAAI,KAAK,IAAM,EAAI,KACxB,KAAK,IAAI,KAAK,IAAM,EAAI,KAEhC,OAAO,IAAU,EAAE,OAAO,YAG3B,SAAU,SAAU,GACnB,MAAO,UACC,EAAE,KAAK,UAAU,KAAK,IAAK,GAAa,KACxC,EAAE,KAAK,UAAU,KAAK,IAAK,GAAa,KAKjD,WAAY,SAAU,GACrB,EAAQ,EAAE,OAAO,EAEjB,IAAI,GAAI,QACJ,EAAM,EAAE,OAAO,WACf,GAAQ,EAAM,IAAM,KAAK,KAAO,EAChC,GAAQ,EAAM,IAAM,KAAK,KAAO,EAChC,EAAO,KAAK,IAAM,EAClB,EAAO,EAAM,IAAM,EACnB,EAAO,KAAK,IAAI,EAAO,GACvB,EAAO,KAAK,IAAI,EAAO,GAEvB,EAAI,EAAO,EAAO,EAAO,EAAO,KAAK,IAAI,GAAQ,KAAK,IAAI,EAE9D,OAAW,GAAJ,EAAQ,KAAK,MAAM,KAAK,KAAK,GAAI,KAAK,KAAK,EAAI,KAGvD,KAAM,SAAU,EAAG,GAClB,GAAI,GAAM,KAAK,GAOf,OALA,GAAI,GAAK,KACT,EAAI,GAAM,IAEV,GAAO,EAAM,IAAM,EAAI,IAAY,EAAN,GAAW,IAAQ,EAAI,EAAI,GAEjD,GAAI,GAAE,OAAO,KAAK,IAAK,KAIhC,EAAE,OAAS,SAAU,EAAG,GACvB,MAAI,aAAa,GAAE,OACX,EAEJ,EAAE,KAAK,QAAQ,GACE,gBAAT,GAAE,IAAmC,gBAAT,GAAE,GACjC,GAAI,GAAE,OAAO,EAAE,GAAI,EAAE,GAAI,EAAE,IAE3B,KAGL,IAAM,GAAmB,OAAN,EACf,EAES,gBAAN,IAAkB,OAAS,GAC9B,GAAI,GAAE,OAAO,EAAE,IAAK,OAAS,GAAI,EAAE,IAAM,EAAE,KAE/C,IAAM,EACF,KAED,GAAI,GAAE,OAAO,EAAG,IASxB,EAAE,aAAe,SAAU,EAAW,GACrC,GAAK,EAIL,IAAK,GAFD,GAAU,GAAa,EAAW,GAAa,EAE1C,EAAI,EAAG,EAAM,EAAQ,OAAY,EAAJ,EAAS,IAC9C,KAAK,OAAO,EAAQ,KAItB,EAAE,aAAa,WAEd,OAAQ,SAAU,GACjB,IAAK,EAAO,MAAO,KAEnB,IAAI,GAAS,EAAE,OAAO,EAsBtB,OApBC,GADc,OAAX,EACG,EAEA,EAAE,aAAa,GAGlB,YAAe,GAAE,OACf,KAAK,YAAe,KAAK,YAI7B,KAAK,WAAW,IAAM,KAAK,IAAI,EAAI,IAAK,KAAK,WAAW,KACxD,KAAK,WAAW,IAAM,KAAK,IAAI,EAAI,IAAK,KAAK,WAAW,KAExD,KAAK,WAAW,IAAM,KAAK,IAAI,EAAI,IAAK,KAAK,WAAW,KACxD,KAAK,WAAW,IAAM,KAAK,IAAI,EAAI,IAAK,KAAK,WAAW,OAPxD,KAAK,WAAa,GAAI,GAAE,OAAO,EAAI,IAAK,EAAI,KAC5C,KAAK,WAAa,GAAI,GAAE,OAAO,EAAI,IAAK,EAAI,MAQnC,YAAe,GAAE,eAC3B,KAAK,OAAO,EAAI,YAChB,KAAK,OAAO,EAAI,aAEV,MAIR,IAAK,SAAU,GACd,GAAI,GAAK,KAAK,WACV,EAAK,KAAK,WACV,EAAe,KAAK,IAAI,EAAG,IAAM,EAAG,KAAO,EAC3C,EAAc,KAAK,IAAI,EAAG,IAAM,EAAG,KAAO,CAE9C,OAAO,IAAI,GAAE,aACL,GAAI,GAAE,OAAO,EAAG,IAAM,EAAc,EAAG,IAAM,GAC7C,GAAI,GAAE,OAAO,EAAG,IAAM,EAAc,EAAG,IAAM,KAGtD,UAAW,WACV,MAAO,IAAI,GAAE,QACJ,KAAK,WAAW,IAAM,KAAK,WAAW,KAAO,GAC7C,KAAK,WAAW,IAAM,KAAK,WAAW,KAAO,IAGvD,aAAc,WACb,MAAO,MAAK,YAGb,aAAc,WACb,MAAO,MAAK,YAGb,aAAc,WACb,MAAO,IAAI,GAAE,OAAO,KAAK,WAAY,KAAK,YAG3C,aAAc,WACb,MAAO,IAAI,GAAE,OAAO,KAAK,WAAY,KAAK,YAG3C,QAAS,WACR,MAAO,MAAK,WAAW,KAGxB,SAAU,WACT,MAAO,MAAK,WAAW,KAGxB,QAAS,WACR,MAAO,MAAK,WAAW,KAGxB,SAAU,WACT,MAAO,MAAK,WAAW,KAGxB,SAAU,SAAU,GAElB,EADqB,gBAAX,GAAI,IAAmB,YAAe,GAAE,OAC5C,EAAE,OAAO,GAET,EAAE,aAAa,EAGtB,IAEI,GAAK,EAFL,EAAK,KAAK,WACV,EAAK,KAAK,UAUd,OAPI,aAAe,GAAE,cACpB,EAAM,EAAI,eACV,EAAM,EAAI,gBAEV,EAAM,EAAM,EAGL,EAAI,KAAO,EAAG,KAAS,EAAI,KAAO,EAAG,KACrC,EAAI,KAAO,EAAG,KAAS,EAAI,KAAO,EAAG,KAG9C,WAAY,SAAU,GACrB,EAAS,EAAE,aAAa,EAExB,IAAI,GAAK,KAAK,WACV,EAAK,KAAK,WACV,EAAM,EAAO,eACb,EAAM,EAAO,eAEb,EAAiB,EAAI,KAAO,EAAG,KAAS,EAAI,KAAO,EAAG,IACtD,EAAiB,EAAI,KAAO,EAAG,KAAS,EAAI,KAAO,EAAG,GAE1D,OAAO,IAAiB,GAGzB,aAAc,WACb,OAAQ,KAAK,UAAW,KAAK,WAAY,KAAK,UAAW,KAAK,YAAY,KAAK,MAGhF,OAAQ,SAAU,GACjB,MAAK,IAEL,EAAS,EAAE,aAAa,GAEjB,KAAK,WAAW,OAAO,EAAO,iBAC9B,KAAK,WAAW,OAAO,EAAO,kBALf,GAQvB,QAAS,WACR,SAAU,KAAK,aAAc,KAAK,cAMpC,EAAE,aAAe,SAAU,EAAG,GAC7B,OAAK,GAAK,YAAa,GAAE,aACjB,EAED,GAAI,GAAE,aAAa,EAAG,IAQ9B,EAAE,cAOF,EAAE,WAAW,mBACZ,aAAc,cAEd,QAAS,SAAU,GAClB,GAAI,GAAI,EAAE,OAAO,WACb,EAAM,KAAK,aACX,EAAM,KAAK,IAAI,KAAK,IAAI,EAAK,EAAO,MAAO,GAC3C,EAAI,EAAO,IAAM,EACjB,EAAI,EAAM,CAId,OAFA,GAAI,KAAK,IAAI,KAAK,IAAK,KAAK,GAAK,EAAM,EAAI,IAEpC,GAAI,GAAE,MAAM,EAAG,IAGvB,UAAW,SAAU,GACpB,GAAI,GAAI,EAAE,OAAO,WACb,EAAM,EAAM,EAAI,EAChB,GAAO,EAAI,KAAK,KAAK,KAAK,IAAI,EAAM,IAAO,KAAK,GAAK,GAAM,CAE/D,OAAO,IAAI,GAAE,OAAO,EAAK,KAS3B,EAAE,WAAW,QACZ,QAAS,SAAU,GAClB,MAAO,IAAI,GAAE,MAAM,EAAO,IAAK,EAAO,MAGvC,UAAW,SAAU,GACpB,MAAO,IAAI,GAAE,OAAO,EAAM,EAAG,EAAM,KASrC,EAAE,KACD,cAAe,SAAU,EAAQ,GAChC,GAAI,GAAiB,KAAK,WAAW,QAAQ,GACzC,EAAQ,KAAK,MAAM,EAEvB,OAAO,MAAK,eAAe,WAAW,EAAgB,IAGvD,cAAe,SAAU,EAAO,GAC/B,GAAI,GAAQ,KAAK,MAAM,GACnB,EAAqB,KAAK,eAAe,YAAY,EAAO,EAEhE,OAAO,MAAK,WAAW,UAAU,IAGlC,QAAS,SAAU,GAClB,MAAO,MAAK,WAAW,QAAQ,IAGhC,MAAO,SAAU,GAChB,MAAO,KAAM,KAAK,IAAI,EAAG,IAG1B,QAAS,SAAU,GAClB,GAAI,GAAI,KAAK,MAAM,EACnB,OAAO,GAAE,MAAM,EAAG,KASpB,EAAE,IAAI,OAAS,EAAE,UAAW,EAAE,KAC7B,WAAY,EAAE,WAAW,OACzB,eAAgB,GAAI,GAAE,eAAe,EAAG,EAAG,GAAI,GAE/C,MAAO,SAAU,GAChB,MAAO,MAAK,IAAI,EAAG,MAUrB,EAAE,IAAI,SAAW,EAAE,UAAW,EAAE,KAC/B,KAAM,YAEN,WAAY,EAAE,WAAW,kBACzB,eAAgB,GAAI,GAAE,eAAe,GAAM,KAAK,GAAI,IAAM,GAAM,KAAK,GAAI,IAEzE,QAAS,SAAU,GAClB,GAAI,GAAiB,KAAK,WAAW,QAAQ,GACzC,EAAc,OAClB,OAAO,GAAe,WAAW,MAInC,EAAE,IAAI,WAAa,EAAE,UAAW,EAAE,IAAI,UACrC,KAAM,gBAQP,EAAE,IAAI,SAAW,EAAE,UAAW,EAAE,KAC/B,KAAM,YAEN,WAAY,EAAE,WAAW,OACzB,eAAgB,GAAI,GAAE,eAAe,EAAI,IAAK,GAAK,GAAK,IAAK,MAQ9D,EAAE,IAAM,EAAE,MAAM,QAEf,SAAU,EAAE,MAAM,OAElB,SACC,IAAK,EAAE,IAAI,SAQX,cAAe,EAAE,QAAQ,aAAe,EAAE,QAAQ,UAClD,aAAa,EACb,oBAAqB,EAAE,QAAQ,YAAc,EAAE,QAAQ,OAGxD,WAAY,SAAU,EAAI,GACzB,EAAU,EAAE,WAAW,KAAM,GAG7B,KAAK,eAAe,GACpB,KAAK,cAGL,KAAK,UAAY,EAAE,KAAK,KAAK,UAAW,MAExC,KAAK,cAED,EAAQ,WACX,KAAK,aAAa,EAAQ,WAGvB,EAAQ,QAAU,EAAQ,OAAS,GACtC,KAAK,QAAQ,EAAE,OAAO,EAAQ,QAAS,EAAQ,MAAO,OAAO,IAG9D,KAAK,aAEL,KAAK,WACL,KAAK,oBACL,KAAK,eAAiB,EAEtB,KAAK,gBAEL,KAAK,WAAW,EAAQ,SAOzB,QAAS,SAAU,EAAQ,GAG1B,MAFA,GAAO,IAAS,EAAY,KAAK,UAAY,EAC7C,KAAK,WAAW,EAAE,OAAO,GAAS,KAAK,WAAW,IAC3C,MAGR,QAAS,SAAU,EAAM,GACxB,MAAK,MAAK,QAIH,KAAK,QAAQ,KAAK,YAAa,GAAO,KAAM,KAHlD,KAAK,MAAQ,KAAK,WAAW,GACtB,OAKT,OAAQ,SAAU,EAAO,GACxB,MAAO,MAAK,QAAQ,KAAK,OAAS,GAAS,GAAI,IAGhD,QAAS,SAAU,EAAO,GACzB,MAAO,MAAK,QAAQ,KAAK,OAAS,GAAS,GAAI,IAGhD,cAAe,SAAU,EAAQ,EAAM,GACtC,GAAI,GAAQ,KAAK,aAAa,GAC1B,EAAW,KAAK,UAAU,SAAS,GACnC,EAAiB,YAAkB,GAAE,MAAQ,EAAS,KAAK,uBAAuB,GAElF,EAAe,EAAe,SAAS,GAAU,WAAW,EAAI,EAAI,GACpE,EAAY,KAAK,uBAAuB,EAAS,IAAI,GAEzD,OAAO,MAAK,QAAQ,EAAW,GAAO,KAAM,KAG7C,UAAW,SAAU,EAAQ,GAE5B,EAAU,MACV,EAAS,EAAO,UAAY,EAAO,YAAc,EAAE,aAAa,EAEhE,IAAI,GAAY,EAAE,MAAM,EAAQ,gBAAkB,EAAQ,UAAY,EAAG,IACrE,EAAY,EAAE,MAAM,EAAQ,oBAAsB,EAAQ,UAAY,EAAG,IAEzE,EAAO,KAAK,cAAc,GAAQ,EAAO,EAAU,IAAI,GAE3D,GAAQ,EAAe,QAAI,KAAK,IAAI,EAAQ,QAAS,GAAQ,CAE7D,IAAI,GAAgB,EAAU,SAAS,GAAW,SAAS,GAEvD,EAAU,KAAK,QAAQ,EAAO,eAAgB,GAC9C,EAAU,KAAK,QAAQ,EAAO,eAAgB,GAC9C,EAAS,KAAK,UAAU,EAAQ,IAAI,GAAS,SAAS,GAAG,IAAI,GAAgB,EAEjF,OAAO,MAAK,QAAQ,EAAQ,EAAM,IAGnC,SAAU,SAAU,GACnB,MAAO,MAAK,YAAY,IAAK,OAAQ,GAAI,MAAO,IAGjD,MAAO,SAAU,EAAQ,GACxB,MAAO,MAAK,QAAQ,EAAQ,KAAK,OAAQ,IAAK,KAG/C,MAAO,SAAU,GAOhB,MALA,MAAK,KAAK,aAEV,KAAK,UAAU,EAAE,MAAM,IAEvB,KAAK,KAAK,QACH,KAAK,KAAK,YAGlB,aAAc,SAAU,GAKvB,MAJA,GAAS,EAAE,aAAa,GAExB,KAAK,QAAQ,UAAY,EAEpB,GAID,KAAK,SACR,KAAK,sBAGC,KAAK,GAAG,UAAW,KAAK,oBAAqB,OAP5C,KAAK,IAAI,UAAW,KAAK,oBAAqB,OAUvD,gBAAiB,SAAU,EAAQ,GAClC,GAAI,GAAS,KAAK,YACjB,EAAY,KAAK,aAAa,EAAQ,KAAK,MAAO,EAEnD,OAAI,GAAO,OAAO,GAAqB,KAEhC,KAAK,MAAM,EAAW,IAG9B,SAAU,SAAU,GAGnB,GAAI,GAAK,EAAE,MAAM,EAEjB,OAAI,MAAK,QAAQ,GAAc,MAE/B,KAAK,QAAQ,GAAM,GAGf,EAAM,SAAa,MAAM,EAAM,QAAQ,UAAa,MAAM,EAAM,QAAQ,WAC3E,KAAK,iBAAiB,GAAM,EAC5B,KAAK,qBAIF,KAAK,QAAQ,eAAiB,EAAE,WAAc,YAAiB,GAAE,YACpE,KAAK,iBACL,KAAK,oBACL,EAAM,GAAG,OAAQ,KAAK,iBAAkB,OAGrC,KAAK,SACR,KAAK,UAAU,GAGT,OAGR,YAAa,SAAU,GACtB,GAAI,GAAK,EAAE,MAAM,EAEjB,OAAK,MAAK,QAAQ,IAEd,KAAK,SACR,EAAM,SAAS,YAGT,MAAK,QAAQ,GAEhB,KAAK,SACR,KAAK,KAAK,eAAgB,MAAO,IAG9B,KAAK,iBAAiB,WAClB,MAAK,iBAAiB,GAC7B,KAAK,qBAIF,KAAK,QAAQ,eAAiB,EAAE,WAAc,YAAiB,GAAE,YACpE,KAAK,iBACL,KAAK,oBACL,EAAM,IAAI,OAAQ,KAAK,iBAAkB,OAGnC,MAxByB,MA2BjC,SAAU,SAAU,GACnB,MAAK,GAEG,EAAE,MAAM,IAAU,MAAK,SAFV,GAKtB,UAAW,SAAU,EAAQ,GAC5B,IAAK,GAAI,KAAK,MAAK,QAClB,EAAO,KAAK,EAAS,KAAK,QAAQ,GAEnC,OAAO,OAGR,eAAgB,SAAU,GACzB,IAAK,KAAK,QAAW,MAAO,KAE5B,GAAU,EAAE,QACX,SAAS,EACT,KAAK,GACH,KAAY,GAAQ,SAAS,GAAQ,EAExC,IAAI,GAAU,KAAK,SACnB,MAAK,cAAe,EACpB,KAAK,eAAiB,IAEtB,IAAI,GAAU,KAAK,UACf,EAAY,EAAQ,SAAS,GAAG,QAChC,EAAY,EAAQ,SAAS,GAAG,QAChC,EAAS,EAAU,SAAS,EAEhC,OAAK,GAAO,GAAM,EAAO,GAErB,EAAQ,SAAW,EAAQ,IAC9B,KAAK,MAAM,IAGP,EAAQ,KACX,KAAK,UAAU,GAGhB,KAAK,KAAK,QAEN,EAAQ,iBACX,aAAa,KAAK,YAClB,KAAK,WAAa,WAAW,EAAE,KAAK,KAAK,KAAM,KAAM,WAAY,MAEjE,KAAK,KAAK,YAIL,KAAK,KAAK,UAChB,QAAS,EACT,QAAS,KAtB2B,MA2BtC,WAAY,SAAU,EAAM,GAC3B,IAAK,EAAgB,MAAO,KAE5B,IAAI,GAAU,KAAK,GAAQ,GAAI,GAAa,KAQ5C,OANA,MAAK,UAAU,KAAK,GAEhB,KAAK,QAAQ,IAChB,EAAQ,SAGF,MAGR,OAAQ,WACH,KAAK,SACR,KAAK,KAAK,UAGX,KAAK,YAAY,MAEjB,WAEQ,MAAK,WAAW,SACtB,MAAO,GACR,KAAK,WAAW,SAAW,EAU5B,MAPA,MAAK,cACD,KAAK,kBACR,KAAK,mBAGN,KAAK,iBAEE,MAMR,UAAW,WAGV,MAFA,MAAK,iBAED,KAAK,iBAAmB,KAAK,SACzB,KAAK,eAEN,KAAK,mBAAmB,KAAK,yBAGrC,QAAS,WACR,MAAO,MAAK,OAGb,UAAW,WACV,GAAI,GAAS,KAAK,iBACd,EAAK,KAAK,UAAU,EAAO,iBAC3B,EAAK,KAAK,UAAU,EAAO,cAE/B,OAAO,IAAI,GAAE,aAAa,EAAI,IAG/B,WAAY,WACX,MAAO,MAAK,QAAQ,UAAY,EAC9B,KAAK,iBAAmB,EAAY,EAAI,KAAK,eAC9C,KAAK,QAAQ,SAGf,WAAY,WACX,MAAO,MAAK,QAAQ,UAAY,EAC9B,KAAK,iBAAmB,EAAY,EAAA,EAAW,KAAK,eACrD,KAAK,QAAQ,SAGf,cAAe,SAAU,EAAQ,EAAQ,GACxC,EAAS,EAAE,aAAa,EAExB,IAQI,GARA,EAAO,KAAK,cAAgB,EAAS,EAAI,GACzC,EAAU,KAAK,aACf,EAAO,KAAK,UAEZ,EAAK,EAAO,eACZ,EAAK,EAAO,eAEZ,GAAe,CAGnB,GAAU,EAAE,MAAM,IAAY,EAAG,GAEjC,GACC,KACA,EAAa,KAAK,QAAQ,EAAI,GAAM,SAAS,KAAK,QAAQ,EAAI,IAAO,IAAI,GACzE,EAAgB,EAAqC,EAAW,EAAI,EAAK,GAAK,EAAW,EAAI,EAAK,EAAzE,EAAK,SAAS,SAE/B,GAAwB,GAAR,EAEzB,OAAI,IAAgB,EACZ,KAGD,EAAS,EAAO,EAAO,GAG/B,QAAS,WAQR,QAPK,KAAK,OAAS,KAAK,gBACvB,KAAK,MAAQ,GAAI,GAAE,MAClB,KAAK,WAAW,YAChB,KAAK,WAAW,cAEjB,KAAK,cAAe,GAEd,KAAK,MAAM,SAGnB,eAAgB,WACf,GAAI,GAAe,KAAK,kBACxB,OAAO,IAAI,GAAE,OAAO,EAAc,EAAa,IAAI,KAAK,aAGzD,eAAgB,WAEf,MADA,MAAK,iBACE,KAAK,sBAGb,SAAU,WACT,MAAO,MAAK,QAGb,aAAc,WACb,MAAO,MAAK,YAMb,aAAc,SAAU,GACvB,GAAI,GAAM,KAAK,QAAQ,GACvB,OAAO,GAAI,MAAM,GAAU,EAAI,MAAM,KAAK,QAG3C,aAAc,SAAU,GACvB,MAAO,MAAK,MAAS,KAAK,IAAI,GAAS,KAAK,KAM7C,QAAS,SAAU,EAAQ,GAE1B,MADA,GAAO,IAAS,EAAY,KAAK,MAAQ,EAClC,KAAK,QAAQ,IAAI,cAAc,EAAE,OAAO,GAAS,IAGzD,UAAW,SAAU,EAAO,GAE3B,MADA,GAAO,IAAS,EAAY,KAAK,MAAQ,EAClC,KAAK,QAAQ,IAAI,cAAc,EAAE,MAAM,GAAQ,IAGvD,mBAAoB,SAAU,GAC7B,GAAI,GAAiB,EAAE,MAAM,GAAO,IAAI,KAAK,iBAC7C,OAAO,MAAK,UAAU,IAGvB,mBAAoB,SAAU,GAC7B,GAAI,GAAiB,KAAK,QAAQ,EAAE,OAAO,IAAS,QACpD,OAAO,GAAe,UAAU,KAAK,mBAGtC,2BAA4B,SAAU,GACrC,MAAO,GAAE,MAAM,GAAO,SAAS,KAAK,mBAGrC,2BAA4B,SAAU,GACrC,MAAO,GAAE,MAAM,GAAO,IAAI,KAAK,mBAGhC,uBAAwB,SAAU,GACjC,GAAI,GAAa,KAAK,2BAA2B,EAAE,MAAM,GACzD,OAAO,MAAK,mBAAmB,IAGhC,uBAAwB,SAAU,GACjC,MAAO,MAAK,2BAA2B,KAAK,mBAAmB,EAAE,OAAO,MAGzE,2BAA4B,SAAU,GACrC,MAAO,GAAE,SAAS,iBAAiB,EAAG,KAAK,aAG5C,uBAAwB,SAAU,GACjC,MAAO,MAAK,2BAA2B,KAAK,2BAA2B,KAGxE,mBAAoB,SAAU,GAC7B,MAAO,MAAK,mBAAmB,KAAK,uBAAuB,KAM5D,eAAgB,SAAU,GACzB,GAAI,GAAY,KAAK,WAAa,EAAE,QAAQ,IAAI,EAEhD,KAAK,EACJ,KAAM,IAAI,OAAM,2BACV,IAAI,EAAU,SACpB,KAAM,IAAI,OAAM,wCAGjB,GAAU,UAAW,GAGtB,YAAa,WACZ,GAAI,GAAY,KAAK,UAErB,GAAE,QAAQ,SAAS,EAAW,qBAC5B,EAAE,QAAQ,MAAQ,iBAAmB,KACrC,EAAE,QAAQ,OAAS,kBAAoB,KACvC,EAAE,QAAQ,MAAQ,iBAAmB,KACrC,KAAK,QAAQ,cAAgB,qBAAuB,IAEtD,IAAI,GAAW,EAAE,QAAQ,SAAS,EAAW,WAE5B,cAAb,GAAwC,aAAb,GAAwC,UAAb,IACzD,EAAU,MAAM,SAAW,YAG5B,KAAK,aAED,KAAK,iBACR,KAAK,mBAIP,WAAY,WACX,GAAI,GAAQ,KAAK,SAEjB,MAAK,SAAW,EAAM,QAAU,KAAK,YAAY,mBAAoB,KAAK,YAE1E,KAAK,UAAY,EAAM,SAAW,KAAK,YAAY,oBAAqB,KAAK,UAC7E,EAAM,YAAc,KAAK,YAAY,uBAAwB,KAAK,UAClE,EAAM,WAAa,KAAK,YAAY,uBACpC,EAAM,YAAc,KAAK,YAAY,wBACrC,EAAM,WAAa,KAAK,YAAY,uBACpC,EAAM,UAAY,KAAK,YAAY,qBAEnC,IAAI,GAAW,oBAEV,MAAK,QAAQ,sBACjB,EAAE,QAAQ,SAAS,EAAM,WAAY,GACrC,EAAE,QAAQ,SAAS,EAAM,WAAY,GACrC,EAAE,QAAQ,SAAS,EAAM,UAAW,KAItC,YAAa,SAAU,EAAW,GACjC,MAAO,GAAE,QAAQ,OAAO,MAAO,EAAW,GAAa,KAAK,OAAO,cAGpE,YAAa,WACZ,KAAK,WAAW,YAAY,KAAK,WAGlC,WAAY,SAAU,GACrB,EAAS,EAAU,EAAE,KAAK,QAAQ,GAAU,GAAU,KAEtD,KAAK,GAAI,GAAI,EAAG,EAAM,EAAO,OAAY,EAAJ,EAAS,IAC7C,KAAK,SAAS,EAAO,KAOvB,WAAY,SAAU,EAAQ,EAAM,EAAmB,GAEtD,GAAI,GAAe,KAAK,QAAU,CAE7B,KACJ,KAAK,KAAK,aAEN,GACH,KAAK,KAAK,cAIZ,KAAK,MAAQ,EACb,KAAK,eAAiB,EAEtB,KAAK,qBAAuB,KAAK,oBAAoB,GAEhD,EAGJ,KAAK,qBAAqB,KAAK,KAAK,kBAFpC,EAAE,QAAQ,YAAY,KAAK,SAAU,GAAI,GAAE,MAAM,EAAG,IAKrD,KAAK,kBAAoB,KAAK,cAE9B,IAAI,IAAW,KAAK,OACpB,MAAK,SAAU,EAEf,KAAK,KAAK,aAAc,MAAO,IAE3B,IACH,KAAK,KAAK,QACV,KAAK,UAAU,KAAK,UAAW,OAGhC,KAAK,KAAK,SAEN,GAAe,IAClB,KAAK,KAAK,WAGX,KAAK,KAAK,WAAY,MAAO,KAG9B,UAAW,SAAU,GACpB,EAAE,QAAQ,YAAY,KAAK,SAAU,KAAK,iBAAiB,SAAS,KAGrE,aAAc,WACb,MAAO,MAAK,aAAe,KAAK,cAGjC,kBAAmB,WAClB,GAAI,GACH,EAAU,EAAA,EACV,IAAW,EAAA,GACX,EAAc,KAAK,cAEpB,KAAK,IAAK,MAAK,iBAAkB,CAChC,GAAI,GAAQ,KAAK,iBAAiB,EAC7B,OAAM,EAAM,QAAQ,WACxB,EAAU,KAAK,IAAI,EAAS,EAAM,QAAQ,UAEtC,MAAM,EAAM,QAAQ,WACxB,EAAU,KAAK,IAAI,EAAS,EAAM,QAAQ,UAIxC,IAAM,EACT,KAAK,eAAiB,KAAK,eAAiB,GAE5C,KAAK,eAAiB,EACtB,KAAK,eAAiB,GAGnB,IAAgB,KAAK,gBACxB,KAAK,KAAK,qBAIZ,oBAAqB,WACpB,KAAK,gBAAgB,KAAK,QAAQ,YAGnC,eAAgB,WACf,IAAK,KAAK,QACT,KAAM,IAAI,OAAM,mCAMlB,YAAa,SAAU,GACtB,GAAK,EAAE,SAAP,CAEA,EAAQ,GAAS,KAEjB,EAAE,SAAS,GAAO,KAAK,WAAY,QAAS,KAAK,cAAe,KAEhE,IAEI,GAAG,EAFH,GAAU,WAAY,YAAa,UAAW,aACpC,aAAc,YAAa,cAGzC,KAAK,EAAI,EAAG,EAAM,EAAO,OAAY,EAAJ,EAAS,IACzC,EAAE,SAAS,GAAO,KAAK,WAAY,EAAO,GAAI,KAAK,gBAAiB,KAGjE,MAAK,QAAQ,aAChB,EAAE,SAAS,GAAO,EAAQ,SAAU,KAAK,UAAW,QAItD,UAAW,WACV,EAAE,KAAK,gBAAgB,KAAK,gBAC5B,KAAK,eAAiB,EAAE,KAAK,iBACrB,WAAc,KAAK,gBAAgB,iBAAiB,KAAW,MAAM,EAAO,KAAK,aAG1F,cAAe,SAAU,IACnB,KAAK,UAAa,EAAE,aACf,KAAK,UAAY,KAAK,SAAS,SAC/B,KAAK,SAAY,KAAK,QAAQ,UAC5B,EAAE,SAAS,SAAS,KAEhC,KAAK,KAAK,YACV,KAAK,gBAAgB,KAGtB,gBAAiB,SAAU,GAC1B,GAAK,KAAK,UAAW,EAAE,SAAS,SAAS,GAAzC,CAEA,GAAI,GAAO,EAAE,IAIb,IAFA,EAAiB,eAAT,EAAwB,YAAwB,eAAT,EAAwB,WAAa,EAE/E,KAAK,kBAAkB,GAA5B,CAEa,gBAAT,GACH,EAAE,SAAS,eAAe,EAG3B,IAAI,GAAiB,KAAK,2BAA2B,GACjD,EAAa,KAAK,2BAA2B,GAC7C,EAAS,KAAK,mBAAmB,EAErC,MAAK,KAAK,GACT,OAAQ,EACR,WAAY,EACZ,eAAgB,EAChB,cAAe,OAIjB,iBAAkB,WACjB,KAAK,oBACD,KAAK,iBAAmB,KAAK,mBAChC,KAAK,KAAK,mBAIZ,eAAgB,WACf,IAAK,GAAI,GAAI,EAAG,EAAM,KAAK,UAAU,OAAY,EAAJ,EAAS,IACrD,KAAK,UAAU,GAAG,WAIpB,UAAW,SAAU,EAAU,GAM9B,MALI,MAAK,QACR,EAAS,KAAK,GAAW,KAAM,MAE/B,KAAK,GAAG,OAAQ,EAAU,GAEpB,MAGR,UAAW,SAAU,GACpB,EAAM,MAAM,MACZ,KAAK,KAAK,YAAa,MAAO,KAM/B,eAAgB,WACf,MAAO,GAAE,QAAQ,YAAY,KAAK,WAGnC,OAAQ,WACP,GAAI,GAAM,KAAK,gBACf,OAAO,KAAQ,EAAI,QAAQ,EAAG,KAG/B,iBAAkB,WACjB,MAAO,MAAK,iBAAiB,SAAS,KAAK,mBAG5C,oBAAqB,SAAU,EAAQ,GACtC,GAAI,GAAW,KAAK,UAAU,UAAU,EAExC,OAAO,MAAK,QAAQ,EAAQ,GAAM,UAAU,GAAU,UAGvD,uBAAwB,SAAU,EAAQ,EAAS,GAClD,GAAI,GAAU,KAAK,oBAAoB,EAAW,GAAS,IAAI,KAAK,iBACpE,OAAO,MAAK,QAAQ,EAAQ,GAAS,UAAU,IAIhD,qBAAsB,WACrB,MAAO,MAAK,2BAA2B,KAAK,UAAU,UAAU,KAIjE,iBAAkB,SAAU,GAC3B,MAAO,MAAK,mBAAmB,GAAQ,SAAS,KAAK,yBAItD,aAAc,SAAU,EAAQ,EAAM,GAErC,IAAK,EAAU,MAAO,EAEtB,IAAI,GAAc,KAAK,QAAQ,EAAQ,GACnC,EAAW,KAAK,UAAU,SAAS,GACnC,EAAa,GAAI,GAAE,OAAO,EAAY,SAAS,GAAW,EAAY,IAAI,IAC1E,EAAS,KAAK,iBAAiB,EAAY,EAAQ,EAEvD,OAAO,MAAK,UAAU,EAAY,IAAI,GAAS,IAIhD,aAAc,SAAU,EAAQ,GAC/B,IAAK,EAAU,MAAO,EAEtB,IAAI,GAAa,KAAK,iBAClB,EAAY,GAAI,GAAE,OAAO,EAAW,IAAI,IAAI,GAAS,EAAW,IAAI,IAAI,GAE5E,OAAO,GAAO,IAAI,KAAK,iBAAiB,EAAW,KAIpD,iBAAkB,SAAU,EAAU,EAAW,GAChD,GAAI,GAAW,KAAK,QAAQ,EAAU,eAAgB,GAAM,SAAS,EAAS,KAC1E,EAAW,KAAK,QAAQ,EAAU,eAAgB,GAAM,SAAS,EAAS,KAE1E,EAAK,KAAK,SAAS,EAAS,GAAI,EAAS,GACzC,EAAK,KAAK,SAAS,EAAS,GAAI,EAAS,EAE7C,OAAO,IAAI,GAAE,MAAM,EAAI,IAGxB,SAAU,SAAU,EAAM,GACzB,MAAO,GAAO,EAAQ,EACrB,KAAK,MAAM,EAAO,GAAS,EAC3B,KAAK,IAAI,EAAG,KAAK,KAAK,IAAS,KAAK,IAAI,EAAG,KAAK,MAAM,KAGxD,WAAY,SAAU,GACrB,GAAI,GAAM,KAAK,aACX,EAAM,KAAK,YAEf,OAAO,MAAK,IAAI,EAAK,KAAK,IAAI,EAAK,OAIrC,EAAE,IAAM,SAAU,EAAI,GACrB,MAAO,IAAI,GAAE,IAAI,EAAI,IAStB,EAAE,WAAW,UACZ,aAAc,cAEd,QAAS,kBACT,QAAS,QAET,QAAS,SAAU,GAClB,GAAI,GAAI,EAAE,OAAO,WACb,EAAM,KAAK,aACX,EAAM,KAAK,IAAI,KAAK,IAAI,EAAK,EAAO,MAAO,GAC3C,EAAI,KAAK,QACT,EAAK,KAAK,QACV,EAAI,EAAO,IAAM,EAAI,EACrB,EAAI,EAAM,EACV,EAAM,EAAK,EACX,EAAS,KAAK,KAAK,EAAM,EAAM,GAC/B,EAAM,EAAS,KAAK,IAAI,EAE5B,GAAM,KAAK,KAAK,EAAI,IAAQ,EAAI,GAAe,GAAT,EAEtC,IAAI,GAAK,KAAK,IAAI,IAAkB,GAAV,KAAK,GAAY,IAAM,CAGjD,OAFA,IAAK,EAAI,KAAK,IAAI,GAEX,GAAI,GAAE,MAAM,EAAG,IAGvB,UAAW,SAAU,GAepB,IAdA,GAYI,GAZA,EAAI,EAAE,OAAO,WACb,EAAI,KAAK,QACT,EAAK,KAAK,QACV,EAAM,EAAM,EAAI,EAAI,EACpB,EAAM,EAAK,EACX,EAAS,KAAK,KAAK,EAAK,EAAM,GAC9B,EAAK,KAAK,KAAM,EAAM,EAAI,GAC1B,EAAO,KAAK,GAAK,EAAK,EAAI,KAAK,KAAK,GACpC,EAAU,GACV,EAAM,KACN,EAAI,EACJ,EAAO,GAGH,KAAK,IAAI,GAAQ,KAAW,EAAI,GACvC,EAAM,EAAS,KAAK,IAAI,GACxB,EAAQ,KAAK,GAAK,EAAK,EAAI,KAAK,KAAK,EACzB,KAAK,KAAK,EAAM,IAAQ,EAAM,GAAM,GAAM,IAAW,EACjE,GAAO,CAGR,OAAO,IAAI,GAAE,OAAO,EAAM,EAAG,KAM/B,EAAE,IAAI,SAAW,EAAE,UAAW,EAAE,KAC/B,KAAM,YAEN,WAAY,EAAE,WAAW;ANz0E1B,AM20EC,SN30ED,AAAS,MM20ES,WAChB,GAAI,GAAI,EAAE,WAAW,SACjB,EAAI,EAAE,QACN,EAAQ,IAAO,KAAK,GAAK,EAE7B,OAAO,IAAI,GAAE,eAAe,EAAO,IAAM,EAAO,SASlD,EAAE,UAAY,EAAE,MAAM,QACrB,SAAU,EAAE,MAAM,OAElB,SACC,QAAS,EACT,QAAS,GACT,SAAU,IACV,WAAY,MACZ,aAAc,GACd,YAAa,GACb,WAAY,EACZ,QAAS,EAYT,qBAAsB,EAAE,QAAQ,OAChC,eAAgB,EAAE,QAAQ,QAG3B,WAAY,SAAU,EAAK,GAC1B,EAAU,EAAE,WAAW,KAAM,GAGzB,EAAQ,cAAgB,EAAE,QAAQ,QAAU,EAAQ,QAAU,IAEjE,EAAQ,SAAW,KAAK,MAAM,EAAQ,SAAW,GACjD,EAAQ,aAEJ,EAAQ,QAAU,GACrB,EAAQ,UAET,KAAK,QAAQ,WAGV,EAAQ,SACX,EAAQ,OAAS,EAAE,aAAa,EAAQ,SAGzC,KAAK,KAAO,CAEZ,IAAI,GAAa,KAAK,QAAQ,UAEJ,iBAAf,KACV,KAAK,QAAQ,WAAa,EAAW,MAAM,MAI7C,MAAO,SAAU,GAChB,KAAK,KAAO,EACZ,KAAK,UAAY,EAAI,cAGrB,KAAK,iBAGL,EAAI,IACH,UAAa,KAAK,OAClB,QAAW,KAAK,SACd,MAEC,KAAK,WACR,EAAI,IACH,SAAY,KAAK,aACjB,QAAW,KAAK,cACd,MAGC,KAAK,QAAQ,iBACjB,KAAK,eAAiB,EAAE,KAAK,oBAAoB,KAAK,QAAS,IAAK,MACpE,EAAI,GAAG,OAAQ,KAAK,eAAgB,OAGrC,KAAK,SACL,KAAK,WAGN,MAAO,SAAU,GAEhB,MADA,GAAI,SAAS,MACN,MAGR,SAAU,SAAU,GACnB,KAAK,WAAW,WAAW,YAAY,KAAK,YAE5C,EAAI,KACH,UAAa,KAAK,OAClB,QAAW,KAAK,SACd,MAEC,KAAK,WACR,EAAI,KACH,SAAY,KAAK,aACjB,QAAW,KAAK,cACd,MAGC,KAAK,QAAQ,gBACjB,EAAI,IAAI,OAAQ,KAAK,eAAgB,MAGtC,KAAK,WAAa,KAClB,KAAK,KAAO,MAGb,aAAc,WACb,GAAI,GAAO,KAAK,KAAK,OAAO,QAO5B,OALI,MAAK,aACR,EAAK,YAAY,KAAK,YACtB,KAAK,eAAe,EAAM,KAAK,MAGzB,MAGR,YAAa,WACZ,GAAI,GAAO,KAAK,KAAK,OAAO,QAO5B,OALI,MAAK,aACR,EAAK,aAAa,KAAK,WAAY,EAAK,YACxC,KAAK,eAAe,EAAM,KAAK,MAGzB,MAGR,eAAgB,WACf,MAAO,MAAK,QAAQ,aAGrB,aAAc,WACb,MAAO,MAAK,YAGb,WAAY,SAAU,GAOrB,MANA,MAAK,QAAQ,QAAU,EAEnB,KAAK,MACR,KAAK,iBAGC,MAGR,UAAW,SAAU,GAIpB,MAHA,MAAK,QAAQ,OAAS,EACtB,KAAK,gBAEE,MAGR,OAAQ,SAAU,EAAK,GAOtB,MANA,MAAK,KAAO,EAEP,GACJ,KAAK,SAGC,MAGR,OAAQ,WAKP,MAJI,MAAK,OACR,KAAK,QAAQ,MAAM,IACnB,KAAK,WAEC,MAGR,cAAe,WACV,KAAK,YAAc,KAAK,QAAQ,SAAW,IAC9C,KAAK,WAAW,MAAM,OAAS,KAAK,QAAQ,SAI9C,eAAgB,SAAU,EAAM,GAE/B,GAEI,GAAQ,EAAG,EAFX,EAAS,EAAK,SACd,GAAc,EAAQ,EAAA,IAAW,EAAA,GAGrC,KAAK,EAAI,EAAG,EAAM,EAAO,OAAY,EAAJ,EAAS,IAErC,EAAO,KAAO,KAAK,aACtB,EAAS,SAAS,EAAO,GAAG,MAAM,OAAQ,IAErC,MAAM,KACV,EAAa,EAAQ,EAAY,IAKpC,MAAK,QAAQ,OAAS,KAAK,WAAW,MAAM,QACnC,SAAS,GAAc,EAAa,GAAK,EAAQ,EAAG,KAG9D,eAAgB,WACf,GAAI,GACA,EAAQ,KAAK,MAEjB,IAAI,EAAE,QAAQ,MACb,IAAK,IAAK,GACT,EAAE,QAAQ,WAAW,EAAM,GAAI,KAAK,QAAQ,aAG7C,GAAE,QAAQ,WAAW,KAAK,WAAY,KAAK,QAAQ,UAIrD,eAAgB,WACf,GAAI,GAAW,KAAK,KAAK,OAAO,QAEhC,KAAK,KAAK,WAAY,CAKrB,GAJA,KAAK,WAAa,EAAE,QAAQ,OAAO,MAAO,iBAE1C,KAAK,gBAED,KAAK,UAAW,CACnB,GAAI,GAAY,wBAEhB,MAAK,UAAY,EAAE,QAAQ,OAAO,MAAO,EAAW,KAAK,YACzD,KAAK,eAAiB,EAAE,QAAQ,OAAO,MAAO,EAAW,KAAK,gBAG9D,MAAK,eAAiB,KAAK,UAG5B,GAAS,YAAY,KAAK,YAEtB,KAAK,QAAQ,QAAU,GAC1B,KAAK,mBAKR,OAAQ,SAAU,GACjB,IAAK,GAAI,KAAO,MAAK,OACpB,KAAK,KAAK,cAAe,KAAM,KAAK,OAAO,IAG5C,MAAK,UACL,KAAK,aAAe,EAEhB,KAAK,QAAQ,aAChB,KAAK,iBAGN,KAAK,eAAe,UAAY,GAE5B,KAAK,WAAa,GAAK,EAAE,MAC5B,KAAK,iBAGN,KAAK,kBAGN,aAAc,WACb,GAAI,GAAM,KAAK,KACX,EAAO,EAAI,UAAY,KAAK,QAAQ,WACpC,EAAQ,KAAK,QAAQ,cACrB,EAAW,KAAK,QAAQ,QAM5B,OAJI,IAAS,EAAO,IACnB,EAAW,KAAK,MAAM,EAAI,aAAa,GAAQ,EAAI,aAAa,GAAS,IAGnE,GAGR,QAAS,WAER,GAAK,KAAK,KAAV,CAEA,GAAI,GAAM,KAAK,KACX,EAAS,EAAI,iBACb,EAAO,EAAI,UACX,EAAW,KAAK,cAEpB,MAAI,EAAO,KAAK,QAAQ,SAAW,EAAO,KAAK,QAAQ,SAAvD,CAIA,GAAI,GAAa,EAAE,OACX,EAAO,IAAI,SAAS,GAAU,SAC9B,EAAO,IAAI,SAAS,GAAU,SAEtC,MAAK,uBAAuB,IAExB,KAAK,QAAQ,sBAAwB,KAAK,QAAQ,aACrD,KAAK,kBAAkB,MAIzB,uBAAwB,SAAU,GACjC,GAGI,GAAG,EAAG,EAHN,KACA,EAAS,EAAO,WAIpB,KAAK,EAAI,EAAO,IAAI,EAAG,GAAK,EAAO,IAAI,EAAG,IACzC,IAAK,EAAI,EAAO,IAAI,EAAG,GAAK,EAAO,IAAI,EAAG,IACzC,EAAQ,GAAI,GAAE,MAAM,EAAG,GAEnB,KAAK,oBAAoB,IAC5B,EAAM,KAAK,EAKd,IAAI,GAAc,EAAM,MAExB,IAAoB,IAAhB,EAAJ,CAGA,EAAM,KAAK,SAAU,EAAG,GACvB,MAAO,GAAE,WAAW,GAAU,EAAE,WAAW,IAG5C,IAAI,GAAW,EAAS,wBASxB,KANK,KAAK,cACT,KAAK,KAAK,WAGX,KAAK,cAAgB,EAEhB,EAAI,EAAO,EAAJ,EAAiB,IAC5B,KAAK,SAAS,EAAM,GAAI,EAGzB,MAAK,eAAe,YAAY,KAGjC,oBAAqB,SAAU,GAC9B,GAAK,EAAU,EAAI,IAAM,EAAU,IAAM,MAAK,OAC7C,OAAO,CAGR,IAAI,GAAU,KAAK,OAEnB,KAAK,EAAQ,gBAAiB,CAC7B,GAAI,GAAQ,KAAK,iBAGjB,IAAK,EAAQ,SAAW,EAAU,EAAI,GAAK,EAAU,GAAK,EAAM,IAC/D,EAAU,EAAI,GAAK,EAAU,GAAK,EAAM,EAAK,OAAO,EAGtD,GAAI,EAAQ,OAAQ,CACnB,GAAI,GAAW,KAAK,eAChB,EAAU,EAAU,WAAW,GAC/B,EAAU,EAAQ,KAAK,EAAU,IACjC,EAAK,KAAK,KAAK,UAAU,GACzB,EAAK,KAAK,KAAK,UAAU,EAS7B,IALK,EAAQ,iBAAoB,EAAQ,SACxC,EAAK,EAAG,OACR,EAAK,EAAG,SAGJ,EAAQ,OAAO,YAAY,EAAI,IAAQ,OAAO,EAGpD,OAAO,GAGR,kBAAmB,SAAU,GAC5B,GAAI,GAAM,EAAG,EAAG,CAEhB,KAAK,IAAO,MAAK,OAChB,EAAO,EAAI,MAAM,KACjB,EAAI,SAAS,EAAK,GAAI,IACtB,EAAI,SAAS,EAAK,GAAI,KAGlB,EAAI,EAAO,IAAI,GAAK,EAAI,EAAO,IAAI,GAAK,EAAI,EAAO,IAAI,GAAK,EAAI,EAAO,IAAI,IAC9E,KAAK,YAAY,IAKpB,YAAa,SAAU,GACtB,GAAI,GAAO,KAAK,OAAO,EAEvB,MAAK,KAAK,cAAe,KAAM,EAAM,IAAK,EAAK,MAE3C,KAAK,QAAQ,YAChB,EAAE,QAAQ,YAAY,EAAM,uBAC5B,KAAK,aAAa,KAAK,IAEb,EAAK,aAAe,KAAK,gBACnC,KAAK,eAAe,YAAY,GAI5B,EAAE,QAAQ,UACd,EAAK,OAAS,KACd,EAAK,IAAM,EAAE,KAAK,qBAGZ,MAAK,OAAO,IAGpB,SAAU,SAAU,EAAW,GAC9B,GAAI,GAAU,KAAK,YAAY,GAG3B,EAAO,KAAK,UAOhB,GAAE,QAAQ,YAAY,EAAM,EAAS,EAAE,QAAQ,QAE/C,KAAK,OAAO,EAAU,EAAI,IAAM,EAAU,GAAK,EAE/C,KAAK,UAAU,EAAM,GAEjB,EAAK,aAAe,KAAK,gBAC5B,EAAU,YAAY,IAIxB,eAAgB,WAEf,GAAI,GAAU,KAAK,QACf,EAAO,KAAK,KAAK,SAQrB,OANI,GAAQ,cACX,EAAO,EAAQ,QAAU,GAG1B,GAAQ,EAAQ,WAET,EAAQ,cAAgB,KAAK,IAAI,EAAM,EAAQ,eAAiB,GAGxE,YAAa,SAAU,GACtB,GAAI,GAAS,KAAK,KAAK,iBACnB,EAAW,KAAK,cAEpB,OAAO,GAAU,WAAW,GAAU,SAAS,IAKhD,WAAY,SAAU,GACrB,MAAO,GAAE,KAAK,SAAS,KAAK,KAAM,EAAE,QACnC,EAAG,KAAK,cAAc,GACtB,EAAG,EAAU,EACb,EAAG,EAAU,EACb,EAAG,EAAU,GACX,KAAK,WAGT,gBAAiB,WAChB,GAAI,GAAM,KAAK,KAAK,QAAQ,IACxB,EAAO,EAAI,QAAQ,KAAK,KAAK,UACjC,OAAO,GAAK,SAAS,KAAK,gBAAgB,UAG3C,iBAAkB,SAAU,GAE3B,GAAI,GAAQ,KAAK,iBAGZ,MAAK,QAAQ,iBAAoB,KAAK,QAAQ,SAClD,EAAU,GAAM,EAAU,EAAI,EAAM,EAAK,EAAM,GAAK,EAAM,GAGvD,KAAK,QAAQ,MAChB,EAAU,EAAI,EAAM,EAAI,EAAU,EAAI,GAGvC,EAAU,EAAI,KAAK,kBAGpB,cAAe,SAAU,GACxB,GAAI,GAAQ,KAAK,IAAI,EAAU,EAAI,EAAU,GAAK,KAAK,QAAQ,WAAW,MAC1E,OAAO,MAAK,QAAQ,WAAW,IAGhC,SAAU,WACT,GAAI,KAAK,QAAQ,YAAc,KAAK,aAAa,OAAS,EAAG,CAC5D,GAAI,GAAO,KAAK,aAAa,KAE7B,OADA,MAAK,WAAW,GACT,EAER,MAAO,MAAK,eAIb,WAAY,aAEZ,YAAa,WACZ,GAAI,GAAO,EAAE,QAAQ,OAAO,MAAO,eAcnC,OAbA,GAAK,MAAM,MAAQ,EAAK,MAAM,OAAS,KAAK,eAAiB,KAC7D,EAAK,WAAa,KAElB,EAAK,cAAgB,EAAK,YAAc,EAAE,KAAK,QAE3C,EAAE,QAAQ,OAAS,KAAK,QAAQ,UAAY,GAC/C,EAAE,QAAQ,WAAW,EAAM,KAAK,QAAQ,SAIrC,EAAE,QAAQ,iBACb,EAAK,MAAM,yBAA2B,UAEhC,GAGR,UAAW,SAAU,EAAM,GAC1B,EAAK,OAAU,KACf,EAAK,OAAU,KAAK,YACpB,EAAK,QAAU,KAAK,aAEpB,KAAK,iBAAiB,GACtB,EAAK,IAAU,KAAK,WAAW,GAE/B,KAAK,KAAK,iBACT,KAAM,EACN,IAAK,EAAK,OAIZ,YAAa,WACZ,KAAK,eAED,KAAK,WACR,EAAE,QAAQ,SAAS,KAAK,eAAgB,yBAGpC,KAAK,eACT,KAAK,KAAK,QAEN,KAAK,YAER,aAAa,KAAK,qBAClB,KAAK,oBAAsB,WAAW,EAAE,KAAK,KAAK,eAAgB,MAAO,QAK5E,YAAa,WACZ,GAAI,GAAQ,KAAK,MAGb,MAAK,MAAQ,EAAE,KAAK,gBACvB,EAAE,QAAQ,SAAS,KAAM,uBAEzB,EAAM,KAAK,YACV,KAAM,KACN,IAAK,KAAK,OAIZ,EAAM,eAGP,aAAc,WACb,GAAI,GAAQ,KAAK,MAEjB,GAAM,KAAK,aACV,KAAM,KACN,IAAK,KAAK,KAGX,IAAI,GAAS,EAAM,QAAQ,YACvB,KACH,KAAK,IAAM,GAGZ,EAAM,iBAIR,EAAE,UAAY,SAAU,EAAK,GAC5B,MAAO,IAAI,GAAE,UAAU,EAAK,IAQ7B,EAAE,UAAU,IAAM,EAAE,UAAU,QAE7B,kBACC,QAAS,MACT,QAAS,SACT,QAAS,QACT,OAAQ,GACR,OAAQ,GACR,OAAQ,aACR,aAAa,GAGd,WAAY,SAAU,EAAK,GAE1B,KAAK,KAAO,CAEZ,IAAI,GAAY,EAAE,UAAW,KAAK,kBAC9B,EAAW,EAAQ,UAAY,KAAK,QAAQ,QAE5C,GAAQ,cAAgB,EAAE,QAAQ,OACrC,EAAU,MAAQ,EAAU,OAAoB,EAAX,EAErC,EAAU,MAAQ,EAAU,OAAS,CAGtC,KAAK,GAAI,KAAK,GAER,KAAK,QAAQ,eAAe,IAAY,QAAN,IACtC,EAAU,GAAK,EAAQ,GAIzB,MAAK,UAAY,EAEjB,EAAE,WAAW,KAAM,IAGpB,MAAO,SAAU,GAEhB,KAAK,KAAO,KAAK,QAAQ,KAAO,EAAI,QAAQ,IAE5C,KAAK,YAAc,WAAW,KAAK,UAAU,QAE7C,IAAI,GAAgB,KAAK,aAAe,IAAM,MAAQ,KACtD,MAAK,UAAU,GAAiB,KAAK,KAAK,KAE1C,EAAE,UAAU,UAAU,MAAM,KAAK,KAAM,IAGxC,WAAY,SAAU,GAErB,GAAI,GAAM,KAAK,KACX,EAAW,KAAK,QAAQ,SAExB,EAAU,EAAU,WAAW,GAC/B,EAAU,EAAQ,KAAK,EAAU,IAEjC,EAAK,KAAK,KAAK,QAAQ,EAAI,UAAU,EAAS,EAAU,IACxD,EAAK,KAAK,KAAK,QAAQ,EAAI,UAAU,EAAS,EAAU,IACxD,EAAO,KAAK,aAAe,KAAO,KAAK,OAAS,EAAE,IAAI,UACjD,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAG,KAAK,MAC7B,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAG,KAAK,KAElC,EAAM,EAAE,KAAK,SAAS,KAAK,MAAO,EAAG,KAAK,cAAc,IAE5D,OAAO,GAAM,EAAE,KAAK,eAAe,KAAK,UAAW,GAAK,GAAQ,SAAW,GAG5E,UAAW,SAAU,EAAQ,GAQ5B,MANA,GAAE,OAAO,KAAK,UAAW,GAEpB,GACJ,KAAK,SAGC,QAIT,EAAE,UAAU,IAAM,SAAU,EAAK,GAChC,MAAO,IAAI,GAAE,UAAU,IAAI,EAAK,IASjC,EAAE,UAAU,OAAS,EAAE,UAAU,QAChC,SACC,OAAO,GAGR,WAAY,SAAU,GACrB,EAAE,WAAW,KAAM,IAGpB,OAAQ,WACH,KAAK,OACR,KAAK,QAAQ,MAAM,IACnB,KAAK,UAGN,KAAK,GAAI,KAAK,MAAK,OAClB,KAAK,YAAY,KAAK,OAAO,GAE9B,OAAO,OAGR,YAAa,SAAU,GACtB,KAAK,SAAS,EAAM,EAAK,WAAY,KAAK,KAAK,QAGhD,YAAa,WACZ,GAAI,GAAO,EAAE,QAAQ,OAAO,SAAU,eAGtC,OAFA,GAAK,MAAQ,EAAK,OAAS,KAAK,QAAQ,SACxC,EAAK,cAAgB,EAAK,YAAc,EAAE,KAAK,QACxC,GAGR,UAAW,SAAU,EAAM,GAC1B,EAAK,OAAS,KACd,EAAK,WAAa,EAElB,KAAK,YAAY,GAEZ,KAAK,QAAQ,OACjB,KAAK,UAAU,IAIjB,SAAU,aAIV,UAAW,SAAU,GACpB,KAAK,YAAY,KAAK,MAKxB,EAAE,UAAU,OAAS,SAAU,GAC9B,MAAO,IAAI,GAAE,UAAU,OAAO,IAQ/B,EAAE,aAAe,EAAE,MAAM,QACxB,SAAU,EAAE,MAAM,OAElB,SACC,QAAS,GAGV,WAAY,SAAU,EAAK,EAAQ,GAClC,KAAK,KAAO,EACZ,KAAK,QAAU,EAAE,aAAa,GAE9B,EAAE,WAAW,KAAM,IAGpB,MAAO,SAAU,GAChB,KAAK,KAAO,EAEP,KAAK,QACT,KAAK,aAGN,EAAI,OAAO,YAAY,YAAY,KAAK,QAExC,EAAI,GAAG,YAAa,KAAK,OAAQ,MAE7B,EAAI,QAAQ,eAAiB,EAAE,QAAQ,OAC1C,EAAI,GAAG,WAAY,KAAK,aAAc,MAGvC,KAAK,UAGN,SAAU,SAAU,GACnB,EAAI,WAAW,YAAY,YAAY,KAAK,QAE5C,EAAI,IAAI,YAAa,KAAK,OAAQ,MAE9B,EAAI,QAAQ,eACf,EAAI,IAAI,WAAY,KAAK,aAAc,OAIzC,MAAO,SAAU,GAEhB,MADA,GAAI,SAAS,MACN,MAGR,WAAY,SAAU,GAGrB,MAFA,MAAK,QAAQ,QAAU,EACvB,KAAK,iBACE,MAIR,aAAc,WAIb,MAHI,MAAK,QACR,KAAK,KAAK,OAAO,YAAY,YAAY,KAAK,QAExC,MAGR,YAAa,WACZ,GAAI,GAAO,KAAK,KAAK,OAAO,WAI5B,OAHI,MAAK,QACR,EAAK,aAAa,KAAK,OAAQ,EAAK,YAE9B,MAGR,OAAQ,SAAU,GACjB,KAAK,KAAO,EACZ,KAAK,OAAO,IAAM,KAAK,MAGxB,eAAgB,WACf,MAAO,MAAK,QAAQ,aAGrB,WAAY,WACX,KAAK,OAAS,EAAE,QAAQ,OAAO,MAAO,uBAElC,KAAK,KAAK,QAAQ,eAAiB,EAAE,QAAQ,MAChD,EAAE,QAAQ,SAAS,KAAK,OAAQ,yBAEhC,EAAE,QAAQ,SAAS,KAAK,OAAQ,qBAGjC,KAAK,iBAGL,EAAE,OAAO,KAAK,QACb,WAAY,KACZ,cAAe,EAAE,KAAK,QACtB,YAAa,EAAE,KAAK,QACpB,OAAQ,EAAE,KAAK,KAAK,aAAc,MAClC,IAAK,KAAK,QAIZ,aAAc,SAAU,GACvB,GAAI,GAAM,KAAK,KACX,EAAQ,KAAK,OACb,EAAQ,EAAI,aAAa,EAAE,MAC3B,EAAK,KAAK,QAAQ,eAClB,EAAK,KAAK,QAAQ,eAElB,EAAU,EAAI,uBAAuB,EAAI,EAAE,KAAM,EAAE,QACnD,EAAO,EAAI,uBAAuB,EAAI,EAAE,KAAM,EAAE,QAAQ,UAAU,GAClE,EAAS,EAAQ,KAAK,EAAK,YAAY,IAAW,EAAI,EAAI,IAE9D,GAAM,MAAM,EAAE,QAAQ,WACd,EAAE,QAAQ,mBAAmB,GAAU,UAAY,EAAQ,MAGpE,OAAQ,WACP,GAAI,GAAU,KAAK,OACf,EAAU,KAAK,KAAK,mBAAmB,KAAK,QAAQ,gBACpD,EAAO,KAAK,KAAK,mBAAmB,KAAK,QAAQ,gBAAgB,UAAU,EAE/E,GAAE,QAAQ,YAAY,EAAO,GAE7B,EAAM,MAAM,MAAS,EAAK,EAAI,KAC9B,EAAM,MAAM,OAAS,EAAK,EAAI,MAG/B,aAAc,WACb,KAAK,KAAK,SAGX,eAAgB,WACf,EAAE,QAAQ,WAAW,KAAK,OAAQ,KAAK,QAAQ,YAIjD,EAAE,aAAe,SAAU,EAAK,EAAQ,GACvC,MAAO,IAAI,GAAE,aAAa,EAAK,EAAQ,IAQxC,EAAE,KAAO,EAAE,MAAM,QAChB,SAYC,UAAW,IAGZ,WAAY,SAAU,GACrB,EAAE,WAAW,KAAM,IAGpB,WAAY,SAAU,GACrB,MAAO,MAAK,YAAY,OAAQ,IAGjC,aAAc,SAAU,GACvB,MAAO,MAAK,YAAY,SAAU,IAGnC,YAAa,SAAU,EAAM,GAC5B,GAAI,GAAM,KAAK,YAAY,EAE3B,KAAK,EAAK,CACT,GAAa,SAAT,EACH,KAAM,IAAI,OAAM,kDAEjB,OAAO,MAGR,GAAI,EAQJ,OAJC,GAHI,GAA+B,QAApB,EAAQ,QAGjB,KAAK,WAAW,EAAK,GAFrB,KAAK,WAAW,GAIvB,KAAK,eAAe,EAAK,GAElB,GAGR,eAAgB,SAAU,EAAK,GAC9B,GAEI,GAFA,EAAU,KAAK,QACf,EAAO,EAAE,MAAM,EAAQ,EAAO,QAIjC,GADY,WAAT,EACM,EAAE,MAAM,EAAQ,cAAgB,EAAQ,YAExC,EAAE,MAAM,EAAQ,aAGrB,GAAU,IACd,EAAS,EAAK,SAAS,GAAG,IAG3B,EAAI,UAAY,kBAAoB,EAAO,IAAM,EAAQ,UAErD,IACH,EAAI,MAAM,YAAe,EAAO,EAAK,KACrC,EAAI,MAAM,WAAe,EAAO,EAAK,MAGlC,IACH,EAAI,MAAM,MAAS,EAAK,EAAI,KAC5B,EAAI,MAAM,OAAS,EAAK,EAAI,OAI9B,WAAY,SAAU,EAAK,GAG1B,MAFA,GAAK,GAAM,EAAS,cAAc,OAClC,EAAG,IAAM,EACF,GAGR,YAAa,SAAU,GACtB,MAAI,GAAE,QAAQ,QAAU,KAAK,QAAQ,EAAO,aACpC,KAAK,QAAQ,EAAO,aAErB,KAAK,QAAQ,EAAO,UAI7B,EAAE,KAAO,SAAU,GAClB,MAAO,IAAI,GAAE,KAAK,IAQnB,EAAE,KAAK,QAAU,EAAE,KAAK,QAEvB,SACC,UAAW,GAAI,IACf,YAAa,GAAI,IACjB,aAAc,EAAG,KAEjB,YAAa,GAAI,KAGlB,YAAa,SAAU,GACtB,GAAI,GAAM,EAAO,KAEjB,IAAI,KAAK,QAAQ,GAChB,MAAO,MAAK,QAAQ,EAGjB,GAAE,QAAQ,QAAmB,SAAT,IACvB,GAAQ,MAGT,IAAI,GAAO,EAAE,KAAK,QAAQ,SAE1B,KAAK,EACJ,KAAM,IAAI,OAAM,iEAGjB,OAAO,GAAO,WAAa,EAAO,UAIpC,EAAE,KAAK,QAAQ,UAAa,WAC3B,GAGI,GAAG,EAAK,EAAK,EAAS,EAHtB,EAAU,EAAS,qBAAqB,UACxC,EAAY,yCAIhB,KAAK,EAAI,EAAG,EAAM,EAAQ,OAAY,EAAJ,EAAS,IAI1C,GAHA,EAAM,EAAQ,GAAG,IACjB,EAAU,EAAI,MAAM,GAInB,MADA,GAAO,EAAI,MAAM,GAAW,IACpB,EAAO,EAAO,IAAM,IAAM,YAUrC,EAAE,OAAS,EAAE,MAAM,QAElB,SAAU,EAAE,MAAM,OAElB,SACC,KAAM,GAAI,GAAE,KAAK,QACjB,MAAO,GACP,IAAK,GACL,WAAW,EACX,WAAW,EACX,UAAU,EACV,aAAc,EACd,QAAS,EACT,aAAa,EACb,WAAY,KAGb,WAAY,SAAU,EAAQ,GAC7B,EAAE,WAAW,KAAM,GACnB,KAAK,QAAU,EAAE,OAAO,IAGzB,MAAO,SAAU,GAChB,KAAK,KAAO,EAEZ,EAAI,GAAG,YAAa,KAAK,OAAQ,MAEjC,KAAK,YACL,KAAK,SACL,KAAK,KAAK,OAEN,EAAI,QAAQ,eAAiB,EAAI,QAAQ,qBAC5C,EAAI,GAAG,WAAY,KAAK,aAAc,OAIxC,MAAO,SAAU,GAEhB,MADA,GAAI,SAAS,MACN,MAGR,SAAU,SAAU,GACf,KAAK,UACR,KAAK,SAAS,UAGf,KAAK,cACL,KAAK,gBAEL,KAAK,KAAK,UAEV,EAAI,KACH,UAAa,KAAK,OAClB,SAAY,KAAK,cACf,MAEH,KAAK,KAAO,MAGb,UAAW,WACV,MAAO,MAAK,SAGb,UAAW,SAAU,GAKpB,MAJA,MAAK,QAAU,EAAE,OAAO,GAExB,KAAK,SAEE,KAAK,KAAK,QAAU,OAAQ,KAAK,WAGzC,gBAAiB,SAAU,GAI1B,MAHA,MAAK,QAAQ,aAAe,EAC5B,KAAK,SAEE,MAGR,QAAS,SAAU,GAalB,MAXA,MAAK,QAAQ,KAAO,EAEhB,KAAK,OACR,KAAK,YACL,KAAK,UAGF,KAAK,QACR,KAAK,UAAU,KAAK,QAGd,MAGR,OAAQ,WAIP,MAHI,MAAK,OACR,KAAK,QAAQ,KAAK,KAAK,mBAAmB,KAAK,SAAS,SAElD,MAGR,UAAW,WACV,GAAI,GAAU,KAAK,QACf,EAAM,KAAK,KACX,EAAa,EAAI,QAAQ,eAAiB,EAAI,QAAQ,oBACtD,EAAa,EAAY,wBAA0B,oBAEnD,EAAO,EAAQ,KAAK,WAAW,KAAK,OACvC,GAAU,CAGP,KAAS,KAAK,QACb,KAAK,OACR,KAAK,cAEN,GAAU,EAEN,EAAQ,QACX,EAAK,MAAQ,EAAQ,OAGlB,EAAQ,MACX,EAAK,IAAM,EAAQ,MAIrB,EAAE,QAAQ,SAAS,EAAM,GAErB,EAAQ,WACX,EAAK,SAAW,KAGjB,KAAK,MAAQ,EAEb,KAAK,mBAED,EAAQ,aACX,EAAE,SACA,GAAG,EAAM,YAAa,KAAK,cAAe,MAC1C,GAAG,EAAM,WAAY,KAAK,aAAc,KAG3C,IAAI,GAAY,EAAQ,KAAK,aAAa,KAAK,SAC9C,GAAY,CAET,KAAc,KAAK,UACtB,KAAK,gBACL,GAAY,GAGT,GACH,EAAE,QAAQ,SAAS,EAAW,GAE/B,KAAK,QAAU,EAGX,EAAQ,QAAU,GACrB,KAAK,gBAIN,IAAI,GAAQ,KAAK,KAAK,MAElB,IACH,EAAM,WAAW,YAAY,KAAK,OAG/B,GAAa,GAChB,EAAM,WAAW,YAAY,KAAK,UAIpC,YAAa,WACR,KAAK,QAAQ,aAChB,EAAE,SACG,IAAI,KAAK,MAAO,YAAa,KAAK,eAClC,IAAI,KAAK,MAAO,WAAY,KAAK,cAGvC,KAAK,KAAK,OAAO,WAAW,YAAY,KAAK,OAE7C,KAAK,MAAQ,MAGd,cAAe,WACV,KAAK,SACR,KAAK,KAAK,OAAO,WAAW,YAAY,KAAK,SAE9C,KAAK,QAAU,MAGhB,QAAS,SAAU,GAClB,EAAE,QAAQ,YAAY,KAAK,MAAO,GAE9B,KAAK,SACR,EAAE,QAAQ,YAAY,KAAK,QAAS,GAGrC,KAAK,QAAU,EAAI,EAAI,KAAK,QAAQ,aAEpC,KAAK,gBAGN,cAAe,SAAU,GACxB,KAAK,MAAM,MAAM,OAAS,KAAK,QAAU,GAG1C,aAAc,SAAU,GACvB,GAAI,GAAM,KAAK,KAAK,uBAAuB,KAAK,QAAS,EAAI,KAAM,EAAI,QAAQ,OAE/E,MAAK,QAAQ,IAGd,iBAAkB,WAEjB,GAAK,KAAK,QAAQ,UAAlB,CAIA,GAAI,GAAO,KAAK,MACZ,GAAU,WAAY,YAAa,YAAa,WAAY,cAEhE,GAAE,QAAQ,SAAS,EAAM,qBACzB,EAAE,SAAS,GAAG,EAAM,QAAS,KAAK,cAAe,MACjD,EAAE,SAAS,GAAG,EAAM,WAAY,KAAK,YAAa,KAElD,KAAK,GAAI,GAAI,EAAG,EAAI,EAAO,OAAQ,IAClC,EAAE,SAAS,GAAG,EAAM,EAAO,GAAI,KAAK,gBAAiB,KAGlD,GAAE,QAAQ,aACb,KAAK,SAAW,GAAI,GAAE,QAAQ,WAAW,MAErC,KAAK,QAAQ,WAChB,KAAK,SAAS,YAKjB,cAAe,SAAU,GACxB,GAAI,GAAa,KAAK,UAAY,KAAK,SAAS,SAE5C,KAAK,kBAAkB,EAAE,OAAS,IACrC,EAAE,SAAS,gBAAgB,GAGxB,IAEE,KAAK,UAAa,KAAK,SAAS,WAAa,KAAK,KAAK,WAAY,KAAK,KAAK,SAAS,UAE5F,KAAK,KAAK,EAAE,MACX,cAAe,EACf,OAAQ,KAAK,WAIf,YAAa,SAAU,GACJ,KAAd,EAAE,SACL,KAAK,KAAK,SACT,cAAe,EACf,OAAQ,KAAK,WAKhB,gBAAiB,SAAU,GAE1B,KAAK,KAAK,EAAE,MACX,cAAe,EACf,OAAQ,KAAK,UAKC,gBAAX,EAAE,MAA0B,KAAK,kBAAkB,EAAE,OACxD,EAAE,SAAS,eAAe,GAEZ,cAAX,EAAE,KACL,EAAE,SAAS,gBAAgB,GAE3B,EAAE,SAAS,eAAe,IAI5B,WAAY,SAAU,GAMrB,MALA,MAAK,QAAQ,QAAU,EACnB,KAAK,MACR,KAAK,iBAGC,MAGR,eAAgB,WACf,EAAE,QAAQ,WAAW,KAAK,MAAO,KAAK,QAAQ,SAC1C,KAAK,SACR,EAAE,QAAQ,WAAW,KAAK,QAAS,KAAK,QAAQ,UAIlD,cAAe,WACd,KAAK,cAAc,KAAK,QAAQ,aAGjC,aAAc,WACb,KAAK,cAAc,MAIrB,EAAE,OAAS,SAAU,EAAQ,GAC5B,MAAO,IAAI,GAAE,OAAO,EAAQ,IAS7B,EAAE,QAAU,EAAE,KAAK,QAClB,SACC,UAAW,GAAI,IAOf,UAAW,mBACX,MAAM,GAGP,WAAY,SAAU,GACrB,GAAI,GAAO,GAA+B,QAApB,EAAQ,QAAqB,EAAU,EAAS,cAAc,OAChF,EAAU,KAAK,OAcnB,OAZI,GAAQ,QAAS,EACpB,EAAI,UAAY,EAAQ,KAExB,EAAI,UAAY,GAGb,EAAQ,QACX,EAAI,MAAM,oBACA,EAAQ,MAAM,EAAK,OAAU,EAAQ,MAAM,EAAK,MAG3D,KAAK,eAAe,EAAK,QAClB,GAGR,aAAc,WACb,MAAO,SAIT,EAAE,QAAU,SAAU,GACrB,MAAO,IAAI,GAAE,QAAQ,IAQtB,EAAE,IAAI,cACL,mBAAmB,IAGpB,EAAE,MAAQ,EAAE,MAAM,QACjB,SAAU,EAAE,MAAM,OAElB,SACC,SAAU,GACV,SAAU,IAEV,SAAS,EACT,aAAa,EACb,QAAS,EAAG,GACZ,gBAAiB,EAAG,GAGpB,YAAY,EACZ,UAAW,GACX,eAAe,GAGhB,WAAY,SAAU,EAAS,GAC9B,EAAE,WAAW,KAAM,GAEnB,KAAK,QAAU,EACf,KAAK,UAAY,EAAE,QAAQ,OAAS,KAAK,QAAQ,cACjD,KAAK,SAAU,GAGhB,MAAO,SAAU,GAChB,KAAK,KAAO,EAEP,KAAK,YACT,KAAK,aAGN,IAAI,GAAW,EAAI,QAAQ,aAEvB,IACH,EAAE,QAAQ,WAAW,KAAK,WAAY,GAEvC,EAAI,OAAO,UAAU,YAAY,KAAK,YAEtC,EAAI,GAAG,KAAK,aAAc,MAE1B,KAAK,SAED,GACH,EAAE,QAAQ,WAAW,KAAK,WAAY,GAGvC,KAAK,KAAK,QAEV,EAAI,KAAK,aAAc,MAAO,OAE1B,KAAK,SACR,KAAK,QAAQ,KAAK,aAAc,MAAO,QAIzC,MAAO,SAAU,GAEhB,MADA,GAAI,SAAS,MACN,MAGR,OAAQ,SAAU,GAEjB,MADA,GAAI,UAAU,MACP,MAGR,SAAU,SAAU,GACnB,EAAI,OAAO,UAAU,YAAY,KAAK,YAEtC,EAAE,KAAK,QAAQ,KAAK,WAAW,aAE/B,EAAI,IAAI,KAAK,aAAc,MAEvB,EAAI,QAAQ,eACf,EAAE,QAAQ,WAAW,KAAK,WAAY,GAGvC,KAAK,KAAO,KAEZ,KAAK,KAAK,SAEV,EAAI,KAAK,cAAe,MAAO,OAE3B,KAAK,SACR,KAAK,QAAQ,KAAK,cAAe,MAAO,QAI1C,UAAW,WACV,MAAO,MAAK,SAGb,UAAW,SAAU,GAMpB,MALA,MAAK,QAAU,EAAE,OAAO,GACpB,KAAK,OACR,KAAK,kBACL,KAAK,cAEC,MAGR,WAAY,WACX,MAAO,MAAK,UAGb,WAAY,SAAU,GAGrB,MAFA,MAAK,SAAW,EAChB,KAAK,SACE,MAGR,OAAQ,WACF,KAAK,OAEV,KAAK,WAAW,MAAM,WAAa,SAEnC,KAAK,iBACL,KAAK,gBACL,KAAK,kBAEL,KAAK,WAAW,MAAM,WAAa,GAEnC,KAAK,eAGN,WAAY,WACX,GAAI,IACH,UAAW,KAAK,gBAajB,OAVI,MAAK,YACR,EAAO,SAAW,KAAK,iBAEpB,gBAAkB,MAAK,QAAU,KAAK,QAAQ,aAAe,KAAK,KAAK,QAAQ,qBAClF,EAAO,SAAW,KAAK,QAEpB,KAAK,QAAQ,aAChB,EAAO,QAAU,KAAK,YAGhB,GAGR,OAAQ,WACH,KAAK,MACR,KAAK,KAAK,WAAW,OAIvB,YAAa,WACZ,GAIC,GAJG,EAAS,gBACZ,EAAiB,EAAS,IAAM,KAAK,QAAQ,UAAY,kBAChD,KAAK,UAAY,WAAa,QACvC,EAAY,KAAK,WAAa,EAAE,QAAQ,OAAO,MAAO,EAGnD,MAAK,QAAQ,cAChB,EAAc,KAAK,aACX,EAAE,QAAQ,OAAO,IAAK,EAAS,gBAAiB,GACxD,EAAY,KAAO,SACnB,EAAY,UAAY,SACxB,EAAE,SAAS,wBAAwB,GAEnC,EAAE,SAAS,GAAG,EAAa,QAAS,KAAK,oBAAqB,MAG/D,IAAI,GAAU,KAAK,SACX,EAAE,QAAQ,OAAO,MAAO,EAAS,mBAAoB,EAC7D,GAAE,SAAS,wBAAwB,GAEnC,KAAK,aAAe,EAAE,QAAQ,OAAO,MAAO,EAAS,WAAY,GAEjE,EAAE,SAAS,yBAAyB,KAAK,cACzC,EAAE,SAAS,GAAG,EAAS,cAAe,EAAE,SAAS,iBAEjD,KAAK,cAAgB,EAAE,QAAQ,OAAO,MAAO,EAAS,iBAAkB,GACxE,KAAK,KAAO,EAAE,QAAQ,OAAO,MAAO,EAAS,OAAQ,KAAK,gBAG3D,eAAgB,WACf,GAAK,KAAK,SAAV,CAEA,GAA6B,gBAAlB,MAAK,SACf,KAAK,aAAa,UAAY,KAAK,aAC7B,CACN,KAAO,KAAK,aAAa,iBACxB,KAAK,aAAa,YAAY,KAAK,aAAa,WAEjD,MAAK,aAAa,YAAY,KAAK,UAEpC,KAAK,KAAK,mBAGX,cAAe,WACd,GAAI,GAAY,KAAK,aACjB,EAAQ,EAAU,KAEtB,GAAM,MAAQ,GACd,EAAM,WAAa,QAEnB,IAAI,GAAQ,EAAU,WACtB,GAAQ,KAAK,IAAI,EAAO,KAAK,QAAQ,UACrC,EAAQ,KAAK,IAAI,EAAO,KAAK,QAAQ,UAErC,EAAM,MAAS,EAAQ,EAAK,KAC5B,EAAM,WAAa,GAEnB,EAAM,OAAS,EAEf,IAAI,GAAS,EAAU,aACnB,EAAY,KAAK,QAAQ,UACzB,EAAgB,wBAEhB,IAAa,EAAS,GACzB,EAAM,OAAS,EAAY,KAC3B,EAAE,QAAQ,SAAS,EAAW,IAE9B,EAAE,QAAQ,YAAY,EAAW,GAGlC,KAAK,gBAAkB,KAAK,WAAW,aAGxC,gBAAiB,WAChB,GAAK,KAAK,KAAV,CAEA,GAAI,GAAM,KAAK,KAAK,mBAAmB,KAAK,SACxC,EAAW,KAAK,UAChB,EAAS,EAAE,MAAM,KAAK,QAAQ,OAE9B,IACH,EAAE,QAAQ,YAAY,KAAK,WAAY,GAGxC,KAAK,kBAAoB,EAAO,GAAK,EAAW,EAAI,EAAI,GACxD,KAAK,gBAAkB,KAAK,MAAM,KAAK,gBAAkB,GAAK,EAAO,GAAK,EAAW,EAAI,EAAI,GAG7F,KAAK,WAAW,MAAM,OAAS,KAAK,iBAAmB,KACvD,KAAK,WAAW,MAAM,KAAO,KAAK,eAAiB,OAGpD,eAAgB,SAAU,GACzB,GAAI,GAAM,KAAK,KAAK,uBAAuB,KAAK,QAAS,EAAI,KAAM,EAAI,OAEvE,GAAE,QAAQ,YAAY,KAAK,WAAY,IAGxC,WAAY,WACX,GAAK,KAAK,QAAQ,QAAlB,CAEA,GAAI,GAAM,KAAK,KACX,EAAkB,KAAK,WAAW,aAClC,EAAiB,KAAK,gBAEtB,EAAW,GAAI,GAAE,MAAM,KAAK,gBAAiB,EAAkB,KAAK,iBAEpE,MAAK,WACR,EAAS,KAAK,EAAE,QAAQ,YAAY,KAAK,YAG1C,IAAI,GAAe,EAAI,2BAA2B,GAC9C,EAAU,EAAE,MAAM,KAAK,QAAQ,gBAC/B,EAAY,EAAE,MAAM,KAAK,QAAQ,uBAAyB,GAC1D,EAAY,EAAE,MAAM,KAAK,QAAQ,2BAA6B,GAC9D,EAAO,EAAI,UACX,EAAK,EACL,EAAK,CAEL,GAAa,EAAI,EAAiB,EAAU,EAAI,EAAK,IACxD,EAAK,EAAa,EAAI,EAAiB,EAAK,EAAI,EAAU,GAEvD,EAAa,EAAI,EAAK,EAAU,EAAI,IACvC,EAAK,EAAa,EAAI,EAAU,GAE7B,EAAa,EAAI,EAAkB,EAAU,EAAI,EAAK,IACzD,EAAK,EAAa,EAAI,EAAkB,EAAK,EAAI,EAAU,GAExD,EAAa,EAAI,EAAK,EAAU,EAAI,IACvC,EAAK,EAAa,EAAI,EAAU,IAG7B,GAAM,IACT,EACK,KAAK,gBACL,OAAO,EAAI,MAIlB,oBAAqB,SAAU,GAC9B,KAAK,SACL,EAAE,SAAS,KAAK,MAIlB,EAAE,MAAQ,SAAU,EAAS,GAC5B,MAAO,IAAI,GAAE,MAAM,EAAS,IAI7B,EAAE,IAAI,SACL,UAAW,SAAU,EAAO,EAAQ,GAGnC,GAFA,KAAK,eAEC,YAAiB,GAAE,OAAQ,CAChC,GAAI,GAAU,CAEd,GAAQ,GAAI,GAAE,MAAM,GACf,UAAU,GACV,WAAW,GAKjB,MAHA,GAAM,SAAU,EAEhB,KAAK,OAAS,EACP,KAAK,SAAS,IAGtB,WAAY,SAAU,GASrB,MARK,IAAS,IAAU,KAAK,SAC5B,EAAQ,KAAK,OACb,KAAK,OAAS,MAEX,IACH,KAAK,YAAY,GACjB,EAAM,SAAU,GAEV,QAST,EAAE,OAAO,SACR,UAAW,WAMV,MALI,MAAK,QAAU,KAAK,OAAS,KAAK,KAAK,SAAS,KAAK,UACxD,KAAK,OAAO,UAAU,KAAK,SAC3B,KAAK,KAAK,UAAU,KAAK,SAGnB,MAGR,WAAY,WAIX,MAHI,MAAK,QACR,KAAK,OAAO,SAEN,MAGR,YAAa,WAQZ,MAPI,MAAK,SACJ,KAAK,OAAO,QACf,KAAK,aAEL,KAAK,aAGA,MAGR,UAAW,SAAU,EAAS,GAC7B,GAAI,GAAS,EAAE,MAAM,KAAK,QAAQ,KAAK,QAAQ,cAAgB,EAAG,GA2BlE,OAzBA,GAAS,EAAO,IAAI,EAAE,MAAM,UAAU,QAAQ,QAE1C,GAAW,EAAQ,SACtB,EAAS,EAAO,IAAI,EAAQ,SAG7B,EAAU,EAAE,QAAQ,OAAQ,GAAS,GAEhC,KAAK,sBACT,KACK,GAAG,QAAS,KAAK,YAAa,MAC9B,GAAG,SAAU,KAAK,WAAY,MAC9B,GAAG,OAAQ,KAAK,WAAY,MACjC,KAAK,qBAAsB,GAGxB,YAAmB,GAAE,OACxB,EAAE,WAAW,EAAS,GACtB,KAAK,OAAS,EACd,EAAQ,QAAU,MAElB,KAAK,OAAS,GAAI,GAAE,MAAM,EAAS,MACjC,WAAW,GAGP,MAGR,gBAAiB,SAAU,GAI1B,MAHI,MAAK,QACR,KAAK,OAAO,WAAW,GAEjB,MAGR,YAAa,WASZ,MARI,MAAK,SACR,KAAK,OAAS,KACd,KACK,IAAI,QAAS,KAAK,YAAa,MAC/B,IAAI,SAAU,KAAK,WAAY,MAC/B,IAAI,OAAQ,KAAK,WAAY,MAClC,KAAK,qBAAsB,GAErB,MAGR,SAAU,WACT,MAAO,MAAK,QAGb,WAAY,SAAU,GACrB,KAAK,OAAO,UAAU,EAAE,WAU1B,EAAE,WAAa,EAAE,MAAM,QACtB,WAAY,SAAU,GACrB,KAAK,UAEL,IAAI,GAAG,CAEP,IAAI,EACH,IAAK,EAAI,EAAG,EAAM,EAAO,OAAY,EAAJ,EAAS,IACzC,KAAK,SAAS,EAAO,KAKxB,SAAU,SAAU,GACnB,GAAI,GAAK,KAAK,WAAW,EAQzB,OANA,MAAK,QAAQ,GAAM,EAEf,KAAK,MACR,KAAK,KAAK,SAAS,GAGb,MAGR,YAAa,SAAU,GACtB,GAAI,GAAK,IAAS,MAAK,QAAU,EAAQ,KAAK,WAAW,EAQzD,OANI,MAAK,MAAQ,KAAK,QAAQ,IAC7B,KAAK,KAAK,YAAY,KAAK,QAAQ,UAG7B,MAAK,QAAQ,GAEb,MAGR,SAAU,SAAU,GACnB,MAAK,GAEG,IAAS,MAAK,SAAW,KAAK,WAAW,IAAU,MAAK,SAF3C,GAKtB,YAAa,WAEZ,MADA,MAAK,UAAU,KAAK,YAAa,MAC1B,MAGR,OAAQ,SAAU,GACjB,GACI,GAAG,EADH,EAAO,MAAM,UAAU,MAAM,KAAK,UAAW,EAGjD,KAAK,IAAK,MAAK,QACd,EAAQ,KAAK,QAAQ,GAEjB,EAAM,IACT,EAAM,GAAY,MAAM,EAAO,EAIjC,OAAO,OAGR,MAAO,SAAU,GAChB,KAAK,KAAO,EACZ,KAAK,UAAU,EAAI,SAAU,IAG9B,SAAU,SAAU,GACnB,KAAK,UAAU,EAAI,YAAa,GAChC,KAAK,KAAO,MAGb,MAAO,SAAU,GAEhB,MADA,GAAI,SAAS,MACN,MAGR,UAAW,SAAU,EAAQ,GAC5B,IAAK,GAAI,KAAK,MAAK,QAClB,EAAO,KAAK,EAAS,KAAK,QAAQ,GAEnC,OAAO,OAGR,SAAU,SAAU,GACnB,MAAO,MAAK,QAAQ,IAGrB,UAAW,WACV,GAAI,KAEJ,KAAK,GAAI,KAAK,MAAK,QAClB,EAAO,KAAK,KAAK,QAAQ,GAE1B,OAAO,IAGR,UAAW,SAAU,GACpB,MAAO,MAAK,OAAO,YAAa,IAGjC,WAAY,SAAU,GACrB,MAAO,GAAE,MAAM,MAIjB,EAAE,WAAa,SAAU,GACxB,MAAO,IAAI,GAAE,WAAW,IASzB,EAAE,aAAe,EAAE,WAAW,QAC7B,SAAU,EAAE,MAAM,OAElB,SACC,OAAQ,gFAGT,SAAU,SAAU,GACnB,MAAI,MAAK,SAAS,GACV,MAGJ,MAAQ,IACX,EAAM,GAAG,EAAE,aAAa,OAAQ,KAAK,gBAAiB,MAGvD,EAAE,WAAW,UAAU,SAAS,KAAK,KAAM,GAEvC,KAAK,eAAiB,EAAM,WAC/B,EAAM,UAAU,KAAK,cAAe,KAAK,eAGnC,KAAK,KAAK,YAAa,MAAO,MAGtC,YAAa,SAAU,GACtB,MAAK,MAAK,SAAS,IAGf,IAAS,MAAK,UACjB,EAAQ,KAAK,QAAQ,IAGlB,OAAS,IACZ,EAAM,IAAI,EAAE,aAAa,OAAQ,KAAK,gBAAiB,MAGxD,EAAE,WAAW,UAAU,YAAY,KAAK,KAAM,GAE1C,KAAK,eACR,KAAK,OAAO,eAGN,KAAK,KAAK,eAAgB,MAAO,KAhBhC,MAmBT,UAAW,SAAU,EAAS,GAG7B,MAFA,MAAK,cAAgB,EACrB,KAAK,cAAgB,EACd,KAAK,OAAO,YAAa,EAAS,IAG1C,UAAW,SAAU,GAEpB,IAAK,GAAI,KAAM,MAAK,QAAS,CAC5B,KAAK,QAAQ,GAAI,UAAU,EAC3B,OAED,MAAO,OAGR,SAAU,SAAU,GACnB,MAAO,MAAK,OAAO,WAAY,IAGhC,aAAc,WACb,MAAO,MAAK,OAAO,iBAGpB,YAAa,WACZ,MAAO,MAAK,OAAO,gBAGpB,UAAW,WACV,GAAI,GAAS,GAAI,GAAE,YAMnB,OAJA,MAAK,UAAU,SAAU,GACxB,EAAO,OAAO,YAAiB,GAAE,OAAS,EAAM,YAAc,EAAM,eAG9D,GAGR,gBAAiB,SAAU,GAC1B,EAAI,EAAE,QACL,MAAO,EAAE,OACT,OAAQ,MACN,GACH,KAAK,KAAK,EAAE,KAAM,MAIpB,EAAE,aAAe,SAAU,GAC1B,MAAO,IAAI,GAAE,aAAa,IAQ3B,EAAE,KAAO,EAAE,MAAM,QAChB,UAAW,EAAE,MAAM,QAEnB,SAIC,aAAc,WACb,GAAI,GAAM,EAAE,QAAQ,OAAS,KAAO,IAChC,GAAU,EAAM,KAAK,IAAI,EAAO,WAAY,EAAO,aAAe,GAAK,CAC3E,OAAO,MAAK,IAAI,EAAG,KAAK,IAAI,GAAK,QAInC,SACC,QAAQ,EACR,MAAO,UACP,UAAW,KACX,QAAS,KACT,SAAU,KACV,OAAQ,EACR,QAAS,GAET,MAAM,EACN,UAAW,KACX,YAAa,GAEb,WAAW,GAGZ,WAAY,SAAU,GACrB,EAAE,WAAW,KAAM,IAGpB,MAAO,SAAU,GAChB,KAAK,KAAO,EAEP,KAAK,aACT,KAAK,gBACL,KAAK,eAGN,KAAK,iBACL,KAAK,cAED,KAAK,YACR,KAAK,KAAK,UAAU,YAAY,KAAK,YAGtC,KAAK,KAAK,OAEV,EAAI,IACH,UAAa,KAAK,eAClB,QAAW,KAAK,aACd,OAGJ,MAAO,SAAU,GAEhB,MADA,GAAI,SAAS,MACN,MAGR,SAAU,SAAU,GACnB,EAAI,UAAU,YAAY,KAAK,YAG/B,KAAK,KAAK,UACV,KAAK,KAAO,KAER,EAAE,QAAQ,MACb,KAAK,WAAa,KAClB,KAAK,QAAU,KACf,KAAK,MAAQ,MAGd,EAAI,KACH,UAAa,KAAK,eAClB,QAAW,KAAK,aACd,OAGJ,eAAgB,aAIhB,SAAU,SAAU,GAOnB,MANA,GAAE,WAAW,KAAM,GAEf,KAAK,YACR,KAAK,eAGC,MAGR,OAAQ,WAKP,MAJI,MAAK,OACR,KAAK,iBACL,KAAK,eAEC,QAIT,EAAE,IAAI,SACL,oBAAqB,WACpB,GAAI,GAAI,EAAE,KAAK,aACX,EAAO,KAAK,UACZ,EAAU,EAAE,QAAQ,YAAY,KAAK,UACrC,EAAM,EAAQ,WAAW,IAAI,UAAU,EAAK,WAAW,GAAG,UAC1D,EAAM,EAAI,IAAI,EAAK,WAAW,EAAQ,EAAJ,GAAO,SAE7C,MAAK,cAAgB,GAAI,GAAE,OAAO,EAAK,MASzC,EAAE,KAAK,OAAS,6BAEhB,EAAE,QAAQ,OAAS,EAAS,kBAAmB,EAAS,gBAAgB,EAAE,KAAK,OAAQ,OAAO,eAE9F,EAAE,KAAO,EAAE,KAAK,QACf,SACC,IAAK,EAAE,QAAQ,KAGhB,aAAc,WACb,GAAI,GAAO,KAAK,KAAK,UACjB,EAAO,KAAK,UAKhB,OAHI,IAAQ,EAAK,YAAc,GAC9B,EAAK,YAAY,GAEX,MAGR,YAAa,WACZ,GAAI,GAAO,KAAK,KAAK,UACjB,EAAO,KAAK,WACZ,EAAQ,EAAK,UAKjB,OAHI,IAAQ,IAAU,GACrB,EAAK,aAAa,EAAM,GAElB,MAGR,cAAe,aAIf,eAAgB,SAAU,GACzB,MAAO,GAAS,gBAAgB,EAAE,KAAK,OAAQ,IAGhD,cAAe,WACd,KAAK,KAAK,gBACV,KAAK,YACL,KAAK,cAGN,UAAW,WACV,KAAK,WAAa,KAAK,eAAe,KAEtC,KAAK,MAAQ,KAAK,eAAe,QAE7B,KAAK,QAAQ,WAChB,EAAE,QAAQ,SAAS,KAAK,MAAO,KAAK,QAAQ,WAG7C,KAAK,WAAW,YAAY,KAAK,QAGlC,WAAY,WACP,KAAK,QAAQ,SAChB,KAAK,MAAM,aAAa,kBAAmB,SAC3C,KAAK,MAAM,aAAa,iBAAkB,UAEvC,KAAK,QAAQ,MAChB,KAAK,MAAM,aAAa,YAAa,WAElC,KAAK,QAAQ,eAChB,KAAK,MAAM,aAAa,iBAAkB,KAAK,QAAQ,eAEnD,KAAK,QAAQ,WAAc,KAAK,QAAQ,eAC5C,KAAK,MAAM,aAAa,iBAAkB,QAE3C,KAAK,gBAGN,aAAc,WACT,KAAK,QAAQ,QAChB,KAAK,MAAM,aAAa,SAAU,KAAK,QAAQ,OAC/C,KAAK,MAAM,aAAa,iBAAkB,KAAK,QAAQ,SACvD,KAAK,MAAM,aAAa,eAAgB,KAAK,QAAQ,QACjD,KAAK,QAAQ,UAChB,KAAK,MAAM,aAAa,mBAAoB,KAAK,QAAQ,WAEzD,KAAK,MAAM,gBAAgB,oBAExB,KAAK,QAAQ,SAChB,KAAK,MAAM,aAAa,iBAAkB,KAAK,QAAQ,SAEpD,KAAK,QAAQ,UAChB,KAAK,MAAM,aAAa,kBAAmB,KAAK,QAAQ,WAGzD,KAAK,MAAM,aAAa,SAAU,QAE/B,KAAK,QAAQ,MAChB,KAAK,MAAM,aAAa,OAAQ,KAAK,QAAQ,WAAa,KAAK,QAAQ,OACvE,KAAK,MAAM,aAAa,eAAgB,KAAK,QAAQ,cAErD,KAAK,MAAM,aAAa,OAAQ,SAIlC,YAAa,WACZ,GAAI,GAAM,KAAK,eACV,KAEJ,EAAM,QAEP,KAAK,MAAM,aAAa,IAAK,IAI9B,YAAa,WACZ,GAAI,KAAK,QAAQ,UAAW,EACvB,EAAE,QAAQ,MAAQ,EAAE,QAAQ,MAC/B,EAAE,QAAQ,SAAS,KAAK,MAAO,qBAGhC,EAAE,SAAS,GAAG,KAAK,WAAY,QAAS,KAAK,cAAe,KAI5D,KAAK,GAFD,IAAU,WAAY,YAAa,YACzB,WAAY,YAAa,eAC9B,EAAI,EAAG,EAAI,EAAO,OAAQ,IAClC,EAAE,SAAS,GAAG,KAAK,WAAY,EAAO,GAAI,KAAK,gBAAiB,QAKnE,cAAe,SAAU,GACpB,KAAK,KAAK,UAAY,KAAK,KAAK,SAAS,SAE7C,KAAK,gBAAgB,IAGtB,gBAAiB,SAAU,GAC1B,GAAK,KAAK,MAAS,KAAK,kBAAkB,EAAE,MAA5C,CAEA,GAAI,GAAM,KAAK,KACX,EAAiB,EAAI,2BAA2B,GAChD,EAAa,EAAI,2BAA2B,GAC5C,EAAS,EAAI,mBAAmB,EAEpC,MAAK,KAAK,EAAE,MACX,OAAQ,EACR,WAAY,EACZ,eAAgB,EAChB,cAAe,IAGD,gBAAX,EAAE,MACL,EAAE,SAAS,eAAe,GAEZ,cAAX,EAAE,MACL,EAAE,SAAS,gBAAgB,OAK9B,EAAE,IAAI,SACL,cAAe,WACT,KAAK,YACT,KAAK,UAAY,EAAE,KAAK,UAAU,eAAe,OACjD,KAAK,OAAO,YAAY,YAAY,KAAK,WAErC,KAAK,QAAQ,eAAiB,EAAE,QAAQ,OAC3C,EAAE,QAAQ,SAAS,KAAK,UAAW;AAEnC,IFxoJQ,CEwoJH,IACJ,KNjoJH,IMioJe,KAAK,iBACjB,QAAW,KAAK,gBAGjB,EAAE,QAAQ,SAAS,KAAK,UAAW,qBAGpC,KAAK,GAAG,UAAW,KAAK,oBACxB,KAAK,uBAIP,iBAAkB,SAAU,GAC3B,GAAI,GAAQ,KAAK,aAAa,EAAE,MAC5B,EAAS,KAAK,iBAAiB,EAAE,QAAQ,aAAa,GAAO,KAAK,KAAK,cAAc,IAEzF,MAAK,UAAU,MAAM,EAAE,QAAQ,WACvB,EAAE,QAAQ,mBAAmB,GAAU,UAAY,EAAQ,KAEnE,KAAK,cAAe,GAGrB,aAAc,WACb,KAAK,cAAe,GAGrB,mBAAoB,WAEnB,IAAI,KAAK,aAAT,CAOA,KAAK,qBAEL,IAAI,GAAK,KAAK,cACV,EAAM,EAAG,IACT,EAAM,EAAG,IACT,EAAQ,EAAI,EAAI,EAAI,EACpB,EAAS,EAAI,EAAI,EAAI,EACrB,EAAO,KAAK,UACZ,EAAO,KAAK,OAAO,WAGnB,GAAE,QAAQ,cACb,EAAK,YAAY,GAGlB,EAAE,QAAQ,YAAY,EAAM,GAC5B,EAAK,aAAa,QAAS,GAC3B,EAAK,aAAa,SAAU,GAC5B,EAAK,aAAa,WAAY,EAAI,EAAG,EAAI,EAAG,EAAO,GAAQ,KAAK,MAE5D,EAAE,QAAQ,cACb,EAAK,YAAY,OAUpB,EAAE,KAAK,SAEN,UAAW,SAAU,EAAS,GAmB7B,MAjBI,aAAmB,GAAE,MACxB,KAAK,OAAS,KAET,KAAK,QAAU,KACnB,KAAK,OAAS,GAAI,GAAE,MAAM,EAAS,OAEpC,KAAK,OAAO,WAAW,IAGnB,KAAK,sBACT,KACK,GAAG,QAAS,KAAK,WAAY,MAC7B,GAAG,SAAU,KAAK,WAAY,MAEnC,KAAK,qBAAsB,GAGrB,MAGR,YAAa,WASZ,MARI,MAAK,SACR,KAAK,OAAS,KACd,KACK,IAAI,QAAS,KAAK,YAClB,IAAI,SAAU,KAAK,YAExB,KAAK,qBAAsB,GAErB,MAGR,UAAW,SAAU,GAUpB,MARI,MAAK,SAER,EAAS,GAAU,KAAK,SACf,KAAK,SAAS,KAAK,MAAM,KAAK,SAAS,OAAS,IAEzD,KAAK,YAAY,OAAQ,KAGnB,MAGR,WAAY,WAIX,MAHI,MAAK,QACR,KAAK,OAAO,SAEN,MAGR,WAAY,SAAU,GACrB,KAAK,OAAO,UAAU,EAAE,QACxB,KAAK,KAAK,UAAU,KAAK,WAU3B,EAAE,QAAQ,KAAO,EAAE,QAAQ,KAAQ,WAClC,IACC,GAAI,GAAM,EAAS,cAAc,MACjC,GAAI,UAAY,oBAEhB,IAAI,GAAQ,EAAI,UAGhB,OAFA,GAAM,MAAM,SAAW,oBAEhB,GAA+B,gBAAd,GAAM,IAE7B,MAAO,GACR,OAAO,MAIT,EAAE,KAAO,EAAE,QAAQ,MAAQ,EAAE,QAAQ,IAAM,EAAE,KAAO,EAAE,KAAK,QAC1D,SACC,KAAK,EACL,aAAc,KAGf,eAAiB,WAChB,IAEC,MADA,GAAS,WAAW,IAAI,OAAQ,iCACzB,SAAU,GAChB,MAAO,GAAS,cAAc,SAAW,EAAO,mBAEhD,MAAO,GACR,MAAO,UAAU,GAChB,MAAO,GAAS,cACR,IAAM,EAAO,6DAKxB,UAAW,WACV,GAAI,GAAY,KAAK,WAAa,KAAK,eAAe,QAEtD,GAAE,QAAQ,SAAS,EAAW,qBAC5B,KAAK,QAAQ,UAAY,IAAM,KAAK,QAAQ,UAAY,KAEtD,KAAK,QAAQ,WAChB,EAAE,QAAQ,SAAS,EAAW,qBAG/B,EAAU,UAAY,MAEtB,KAAK,MAAQ,KAAK,eAAe,QACjC,EAAU,YAAY,KAAK,OAE3B,KAAK,KAAK,UAAU,YAAY,IAGjC,WAAY,WACX,KAAK,gBAGN,aAAc,WACb,GAAI,GAAS,KAAK,QACd,EAAO,KAAK,MACZ,EAAU,KAAK,QACf,EAAY,KAAK,UAErB,GAAU,QAAU,EAAQ,OAC5B,EAAU,OAAS,EAAQ,KAEvB,EAAQ,QACN,IACJ,EAAS,KAAK,QAAU,KAAK,eAAe,UAC5C,EAAO,OAAS,QAChB,EAAU,YAAY,IAEvB,EAAO,OAAS,EAAQ,OAAS,KACjC,EAAO,MAAQ,EAAQ,MACvB,EAAO,QAAU,EAAQ,QAErB,EAAQ,UACX,EAAO,UAAY,EAAE,KAAK,QAAQ,EAAQ,WACtC,EAAQ,UAAU,KAAK,KACvB,EAAQ,UAAU,QAAQ,WAAY,KAE1C,EAAO,UAAY,GAEhB,EAAQ,UACX,EAAO,OAAS,EAAQ,QAAQ,QAAQ,OAAQ,SAE7C,EAAQ,WACX,EAAO,UAAY,EAAQ,WAGlB,IACV,EAAU,YAAY,GACtB,KAAK,QAAU,MAGZ,EAAQ,MACN,IACJ,EAAO,KAAK,MAAQ,KAAK,eAAe,QACxC,EAAU,YAAY,IAEvB,EAAK,MAAQ,EAAQ,WAAa,EAAQ,MAC1C,EAAK,QAAU,EAAQ,aAEb,IACV,EAAU,YAAY,GACtB,KAAK,MAAQ,OAIf,YAAa,WACZ,GAAI,GAAQ,KAAK,WAAW,KAE5B,GAAM,QAAU,OAChB,KAAK,MAAM,EAAI,KAAK,gBAAkB,IACtC,EAAM,QAAU,MAIlB,EAAE,IAAI,QAAQ,EAAE,QAAQ,MAAQ,EAAE,QAAQ,QACzC,cAAe,WACd,IAAI,KAAK,UAAT,CAEA,GAAI,GAAO,KAAK,UAAY,EAAS,cAAc,MACnD,GAAK,UAAY,wBACjB,KAAK,OAAO,YAAY,YAAY,GAEpC,KAAK,GAAG,UAAW,KAAK,qBACxB,KAAK,0BASP,EAAE,QAAQ,OAAU,WACnB,QAAS,EAAS,cAAc,UAAU,cAG3C,EAAE,KAAQ,EAAE,KAAK,MAAQ,EAAO,kBAAqB,EAAE,QAAQ,OAAS,EAAE,KAAO,EAAE,KAAK,QACvF,SAEC,QAAQ,EACR,KAAK,GAGN,OAAQ,WAKP,MAJI,MAAK,OACR,KAAK,iBACL,KAAK,kBAEC,MAGR,SAAU,SAAU,GAOnB,MANA,GAAE,WAAW,KAAM,GAEf,KAAK,OACR,KAAK,eACL,KAAK,kBAEC,MAGR,SAAU,SAAU,GACnB,EACK,IAAI,YAAa,KAAK,eAAgB,MACtC,IAAI,UAAW,KAAK,YAAa,MAElC,KAAK,QAAQ,YAChB,KAAK,KAAK,IAAI,QAAS,KAAK,SAAU,MACtC,KAAK,KAAK,IAAI,YAAa,KAAK,aAAc,OAG/C,KAAK,iBAEL,KAAK,KAAK,UACV,KAAK,KAAO,MAGb,eAAgB,WACX,KAAK,OAAS,EAAE,KAAK,iBACxB,EAAE,KAAK,eAAiB,EAAE,KAAK,iBAAiB,KAAK,gBAAiB,KAAK,QAI7E,gBAAiB,WAChB,EAAE,KAAK,eAAiB,KACxB,KAAK,KAAK,YAGX,cAAe,WACd,KAAK,KAAK,gBACV,KAAK,KAAO,KAAK,KAAK,YAGvB,aAAc,WACb,GAAI,GAAU,KAAK,OAEf,GAAQ,SACX,KAAK,KAAK,UAAY,EAAQ,OAC9B,KAAK,KAAK,YAAc,EAAQ,OAE7B,EAAQ,OACX,KAAK,KAAK,UAAY,EAAQ,WAAa,EAAQ,OAGhD,EAAQ,UACX,KAAK,KAAK,QAAU,EAAQ,SAEzB,EAAQ,WACX,KAAK,KAAK,SAAW,EAAQ,WAI/B,UAAW,WACV,GAAI,GAAG,EAAG,EAAK,EAAM,EAAO,CAI5B,KAFA,KAAK,KAAK,YAEL,EAAI,EAAG,EAAM,KAAK,OAAO,OAAY,EAAJ,EAAS,IAAK,CACnD,IAAK,EAAI,EAAG,EAAO,KAAK,OAAO,GAAG,OAAY,EAAJ,EAAU,IACnD,EAAQ,KAAK,OAAO,GAAG,GACvB,GAAoB,IAAN,EAAU,OAAS,QAAU,KAE3C,KAAK,KAAK,GAAY,EAAM,EAAG,EAAM,EAGlC,gBAAgB,GAAE,SACrB,KAAK,KAAK,cAKb,cAAe,WACd,OAAQ,KAAK,OAAO,QAGrB,YAAa,WACZ,IAAI,KAAK,gBAAT,CAEA,GAAI,GAAM,KAAK,KACX,EAAU,KAAK,OAEnB,MAAK,YACL,EAAI,OACJ,KAAK,eAED,EAAQ,OACX,EAAI,YAAc,EAAQ,YAC1B,EAAI,KAAK,EAAQ,UAAY,YAG1B,EAAQ,SACX,EAAI,YAAc,EAAQ,QAC1B,EAAI,UAGL,EAAI,YAKL,YAAa,WACR,KAAK,QAAQ,YAChB,KAAK,KAAK,GAAG,YAAa,KAAK,aAAc,MAC7C,KAAK,KAAK,GAAG,6BAA8B,KAAK,gBAAiB,QAInE,gBAAiB,SAAU,GACtB,KAAK,eAAe,EAAE,aACzB,KAAK,KAAK,EAAE,KAAM,IAIpB,aAAc,SAAU,GAClB,KAAK,OAAQ,KAAK,KAAK,iBAGxB,KAAK,eAAe,EAAE,aACzB,KAAK,KAAK,OAAO,MAAM,OAAS,UAChC,KAAK,cAAe,EACpB,KAAK,KAAK,YAAa,IAEb,KAAK,eACf,KAAK,KAAK,OAAO,MAAM,OAAS,GAChC,KAAK,cAAe,EACpB,KAAK,KAAK,WAAY,QAKzB,EAAE,IAAI,QAAS,EAAE,KAAK,MAAQ,EAAO,kBAAqB,EAAE,QAAQ,WACnE,cAAe,WACd,GACI,GADA,EAAO,KAAK,SAGX,KACJ,EAAO,KAAK,UAAY,EAAS,cAAc,UAC/C,EAAK,MAAM,SAAW,WACtB,EAAM,KAAK,WAAa,EAAK,WAAW,MAExC,EAAI,QAAU,QACd,EAAI,SAAW,QAEf,KAAK,OAAO,YAAY,YAAY,GAEhC,KAAK,QAAQ,gBAChB,KAAK,UAAU,UAAY,wBAC3B,KAAK,GAAG,WAAY,KAAK,kBACzB,KAAK,GAAG,UAAW,KAAK,eAEzB,KAAK,GAAG,UAAW,KAAK,uBACxB,KAAK,0BAIP,sBAAuB,WAEtB,IAAI,KAAK,aAAT,CACA,KAAK,qBAEL,IAAI,GAAK,KAAK,cACV,EAAM,EAAG,IACT,EAAO,EAAG,IAAI,SAAS,GACvB,EAAO,KAAK,SAGhB,GAAE,QAAQ,YAAY,EAAM,GAC5B,EAAK,MAAQ,EAAK,EAClB,EAAK,OAAS,EAAK,EACnB,EAAK,WAAW,MAAM,WAAW,EAAI,GAAI,EAAI,OAY/C,EAAE,UAKD,SAAU,SAAsB,EAAmB,GAClD,IAAK,IAAc,EAAO,OACzB,MAAO,GAAO,OAGf,IAAI,GAAc,EAAY,CAQ9B,OALA,GAAS,KAAK,cAAc,EAAQ,GAGpC,EAAS,KAAK,YAAY,EAAQ,IAMnC,uBAAyB,SAAoB,EAAa,EAAc,GACvE,MAAO,MAAK,KAAK,KAAK,yBAAyB,EAAG,EAAI,GAAI,KAG3D,sBAAuB,SAAoB,EAAa,EAAc,GACrE,MAAO,MAAK,yBAAyB,EAAG,EAAI,IAI7C,YAAa,SAAU,EAAQ,GAE9B,GAAI,GAAM,EAAO,OACb,QAA0B,aAAe,EAAY,GAAK,WAAa,MACvE,EAAU,GAAI,GAAiB,EAEnC,GAAQ,GAAK,EAAQ,EAAM,GAAK,EAEhC,KAAK,gBAAgB,EAAQ,EAAS,EAAa,EAAG,EAAM,EAE5D,IAAI,GACA,IAEJ,KAAK,EAAI,EAAO,EAAJ,EAAS,IAChB,EAAQ,IACX,EAAU,KAAK,EAAO,GAIxB,OAAO,IAGR,gBAAiB,SAAU,EAAQ,EAAS,EAAa,EAAO,GAE/D,GACI,GAAO,EAAG,EADV,EAAY,CAGhB,KAAK,EAAI,EAAQ,EAAQ,EAAO,GAAZ,EAAe,IAClC,EAAS,KAAK,yBAAyB,EAAO,GAAI,EAAO,GAAQ,EAAO,IAAO,GAE3E,EAAS,IACZ,EAAQ,EACR,EAAY,EAIV,GAAY,IACf,EAAQ,GAAS,EAEjB,KAAK,gBAAgB,EAAQ,EAAS,EAAa,EAAO,GAC1D,KAAK,gBAAgB,EAAQ,EAAS,EAAa,EAAO,KAK5D,cAAe,SAAU,EAAQ,GAGhC,IAAK,GAFD,IAAiB,EAAO,IAEnB,EAAI,EAAG,EAAO,EAAG,EAAM,EAAO,OAAY,EAAJ,EAAS,IACnD,KAAK,QAAQ,EAAO,GAAI,EAAO,IAAS,IAC3C,EAAc,KAAK,EAAO,IAC1B,EAAO,EAMT,OAHW,GAAM,EAAb,GACH,EAAc,KAAK,EAAO,EAAM,IAE1B,GAMR,YAAa,SAAU,EAAG,EAAG,EAAQ,GACpC,GAGI,GAAS,EAAG,EAHZ,EAAQ,EAAc,KAAK,UAAY,KAAK,YAAY,EAAG,GAC3D,EAAQ,KAAK,YAAY,EAAG,EAOhC,KAFA,KAAK,UAAY,IAEJ,CAEZ,KAAM,EAAQ,GACb,OAAQ,EAAG,EAEL,IAAI,EAAQ,EAClB,OAAO,CAGP,GAAU,GAAS,EACnB,EAAI,KAAK,qBAAqB,EAAG,EAAG,EAAS,GAC7C,EAAU,KAAK,YAAY,EAAG,GAE1B,IAAY,GACf,EAAI,EACJ,EAAQ,IAER,EAAI,EACJ,EAAQ,KAMZ,qBAAsB,SAAU,EAAG,EAAG,EAAM,GAC3C,GAAI,GAAK,EAAE,EAAI,EAAE,EACb,EAAK,EAAE,EAAI,EAAE,EACb,EAAM,EAAO,IACb,EAAM,EAAO,GAEjB,OAAW,GAAP,EACI,GAAI,GAAE,MAAM,EAAE,EAAI,GAAM,EAAI,EAAI,EAAE,GAAK,EAAI,EAAI,GACrC,EAAP,EACH,GAAI,GAAE,MAAM,EAAE,EAAI,GAAM,EAAI,EAAI,EAAE,GAAK,EAAI,EAAI,GACrC,EAAP,EACH,GAAI,GAAE,MAAM,EAAI,EAAG,EAAE,EAAI,GAAM,EAAI,EAAI,EAAE,GAAK,GACpC,EAAP,EACH,GAAI,GAAE,MAAM,EAAI,EAAG,EAAE,EAAI,GAAM,EAAI,EAAI,EAAE,GAAK,GAD/C,QAKR,YAAa,SAAoB,EAAG,GACnC,GAAI,GAAO,CAaX,OAXI,GAAE,EAAI,EAAO,IAAI,EACpB,GAAQ,EACE,EAAE,EAAI,EAAO,IAAI,IAC3B,GAAQ,GAEL,EAAE,EAAI,EAAO,IAAI,EACpB,GAAQ,EACE,EAAE,EAAI,EAAO,IAAI,IAC3B,GAAQ,GAGF,GAIR,QAAS,SAAU,EAAI,GACtB,GAAI,GAAK,EAAG,EAAI,EAAG,EACf,EAAK,EAAG,EAAI,EAAG,CACnB,OAAO,GAAK,EAAK,EAAK,GAIvB,yBAA0B,SAAU,EAAG,EAAI,EAAI,GAC9C,GAKI,GALA,EAAI,EAAG,EACP,EAAI,EAAG,EACP,EAAK,EAAG,EAAI,EACZ,EAAK,EAAG,EAAI,EACZ,EAAM,EAAK,EAAK,EAAK,CAkBzB,OAfI,GAAM,IACT,IAAM,EAAE,EAAI,GAAK,GAAM,EAAE,EAAI,GAAK,GAAM,EAEpC,EAAI,GACP,EAAI,EAAG,EACP,EAAI,EAAG,GACG,EAAI,IACd,GAAK,EAAK,EACV,GAAK,EAAK,IAIZ,EAAK,EAAE,EAAI,EACX,EAAK,EAAE,EAAI,EAEJ,EAAS,EAAK,EAAK,EAAK,EAAK,GAAI,GAAE,MAAM,EAAG,KASrD,EAAE,SAAW,EAAE,KAAK,QACnB,WAAY,SAAU,EAAS,GAC9B,EAAE,KAAK,UAAU,WAAW,KAAK,KAAM,GAEvC,KAAK,SAAW,KAAK,gBAAgB,IAGtC,SAGC,aAAc,EACd,QAAQ,GAGT,eAAgB,WACf,KAAK,kBAEL,KAAK,GAAI,GAAI,EAAG,EAAM,KAAK,SAAS,OAAY,EAAJ,EAAS,IACpD,KAAK,gBAAgB,GAAK,KAAK,KAAK,mBAAmB,KAAK,SAAS,KAIvE,cAAe,WACd,IAAK,GAAI,GAAI,EAAG,EAAM,KAAK,OAAO,OAAQ,EAAM,GAAQ,EAAJ,EAAS,IAC5D,GAAO,KAAK,gBAAgB,KAAK,OAAO,GAEzC,OAAO,IAGR,WAAY,WACX,MAAO,MAAK,UAGb,WAAY,SAAU,GAErB,MADA,MAAK,SAAW,KAAK,gBAAgB,GAC9B,KAAK,UAGb,UAAW,SAAU,GAEpB,MADA,MAAK,SAAS,KAAK,EAAE,OAAO,IACrB,KAAK,UAGb,cAAe,WACd,GAAI,MAAa,OAAO,MAAM,KAAK,SAAU,UAG7C,OAFA,MAAK,gBAAgB,KAAK,UAAU,GACpC,KAAK,SACE,GAGR,kBAAmB,SAAU,GAG5B,IAAK,GAF4C,GAAI,EAAjD,EAAc,EAAA,EAAU,EAAQ,KAAK,OAAgB,EAAW,KAE3D,EAAI,EAAG,EAAO,EAAM,OAAY,EAAJ,EAAU,IAE9C,IAAK,GADD,GAAS,EAAM,GACV,EAAI,EAAG,EAAM,EAAO,OAAY,EAAJ,EAAS,IAAK,CAClD,EAAK,EAAO,EAAI,GAChB,EAAK,EAAO,EACZ,IAAI,GAAS,EAAE,SAAS,yBAAyB,EAAG,EAAI,GAAI,EAC/C,GAAT,IACH,EAAc,EACd,EAAW,EAAE,SAAS,yBAAyB,EAAG,EAAI,IAOzD,MAHI,KACH,EAAS,SAAW,KAAK,KAAK,IAExB,GAGR,UAAW,WACV,MAAO,IAAI,GAAE,aAAa,KAAK,eAGhC,gBAAiB,SAAU,EAAS,GACnC,GAAI,GAAG,EAAK,EAAS,EAAY,IAEjC,KAAK,EAAI,EAAG,EAAM,EAAQ,OAAY,EAAJ,EAAS,IAAK,CAC/C,GAAI,EAAE,KAAK,QAAQ,EAAQ,KAAgC,gBAAlB,GAAQ,GAAG,GACnD,MAED,GAAO,GAAK,EAAE,OAAO,EAAQ,IAE9B,MAAO,IAGR,YAAa,WACZ,EAAE,KAAK,UAAU,YAAY,KAAK,OAGnC,gBAAiB,SAAU,GAG1B,IAAK,GAA2C,GAF5C,EAAQ,EAAE,KAAK,IAEV,EAAI,EAAG,EAAO,EAAO,OAAQ,EAAM,GAAW,EAAJ,EAAU,IAC5D,EAAI,EAAO,GACP,GACH,EAAE,SAEH,IAAQ,EAAI,IAAM,KAAO,EAAE,EAAI,IAAM,EAAE,CAExC,OAAO,IAGR,YAAa,WACZ,GAEI,GAAG,EAAG,EAFN,EAAS,KAAK,gBACd,EAAM,EAAO,MAGjB,IAAI,KAAK,QAAQ,OAEhB,YADA,KAAK,QAAU,GAIhB,MAAK,SAEL,IAAI,GAAQ,KAAK,OACb,EAAK,KAAK,KAAK,cACf,EAAK,EAAE,QAEX,KAAK,EAAI,EAAG,EAAI,EAAO,EAAM,EAAV,EAAa,IAC/B,EAAU,EAAG,YAAY,EAAO,GAAI,EAAO,EAAI,GAAI,EAAI,GAClD,IAIL,EAAM,GAAK,EAAM,OACjB,EAAM,GAAG,KAAK,EAAQ,KAGjB,EAAQ,KAAO,EAAO,EAAI,IAAQ,IAAM,EAAM,KAClD,EAAM,GAAG,KAAK,EAAQ,IACtB,OAMH,gBAAiB,WAIhB,IAAK,GAHD,GAAQ,KAAK,OACb,EAAK,EAAE,SAEF,EAAI,EAAG,EAAM,EAAM,OAAY,EAAJ,EAAS,IAC5C,EAAM,GAAK,EAAG,SAAS,EAAM,GAAI,KAAK,QAAQ,eAIhD,YAAa,WACP,KAAK,OAEV,KAAK,cACL,KAAK,kBAEL,EAAE,KAAK,UAAU,YAAY,KAAK,UAIpC,EAAE,SAAW,SAAU,EAAS,GAC/B,MAAO,IAAI,GAAE,SAAS,EAAS,IAUhC,EAAE,YAMF,EAAE,SAAS,YAAc,SAAU,EAAQ,GAC1C,GAAI,GAEA,EAAG,EAAG,EACN,EAAG,EACH,EAAK,EAAM,EAHX,GAAS,EAAG,EAAG,EAAG,GAIlB,EAAK,EAAE,QAEX,KAAK,EAAI,EAAG,EAAM,EAAO,OAAY,EAAJ,EAAS,IACzC,EAAO,GAAG,MAAQ,EAAG,YAAY,EAAO,GAAI,EAI7C,KAAK,EAAI,EAAO,EAAJ,EAAO,IAAK,CAIvB,IAHA,EAAO,EAAM,GACb,KAEK,EAAI,EAAG,EAAM,EAAO,OAAQ,EAAI,EAAM,EAAO,EAAJ,EAAS,EAAI,IAC1D,EAAI,EAAO,GACX,EAAI,EAAO,GAGL,EAAE,MAAQ,EAUH,EAAE,MAAQ,IACtB,EAAI,EAAG,qBAAqB,EAAG,EAAG,EAAM,GACxC,EAAE,MAAQ,EAAG,YAAY,EAAG,GAC5B,EAAc,KAAK,KAXf,EAAE,MAAQ,IACb,EAAI,EAAG,qBAAqB,EAAG,EAAG,EAAM,GACxC,EAAE,MAAQ,EAAG,YAAY,EAAG,GAC5B,EAAc,KAAK,IAEpB,EAAc,KAAK,GASrB,GAAS,EAGV,MAAO,IAQR,EAAE,QAAU,EAAE,SAAS,QACtB,SACC,MAAM,GAGP,WAAY,SAAU,EAAS,GAC9B,EAAE,SAAS,UAAU,WAAW,KAAK,KAAM,EAAS,GACpD,KAAK,eAAe,IAGrB,eAAgB,SAAU,GACzB,GAAI,GAAG,EAAK,CACZ,IAAI,GAAW,EAAE,KAAK,QAAQ,EAAQ,KAAiC,gBAAlB,GAAQ,GAAG,GAI/D,IAHA,KAAK,SAAW,KAAK,gBAAgB,EAAQ,IAC7C,KAAK,OAAS,EAAQ,MAAM,GAEvB,EAAI,EAAG,EAAM,KAAK,OAAO,OAAY,EAAJ,EAAS,IAC9C,EAAO,KAAK,OAAO,GAAK,KAAK,gBAAgB,KAAK,OAAO,IACrD,EAAK,GAAG,OAAO,EAAK,EAAK,OAAS,KACrC,EAAK,KAMR,GAAU,KAAK,SAEX,EAAQ,QAAU,GAAK,EAAQ,GAAG,OAAO,EAAQ,EAAQ,OAAS,KACrE,EAAQ,OAIV,eAAgB,WAOf,GANA,EAAE,SAAS,UAAU,eAAe,KAAK,MAIzC,KAAK,eAEA,KAAK,OAAV,CAEA,GAAI,GAAG,EAAG,EAAK,CAEf,KAAK,EAAI,EAAG,EAAM,KAAK,OAAO,OAAY,EAAJ,EAAS,IAG9C,IAFA,KAAK,YAAY,MAEZ,EAAI,EAAG,EAAO,KAAK,OAAO,GAAG,OAAY,EAAJ,EAAU,IACnD,KAAK,YAAY,GAAG,GAAK,KAAK,KAAK,mBAAmB,KAAK,OAAO,GAAG,MAKxE,WAAY,SAAU,GACrB,MAAI,IAAW,EAAE,KAAK,QAAQ,EAAQ,KAAiC,gBAAlB,GAAQ,GAAG,IAC/D,KAAK,eAAe,GACb,KAAK,UAEL,EAAE,SAAS,UAAU,WAAW,KAAK,KAAM,IAIpD,YAAa,WACZ,GAAI,GAAS,KAAK,gBACd,IAIJ,IAFA,KAAK,QAAU,GAAQ,OAAO,KAAK,cAE/B,KAAK,QAAQ,OAAjB,CAEA,IAAK,GAAI,GAAI,EAAG,EAAM,KAAK,OAAO,OAAY,EAAJ,EAAS,IAAK,CACvD,GAAI,GAAU,EAAE,SAAS,YAAY,KAAK,OAAO,GAAI,KAAK,KAAK,cAC3D,GAAQ,QACX,EAAS,KAAK,GAIhB,KAAK,OAAS,IAGf,gBAAiB,SAAU,GAC1B,GAAI,GAAM,EAAE,SAAS,UAAU,gBAAgB,KAAK,KAAM,EAC1D,OAAO,IAAO,EAAE,QAAQ,IAAM,IAAM,QAItC,EAAE,QAAU,SAAU,EAAS,GAC9B,MAAO,IAAI,GAAE,QAAQ,EAAS,IAQ9B,WACA,QAAS,GAAY,GAEpB,MAAO,GAAE,aAAa,QAErB,WAAY,SAAU,EAAS,GAC9B,KAAK,WACL,KAAK,SAAW,EAChB,KAAK,WAAW,IAGjB,WAAY,SAAU,GACrB,GAAI,GAAI,EACJ,EAAM,EAAQ,MAUlB,KARA,KAAK,UAAU,SAAU,GAChB,EAAJ,EACH,EAAM,WAAW,EAAQ,MAEzB,KAAK,YAAY,IAEhB,MAEQ,EAAJ,GACN,KAAK,SAAS,GAAI,GAAM,EAAQ,KAAM,KAAK,UAG5C,OAAO,OAGR,WAAY,WACX,GAAI,KAMJ,OAJA,MAAK,UAAU,SAAU,GACxB,EAAQ,KAAK,EAAM,gBAGb,KAKV,EAAE,cAAgB,EAAY,EAAE,UAChC,EAAE,aAAe,EAAY,EAAE,SAE/B,EAAE,cAAgB,SAAU,EAAS,GACpC,MAAO,IAAI,GAAE,cAAc,EAAS,IAGrC,EAAE,aAAe,SAAU,EAAS,GACnC,MAAO,IAAI,GAAE,aAAa,EAAS,OASrC,EAAE,UAAY,EAAE,QAAQ,QACvB,WAAY,SAAU,EAAc,GACnC,EAAE,QAAQ,UAAU,WAAW,KAAK,KAAM,KAAK,iBAAiB,GAAe,IAGhF,UAAW,SAAU,GACpB,KAAK,WAAW,KAAK,iBAAiB,KAGvC,iBAAkB,SAAU,GAE3B,MADA,GAAe,EAAE,aAAa,IAE7B,EAAa,eACb,EAAa,eACb,EAAa,eACb,EAAa,mBAKhB,EAAE,UAAY,SAAU,EAAc,GACrC,MAAO,IAAI,GAAE,UAAU,EAAc,IAQtC,EAAE,OAAS,EAAE,KAAK,QACjB,WAAY,SAAU,EAAQ,EAAQ,GACrC,EAAE,KAAK,UAAU,WAAW,KAAK,KAAM,GAEvC,KAAK,QAAU,EAAE,OAAO,GACxB,KAAK,SAAW,GAGjB,SACC,MAAM,GAGP,UAAW,SAAU,GAEpB,MADA,MAAK,QAAU,EAAE,OAAO,GACjB,KAAK,UAGb,UAAW,SAAU,GAEpB,MADA,MAAK,SAAW,EACT,KAAK,UAGb,eAAgB,WACf,GAAI,GAAY,KAAK,gBACjB,EAAS,KAAK,QACd,EAAY,KAAK,KAAK,oBAAoB,EAAO,IAAK,EAAO,IAAM,GAEvE,MAAK,OAAS,KAAK,KAAK,mBAAmB,GAC3C,KAAK,QAAU,KAAK,IAAI,KAAK,OAAO,EAAI,EAAU,EAAG,IAGtD,UAAW,WACV,GAAI,GAAY,KAAK,gBACjB,EAAa,KAAK,SAAW,SAAY,IACzC,EAAS,KAAK,OAElB,OAAO,IAAI,GAAE,cACJ,EAAO,IAAM,EAAW,EAAO,IAAM,IACrC,EAAO,IAAM,EAAW,EAAO,IAAM,KAG/C,UAAW,WACV,MAAO,MAAK,SAGb,cAAe,WACd,GAAI,GAAI,KAAK,OACT,EAAI,KAAK,OAEb,OAAI,MAAK,gBACD,GAGJ,EAAE,QAAQ,IACN,IAAM,EAAE,EAAI,KAAO,EAAE,EAAI,GACzB,IAAM,EAAI,IAAM,EAAI,WACnB,EAAE,EAAI,IAAO,KAAO,EAAE,EAAI,GAAK,MAEvC,EAAE,SACF,EAAI,KAAK,MAAM,GACR,MAAQ,EAAE,EAAI,IAAM,EAAE,EAAI,IAAM,EAAI,IAAM,EAAI,gBAIvD,UAAW,WACV,MAAO,MAAK,UAKb,cAAe,WACd,MAAQ,MAAK,SAAW,SAAY,KAGrC,cAAe,WACd,MAAO,MAAK,gBAAkB,KAAK,IAAI,EAAE,OAAO,WAAa,KAAK,QAAQ,MAG3E,cAAe,WACd,IAAK,KAAK,KACT,OAAO,CAER,IAAI,GAAK,KAAK,KAAK,cACf,EAAI,KAAK,QACT,EAAI,KAAK,MAEb,OAAO,GAAE,EAAI,EAAI,EAAG,IAAI,GAAK,EAAE,EAAI,EAAI,EAAG,IAAI,GACvC,EAAE,EAAI,EAAI,EAAG,IAAI,GAAK,EAAE,EAAI,EAAI,EAAG,IAAI,KAIhD,EAAE,OAAS,SAAU,EAAQ,EAAQ,GACpC,MAAO,IAAI,GAAE,OAAO,EAAQ,EAAQ,IAQrC,EAAE,aAAe,EAAE,OAAO,QACzB,SACC,OAAQ,GACR,OAAQ,GAGT,WAAY,SAAU,EAAQ,GAC7B,EAAE,OAAO,UAAU,WAAW,KAAK,KAAM,EAAQ,KAAM,GACvD,KAAK,QAAU,KAAK,QAAQ,QAG7B,eAAgB,WACf,KAAK,OAAS,KAAK,KAAK,mBAAmB,KAAK,UAGjD,aAAe,WACd,EAAE,OAAO,UAAU,aAAa,KAAK,MACrC,KAAK,UAAU,KAAK,QAAQ,SAG7B,UAAW,SAAU,GAKpB,MAJA,GAAE,OAAO,UAAU,UAAU,KAAK,KAAM,GACpC,KAAK,QAAU,KAAK,OAAO,SAC9B,KAAK,OAAO,UAAU,GAEhB,MAGR,UAAW,SAAU,GAEpB,MADA,MAAK,QAAQ,OAAS,KAAK,QAAU,EAC9B,KAAK,UAGb,UAAW,WACV,MAAO,MAAK,WAId,EAAE,aAAe,SAAU,EAAQ,GAClC,MAAO,IAAI,GAAE,aAAa,EAAQ,IAQnC,EAAE,SAAS,QAAS,EAAE,KAAK,QAC1B,eAAgB,SAAU,EAAG,GAC5B,GAAI,GAAG,EAAG,EAAG,EAAK,EAAM,EAAM,EAC1B,EAAI,KAAK,QAAQ,OAAS,CAM9B,KAJI,EAAE,QAAQ,QACb,GAAK,IAGD,EAAI,EAAG,EAAM,KAAK,OAAO,OAAY,EAAJ,EAAS,IAE9C,IADA,EAAO,KAAK,OAAO,GACd,EAAI,EAAG,EAAO,EAAK,OAAQ,EAAI,EAAO,EAAO,EAAJ,EAAU,EAAI,IAC3D,IAAK,GAAiB,IAAN,KAIhB,EAAO,EAAE,SAAS,uBAAuB,EAAG,EAAK,GAAI,EAAK,IAE9C,GAAR,GACH,OAAO,CAIV,QAAO,QAST,EAAE,QAAQ,QAAS,EAAE,KAAK,QACzB,eAAgB,SAAU,GACzB,GACI,GAAM,EAAI,EACV,EAAG,EAAG,EACN,EAAK,EAHL,GAAS,CAOb,IAAI,EAAE,SAAS,UAAU,eAAe,KAAK,KAAM,GAAG,GAErD,OAAO,CAKR,KAAK,EAAI,EAAG,EAAM,KAAK,OAAO,OAAY,EAAJ,EAAS,IAG9C,IAFA,EAAO,KAAK,OAAO,GAEd,EAAI,EAAG,EAAO,EAAK,OAAQ,EAAI,EAAO,EAAO,EAAJ,EAAU,EAAI,IAC3D,EAAK,EAAK,GACV,EAAK,EAAK,GAEJ,EAAG,EAAI,EAAE,GAAQ,EAAG,EAAI,EAAE,GAC7B,EAAE,GAAK,EAAG,EAAI,EAAG,IAAM,EAAE,EAAI,EAAG,IAAM,EAAG,EAAI,EAAG,GAAK,EAAG,IAC1D,GAAU,EAKb,OAAO,SAST,EAAE,OAAO,QAAS,EAAE,KAAK,QACxB,UAAW,WACV,GAAI,GAAI,KAAK,MACb,MAAK,KAAK,YACV,KAAK,KAAK,IAAI,EAAE,EAAG,EAAE,EAAG,KAAK,QAAS,EAAa,EAAV,KAAK,IAAQ,IAGvD,eAAgB,SAAU,GACzB,GAAI,GAAS,KAAK,OACd,EAAK,KAAK,QAAQ,OAAS,KAAK,QAAQ,OAAS,EAAI,CAEzD,OAAQ,GAAE,WAAW,IAAW,KAAK,QAAU,QASjD,EAAE,aAAa,QAAS,EAAE,KAAK,QAC9B,aAAc,WACb,EAAE,KAAK,UAAU,aAAa,KAAK,YASrC,EAAE,QAAU,EAAE,aAAa,QAE1B,WAAY,SAAU,EAAS,GAC9B,EAAE,WAAW,KAAM,GAEnB,KAAK,WAED,GACH,KAAK,QAAQ,IAIf,QAAS,SAAU,GAClB,GACI,GAAG,EAAK,EADR,EAAW,EAAE,KAAK,QAAQ,GAAW,EAAU,EAAQ,QAG3D,IAAI,EAAU,CACb,IAAK,EAAI,EAAG,EAAM,EAAS,OAAY,EAAJ,EAAS,IAE3C,EAAU,EAAS,IACf,EAAQ,YAAc,EAAQ,UAAY,EAAQ,UAAY,EAAQ,cACzE,KAAK,QAAQ,EAAS,GAGxB,OAAO,MAGR,GAAI,GAAU,KAAK,OAEnB,KAAI,EAAQ,QAAW,EAAQ,OAAO,GAAtC,CAEA,GAAI,GAAQ,EAAE,QAAQ,gBAAgB,EAAS,EAAQ,aAAc,EAAQ,eAAgB,EAU7F,OATA,GAAM,QAAU,EAAE,QAAQ,UAAU,GAEpC,EAAM,eAAiB,EAAM,QAC7B,KAAK,WAAW,GAEZ,EAAQ,eACX,EAAQ,cAAc,EAAS,GAGzB,KAAK,SAAS,KAGtB,WAAY,SAAU,GACrB,GAAI,GAAQ,KAAK,QAAQ,KACrB,KAEH,EAAE,KAAK,OAAO,EAAM,QAAS,EAAM,gBAEnC,KAAK,eAAe,EAAO,KAI7B,SAAU,SAAU,GACnB,KAAK,UAAU,SAAU,GACxB,KAAK,eAAe,EAAO,IACzB,OAGJ,eAAgB,SAAU,EAAO,GACX,kBAAV,KACV,EAAQ,EAAM,EAAM,UAEjB,EAAM,UACT,EAAM,SAAS,MAKlB,EAAE,OAAO,EAAE,SACV,gBAAiB,SAAU,EAAS,EAAc,EAAgB,GACjE,GAGI,GAAQ,EAAS,EAAG,EAHpB,EAA4B,YAAjB,EAAQ,KAAqB,EAAQ,SAAW,EAC3D,EAAS,EAAS,YAClB,IAKJ,QAFA,EAAiB,GAAkB,KAAK,eAEhC,EAAS,MACjB,IAAK,QAEJ,MADA,GAAS,EAAe,GACjB,EAAe,EAAa,EAAS,GAAU,GAAI,GAAE,OAAO,EAEpE,KAAK,aACJ,IAAK,EAAI,EAAG,EAAM,EAAO,OAAY,EAAJ,EAAS,IACzC,EAAS,EAAe,EAAO,IAC/B,EAAO,KAAK,EAAe,EAAa,EAAS,GAAU,GAAI,GAAE,OAAO,GAEzE,OAAO,IAAI,GAAE,aAAa,EAE3B,KAAK,aAEJ,MADA,GAAU,KAAK,gBAAgB,EAAQ,EAAG,GACnC,GAAI,GAAE,SAAS,EAAS,EAEhC,KAAK,UACJ,GAAsB,IAAlB,EAAO,SAAiB,EAAO,GAAG,OACrC,KAAM,IAAI,OAAM,0BAGjB,OADA,GAAU,KAAK,gBAAgB,EAAQ,EAAG,GACnC,GAAI,GAAE,QAAQ,EAAS,EAE/B,KAAK,kBAEJ,MADA,GAAU,KAAK,gBAAgB,EAAQ,EAAG,GACnC,GAAI,GAAE,cAAc,EAAS,EAErC,KAAK,eAEJ,MADA,GAAU,KAAK,gBAAgB,EAAQ,EAAG,GACnC,GAAI,GAAE,aAAa,EAAS,EAEpC,KAAK,qBACJ,IAAK,EAAI,EAAG,EAAM,EAAS,WAAW,OAAY,EAAJ,EAAS,IAEtD,EAAO,KAAK,KAAK,iBAChB,SAAU,EAAS,WAAW,GAC9B,KAAM,UACN,WAAY,EAAQ,YAClB,EAAc,EAAgB,GAElC,OAAO,IAAI,GAAE,aAAa,EAE3B,SACC,KAAM,IAAI,OAAM,6BAIlB,eAAgB,SAAU,GACzB,MAAO,IAAI,GAAE,OAAO,EAAO,GAAI,EAAO,GAAI,EAAO,KAGlD,gBAAiB,SAAU,EAAQ,EAAY,GAC9C,GAAI,GAAQ,EAAG,EACX,IAEJ,KAAK,EAAI,EAAG,EAAM,EAAO,OAAY,EAAJ,EAAS,IACzC,EAAS,EACD,KAAK,gBAAgB,EAAO,GAAI,EAAa,EAAG,IAC/C,GAAkB,KAAK,gBAAgB,EAAO,IAEvD,EAAQ,KAAK,EAGd,OAAO,IAGR,eAAgB,SAAU,GACzB,GAAI,IAAU,EAAO,IAAK,EAAO,IAKjC,OAHI,GAAO,MAAQ,GAClB,EAAO,KAAK,EAAO,KAEb,GAGR,gBAAiB,SAAU,GAG1B,IAAK,GAFD,MAEK,EAAI,EAAG,EAAM,EAAQ,OAAY,EAAJ,EAAS,IAC9C,EAAO,KAAK,EAAE,QAAQ,eAAe,EAAQ,IAG9C,OAAO,IAGR,WAAY,SAAU,EAAO,GAC5B,MAAO,GAAM,QAAU,EAAE,UAAW,EAAM,SAAU,SAAU,IAAgB,EAAE,QAAQ,UAAU,IAGnG,UAAW,SAAU,GACpB,MAAqB,YAAjB,EAAQ,KACJ,GAIP,KAAM,UACN,cACA,SAAU,KAKb,IAAI,IACH,UAAW,WACV,MAAO,GAAE,QAAQ,WAAW,MAC3B,KAAM,QACN,YAAa,EAAE,QAAQ,eAAe,KAAK,gBAK9C,GAAE,OAAO,QAAQ,GACjB,EAAE,OAAO,QAAQ,GACjB,EAAE,aAAa,QAAQ,GAEvB,EAAE,SAAS,SACV,UAAW,WACV,MAAO,GAAE,QAAQ,WAAW,MAC3B,KAAM,aACN,YAAa,EAAE,QAAQ,gBAAgB,KAAK,mBAK/C,EAAE,QAAQ,SACT,UAAW,WACV,GACI,GAAG,EAAK,EADR,GAAU,EAAE,QAAQ,gBAAgB,KAAK,cAK7C,IAFA,EAAO,GAAG,KAAK,EAAO,GAAG,IAErB,KAAK,OACR,IAAK,EAAI,EAAG,EAAM,KAAK,OAAO,OAAY,EAAJ,EAAS,IAC9C,EAAO,EAAE,QAAQ,gBAAgB,KAAK,OAAO,IAC7C,EAAK,KAAK,EAAK,IACf,EAAO,KAAK,EAId,OAAO,GAAE,QAAQ,WAAW,MAC3B,KAAM,UACN,YAAa,OAKf,WACA,QAAS,GAAe,GACvB,MAAO,YACN,GAAI,KAMJ,OAJA,MAAK,UAAU,SAAU,GACxB,EAAO,KAAK,EAAM,YAAY,SAAS,eAGjC,EAAE,QAAQ,WAAW,MAC3B,KAAM,EACN,YAAa,KAKhB,EAAE,cAAc,SAAS,UAAW,EAAe,qBACnD,EAAE,aAAa,SAAS,UAAW,EAAe,kBAElD,EAAE,WAAW,SACZ,UAAW,WAEV,GAEC,GAFG,EAAW,KAAK,SAAW,KAAK,QAAQ,SAC3C,IAGD,IAAI,GAA8B,eAAlB,EAAS,KACxB,MAAO,GAAe,cAAc,KAAK,KAG1C,IAAI,GAAuB,GAA8B,uBAAlB,EAAS,IAShD,OAPA,MAAK,UAAU,SAAU,GACpB,EAAM,YACT,EAAO,EAAM,YACb,EAAM,KAAK,EAAuB,EAAK,SAAW,EAAE,QAAQ,UAAU,OAIpE,EACI,EAAE,QAAQ,WAAW,MAC3B,WAAY,EACZ,KAAM,wBAKP,KAAM,oBACN,SAAU,SAMd,EAAE,QAAU,SAAU,EAAS,GAC9B,MAAO,IAAI,GAAE,QAAQ,EAAS,IAQ/B,EAAE,UAED,YAAa,SAAU,EAAK,EAAM,EAAI,GAErC,GAEI,GAAS,EAAiB,EAF1B,EAAK,EAAE,MAAM,GACb,EAAM,YAAc,EAAO,CAG/B,OAAI,GAAI,GAAe,MAEvB,EAAU,SAAU,GACnB,MAAO,GAAG,KAAK,GAAW,EAAK,GAAK,EAAE,SAAS,cAG5C,EAAE,QAAQ,SAAqC,IAA1B,EAAK,QAAQ,SAC9B,KAAK,mBAAmB,EAAK,EAAM,EAAS,IAEhD,EAAE,QAAQ,OAAmB,aAAT,GAAwB,KAAK,sBACpD,KAAK,qBAAqB,EAAK,EAAS,GAGrC,oBAAsB,GAEZ,eAAT,GACH,EAAI,iBAAiB,iBAAkB,GAAS,GAChD,EAAI,iBAAiB,EAAM,GAAS,IAEhB,eAAT,GAAoC,eAAT,GAEtC,EAAkB,EAClB,EAAoB,eAAT,EAAwB,YAAc,WAEjD,EAAU,SAAU,GACnB,MAAK,GAAE,SAAS,YAAY,EAAK,GAC1B,EAAgB,GADvB,QAID,EAAI,iBAAiB,EAAS,GAAS,IAEpB,UAAT,GAAoB,EAAE,QAAQ,SACxC,EAAkB,EAClB,EAAU,SAAU,GACnB,MAAO,GAAE,SAAS,aAAa,EAAG,IAGnC,EAAI,iBAAiB,EAAM,GAAS,IAEpC,EAAI,iBAAiB,EAAM,GAAS,GAG3B,eAAiB,IAC3B,EAAI,YAAY,KAAO,EAAM,GAG9B,EAAI,GAAO,EAEJ,QAGR,eAAgB,SAAU,EAAK,EAAM,GAEpC,GAAI,GAAK,EAAE,MAAM,GACb,EAAM,YAAc,EAAO,EAC3B,EAAU,EAAI,EAElB,OAAK,IAED,EAAE,QAAQ,SAAqC,IAA1B,EAAK,QAAQ,SACrC,KAAK,sBAAsB,EAAK,EAAM,GAC5B,EAAE,QAAQ,OAAmB,aAAT,GAAwB,KAAK,wBAC3D,KAAK,wBAAwB,EAAK,GAExB,uBAAyB,GAEtB,eAAT,GACH,EAAI,oBAAoB,iBAAkB,GAAS,GACnD,EAAI,oBAAoB,EAAM,GAAS,IAEnB,eAAT,GAAoC,eAAT,EACtC,EAAI,oBAA8B,eAAT,EAAwB,YAAc,WAAa,GAAS,GAErF,EAAI,oBAAoB,EAAM,GAAS,GAE9B,eAAiB,IAC3B,EAAI,YAAY,KAAO,EAAM,GAG9B,EAAI,GAAO,KAEJ,MAxBgB,MA2BxB,gBAAiB,SAAU,GAS1B,MAPI,GAAE,gBACL,EAAE,kBAEF,EAAE,cAAe,EAElB,EAAE,SAAS,SAAS,GAEb,MAGR,yBAA0B,SAAU,GACnC,GAAI,GAAO,EAAE,SAAS,eAEtB,OAAO,GAAE,SACP,GAAG,EAAI,aAAc,GACrB,GAAG,EAAI,sBAAuB,IAGjC,wBAAyB,SAAU,GAGlC,IAAK,GAFD,GAAO,EAAE,SAAS,gBAEb,EAAI,EAAE,UAAU,MAAM,OAAS,EAAG,GAAK,EAAG,IAClD,EAAE,SAAS,GAAG,EAAI,EAAE,UAAU,MAAM,GAAI,EAGzC,OAAO,GAAE,SACP,GAAG,EAAI,QAAS,EAAE,SAAS,WAC3B,GAAG,EAAI,WAAY,IAGtB,eAAgB,SAAU,GAOzB,MALI,GAAE,eACL,EAAE,iBAEF,EAAE,aAAc,EAEV,MAGR,KAAM,SAAU,GACf,MAAO,GAAE,SACP,eAAe,GACf,gBAAgB,IAGnB,iBAAkB,SAAU,EAAG,GAC9B,IAAK,EACJ,MAAO,IAAI,GAAE,MAAM,EAAE,QAAS,EAAE,QAGjC,IAAI,GAAO,EAAU,uBAErB,OAAO,IAAI,GAAE,MACZ,EAAE,QAAU,EAAK,KAAO,EAAU,WAClC,EAAE,QAAU,EAAK,IAAM,EAAU,YAGnC,cAAe,SAAU,GAExB,GAAI,GAAQ,CAQZ,OANI,GAAE,aACL,EAAQ,EAAE,WAAa,KAEpB,EAAE,SACL,GAAS,EAAE,OAAS,GAEd,GAGR,eAEA,UAAW,SAAU,GAEpB,EAAE,SAAS,YAAY,EAAE,OAAQ,GAGlC,SAAU,SAAU,GACnB,GAAI,GAAU,KAAK,YAAY,EAAE,KAGjC,OADA,MAAK,YAAY,EAAE,OAAQ,EACpB,GAIR,YAAa,SAAU,EAAI,GAE1B,GAAI,GAAU,EAAE,aAEhB,KAAK,EAAW,OAAO,CAEvB,KACC,KAAO,GAAY,IAAY,GAC9B,EAAU,EAAQ,WAElB,MAAO,GACR,OAAO,EAER,MAAQ,KAAY,GAGrB,UAAW,WAEV,GAAI,GAAI,EAAO,KACf,KAAK,EAEJ,IADA,GAAI,GAAS,UAAU,OAAO,OACvB,IACN,EAAI,EAAkB,UAAE,IACpB,GAAK,EAAO,QAAU,EAAE,cAG5B,EAAS,EAAO,MAGlB,OAAO,IAIR,aAAc,SAAU,EAAG,GAC1B,GAAI,GAAa,EAAE,WAAa,EAAE,cAAc,UAC/C,EAAU,EAAE,SAAS,YAAe,EAAY,EAAE,SAAS,UAO5D,OAAK,IAAW,EAAU,KAAiB,IAAV,GAAmB,EAAE,OAAO,kBAAoB,EAAE,eAClF,GAAE,SAAS,KAAK,IAGjB,EAAE,SAAS,WAAa,EAEjB,EAAQ,MAIjB,EAAE,SAAS,GAAK,EAAE,SAAS,YAC3B,EAAE,SAAS,IAAM,EAAE,SAAS,eAO5B,EAAE,UAAY,EAAE,MAAM,QACrB,SAAU,EAAE,MAAM,OAElB,SACC,MAAO,EAAE,QAAQ,OAAS,aAAc,cAAgB,aACxD,KACC,UAAW,UACX,WAAY,WACZ,YAAa,WACb,cAAe,YAEhB,MACC,UAAW,YACX,WAAY,YACZ,YAAa,YACb,cAAe,cAIjB,WAAY,SAAU,EAAS,GAC9B,KAAK,SAAW,EAChB,KAAK,iBAAmB,GAAmB,GAG5C,OAAQ,WACP,IAAI,KAAK,SAAT,CAEA,IAAK,GAAI,GAAI,EAAE,UAAU,MAAM,OAAS,EAAG,GAAK,EAAG,IAClD,EAAE,SAAS,GAAG,KAAK,iBAAkB,EAAE,UAAU,MAAM,GAAI,KAAK,QAAS,KAG1E,MAAK,UAAW,IAGjB,QAAS,WACR,GAAK,KAAK,SAAV,CAEA,IAAK,GAAI,GAAI,EAAE,UAAU,MAAM,OAAS,EAAG,GAAK,EAAG,IAClD,EAAE,SAAS,IAAI,KAAK,iBAAkB,EAAE,UAAU,MAAM,GAAI,KAAK,QAAS,KAG3E,MAAK,UAAW,EAChB,KAAK,QAAS,IAGf,QAAS,SAAU,GAGlB,GAFA,KAAK,QAAS,GAEV,EAAE,WAA0B,IAAZ,EAAE,OAA8B,IAAb,EAAE,QAAkB,EAAE,WAE7D,EAAE,SAAS,gBAAgB,IAEvB,EAAE,UAAU,YAEhB,EAAE,QAAQ,mBACV,EAAE,QAAQ,wBAEN,KAAK,UAAT,CAEA,GAAI,GAAQ,EAAE,QAAU,EAAE,QAAQ,GAAK,CAEvC,MAAK,YAAc,GAAI,GAAE,MAAM,EAAM,QAAS,EAAM,SACpD,KAAK,UAAY,KAAK,QAAU,EAAE,QAAQ,YAAY,KAAK,UAE3D,EAAE,SACG,GAAG,EAAU,EAAE,UAAU,KAAK,EAAE,MAAO,KAAK,QAAS,MACrD,GAAG,EAAU,EAAE,UAAU,IAAI,EAAE,MAAO,KAAK,MAAO,QAGxD,QAAS,SAAU,GAClB,GAAI,EAAE,SAAW,EAAE,QAAQ,OAAS,EAEnC,YADA,KAAK,QAAS,EAIf,IAAI,GAAS,EAAE,SAAgC,IAArB,EAAE,QAAQ,OAAe,EAAE,QAAQ,GAAK,EAC9D,EAAW,GAAI,GAAE,MAAM,EAAM,QAAS,EAAM,SAC5C,EAAS,EAAS,SAAS,KAAK,cAE/B,EAAO,GAAM,EAAO,KACrB,EAAE,QAAQ,OAAS,KAAK,IAAI,EAAO,GAAK,KAAK,IAAI,EAAO,GAAK,IAEjE,EAAE,SAAS,eAAe,GAErB,KAAK,SACT,KAAK,KAAK,aAEV,KAAK,QAAS,EACd,KAAK,UAAY,EAAE,QAAQ,YAAY,KAAK,UAAU,SAAS,GAE/D,EAAE,QAAQ,SAAS,EAAS,KAAM,oBAClC,KAAK,YAAc,EAAE,QAAU,EAAE,WACjC,EAAE,QAAQ,SAAS,KAAK,YAAa,wBAGtC,KAAK,QAAU,KAAK,UAAU,IAAI,GAClC,KAAK,SAAU,EAEf,EAAE,KAAK,gBAAgB,KAAK,cAC5B,KAAK,aAAe,EAAE,KAAK,iBAAiB,KAAK,gBAAiB,MAAM,EAAM,KAAK,qBAGpF,gBAAiB,WAChB,KAAK,KAAK,WACV,EAAE,QAAQ,YAAY,KAAK,SAAU,KAAK,SAC1C,KAAK,KAAK,SAGX,MAAO,WACN,EAAE,QAAQ,YAAY,EAAS,KAAM,oBAEjC,KAAK,cACR,EAAE,QAAQ,YAAY,KAAK,YAAa,uBACxC,KAAK,YAAc,KAGpB,KAAK,GAAI,KAAK,GAAE,UAAU,KACzB,EAAE,SACG,IAAI,EAAU,EAAE,UAAU,KAAK,GAAI,KAAK,SACxC,IAAI,EAAU,EAAE,UAAU,IAAI,GAAI,KAAK,MAG7C,GAAE,QAAQ,kBACV,EAAE,QAAQ,sBAEN,KAAK,QAAU,KAAK,UAEvB,EAAE,KAAK,gBAAgB,KAAK,cAE5B,KAAK,KAAK,WACT,SAAU,KAAK,QAAQ,WAAW,KAAK,cAIzC,KAAK,SAAU,KAUjB,EAAE,QAAU,EAAE,MAAM,QACnB,WAAY,SAAU,GACrB,KAAK,KAAO,GAGb,OAAQ,WACH,KAAK,WAET,KAAK,UAAW,EAChB,KAAK,aAGN,QAAS,WACH,KAAK,WAEV,KAAK,UAAW,EAChB,KAAK,gBAGN,QAAS,WACR,QAAS,KAAK,YAShB,EAAE,IAAI,cACL,UAAU,EAEV,SAAU,EAAE,QAAQ,UACpB,oBAAqB,KACrB,gBAAiB,EAAA,EACjB,iBAAkB,EAAE,QAAQ,MAAQ,GAAK,GACzC,cAAe,IAGf,eAAe,IAGhB,EAAE,IAAI,KAAO,EAAE,QAAQ,QACtB,SAAU,WACT,IAAK,KAAK,WAAY,CACrB,GAAI,GAAM,KAAK,IAEf,MAAK,WAAa,GAAI,GAAE,UAAU,EAAI,SAAU,EAAI,YAEpD,KAAK,WAAW,IACf,UAAa,KAAK,aAClB,KAAQ,KAAK,QACb,QAAW,KAAK,YACd,MAEC,EAAI,QAAQ,gBACf,KAAK,WAAW,GAAG,UAAW,KAAK,WAAY,MAC/C,EAAI,GAAG,YAAa,KAAK,aAAc,MAEvC,EAAI,UAAU,KAAK,aAAc,OAGnC,KAAK,WAAW,UAGjB,YAAa,WACZ,KAAK,WAAW,WAGjB,MAAO,WACN,MAAO,MAAK,YAAc,KAAK,WAAW,QAG3C,aAAc,WACb,GAAI,GAAM,KAAK,IAEX,GAAI,UACP,EAAI,SAAS,OAGd,EACK,KAAK,aACL,KAAK,aAEN,EAAI,QAAQ,UACf,KAAK,cACL,KAAK,YAIP,QAAS,WACR,GAAI,KAAK,KAAK,QAAQ,QAAS,CAC9B,GAAI,GAAO,KAAK,WAAa,GAAI,MAC7B,EAAM,KAAK,SAAW,KAAK,WAAW,OAE1C,MAAK,WAAW,KAAK,GACrB,KAAK,OAAO,KAAK,GAEb,EAAO,KAAK,OAAO,GAAK,MAC3B,KAAK,WAAW,QAChB,KAAK,OAAO,SAId,KAAK,KACA,KAAK,QACL,KAAK,SAGX,aAAc,WAEb,GAAI,GAAW,KAAK,KAAK,UAAU,UAAU,GACzC,EAAgB,KAAK,KAAK,oBAAoB,EAAG,GAErD,MAAK,oBAAsB,EAAc,SAAS,GAAU,EAC5D,KAAK,YAAc,KAAK,KAAK,SAAS,EAAG,MAAM,GAGhD,WAAY,WAEX,GAAI,GAAa,KAAK,YAClB,EAAY,KAAK,MAAM,EAAa,GACpC,EAAK,KAAK,oBACV,EAAI,KAAK,WAAW,QAAQ,EAC5B,GAAS,EAAI,EAAY,GAAM,EAAa,EAAY,EACxD,GAAS,EAAI,EAAY,GAAM,EAAa,EAAY,EACxD,EAAO,KAAK,IAAI,EAAQ,GAAM,KAAK,IAAI,EAAQ,GAAM,EAAQ,CAEjE,MAAK,WAAW,QAAQ,EAAI,GAG7B,WAAY,SAAU,GACrB,GAAI,GAAM,KAAK,KACX,EAAU,EAAI,QACd,GAAS,GAAI,MAAS,KAAK,UAE3B,GAAa,EAAQ,SAAW,EAAQ,EAAQ,mBAAqB,KAAK,WAAW,EAIzF,IAFA,EAAI,KAAK,UAAW,GAEhB,EACH,EAAI,KAAK,eAEH,CAEN,GAAI,GAAY,KAAK,SAAS,SAAS,KAAK,WAAW,IACnD,GAAY,KAAK,UAAY,EAAQ,KAAK,OAAO,IAAM,IACvD,EAAO,EAAQ,cAEf,EAAc,EAAU,WAAW,EAAO,GAC1C,EAAQ,EAAY,YAAY,EAAG,IAEnC,EAAe,KAAK,IAAI,EAAQ,gBAAiB,GACjD,EAAqB,EAAY,WAAW,EAAe,GAE3D,EAAuB,GAAgB,EAAQ,oBAAsB,GACrE,EAAS,EAAmB,YAAY,EAAuB,GAAG,OAEjE,GAAO,GAAM,EAAO,GAIxB,EAAS,EAAI,aAAa,EAAQ,EAAI,QAAQ,WAE9C,EAAE,KAAK,iBAAiB,WACvB,EAAI,MAAM,GACT,SAAU,EACV,cAAe,EACf,aAAa,OATf,EAAI,KAAK,eAiBb,EAAE,IAAI,YAAY,aAAc,WAAY,EAAE,IAAI,MAOlD,EAAE,IAAI,cACL,iBAAiB,IAGlB,EAAE,IAAI,gBAAkB,EAAE,QAAQ,QACjC,SAAU,WACT,KAAK,KAAK,GAAG,WAAY,KAAK,eAAgB,OAG/C,YAAa,WACZ,KAAK,KAAK,IAAI,WAAY,KAAK,eAAgB,OAGhD,eAAgB,SAAU,GACzB,GAAI,GAAM,KAAK,KACX,EAAO,EAAI,WAAa,EAAE,cAAc,SAAW,GAAK,EAExB,YAAhC,EAAI,QAAQ,gBACf,EAAI,QAAQ,GAEZ,EAAI,cAAc,EAAE,eAAgB,MAKvC,EAAE,IAAI,YAAY,aAAc,kBAAmB,EAAE,IAAI,iBAOzD,EAAE,IAAI,cACL,iBAAiB,IAGlB,EAAE,IAAI,gBAAkB,EAAE,QAAQ,QACjC,SAAU,WACT,EAAE,SAAS,GAAG,KAAK,KAAK,WAAY,aAAc,KAAK,eAAgB,MACvE,EAAE,SAAS,GAAG,KAAK,KAAK,WAAY,sBAAuB,EAAE,SAAS,gBACtE,KAAK,OAAS,GAGf,YAAa,WACZ,EAAE,SAAS,IAAI,KAAK,KAAK,WAAY,aAAc,KAAK,gBACxD,EAAE,SAAS,IAAI,KAAK,KAAK,WAAY,sBAAuB,EAAE,SAAS,iBAGxE,eAAgB,SAAU,GACzB,GAAI,GAAQ,EAAE,SAAS,cAAc,EAErC,MAAK,QAAU,EACf,KAAK,cAAgB,KAAK,KAAK,2BAA2B,GAErD,KAAK,aACT,KAAK,YAAc,GAAI,MAGxB,IAAI,GAAO,KAAK,IAAI,KAAO,GAAI,MAAS,KAAK,YAAa,EAE1D,cAAa,KAAK,QAClB,KAAK,OAAS,WAAW,EAAE,KAAK,KAAK,aAAc,MAAO,GAE1D,EAAE,SAAS,eAAe,GAC1B,EAAE,SAAS,gBAAgB,IAG5B,aAAc,WACb,GAAI,GAAM,KAAK,KACX,EAAQ,KAAK,OACb,EAAO,EAAI,SAEf,GAAQ,EAAQ,EAAI,KAAK,KAAK,GAAS,KAAK,MAAM,GAClD,EAAQ,KAAK,IAAI,KAAK,IAAI,EAAO,GAAI,IACrC,EAAQ,EAAI,WAAW,EAAO,GAAS,EAEvC,KAAK,OAAS,EACd,KAAK,WAAa,KAEb,IAE+B,WAAhC,EAAI,QAAQ,gBACf,EAAI,QAAQ,EAAO,GAEnB,EAAI,cAAc,KAAK,cAAe,EAAO,OAKhD,EAAE,IAAI,YAAY,aAAc,kBAAmB,EAAE,IAAI,iBAOzD,EAAE,OAAO,EAAE,UAEV,YAAa,EAAE,QAAQ,UAAY,gBAAkB,EAAE,QAAQ,QAAU,cAAgB,aACzF,UAAW,EAAE,QAAQ,UAAY,cAAgB,EAAE,QAAQ,QAAU,YAAc,WAGnF,qBAAsB,SAAU,EAAK,EAAS,GAU7C,QAAS,GAAa,GACrB,GAAI,EAQJ,IANI,EAAE,QAAQ,SACb,EAAe,KAAK,EAAE,WACtB,EAAQ,EAAe,QAEvB,EAAQ,EAAE,QAAQ,SAEf,EAAQ,GAAZ,CAIA,GAAI,GAAM,KAAK,MACd,EAAQ,GAAO,GAAQ,EAExB,GAAQ,EAAE,QAAU,EAAE,QAAQ,GAAK,EACnC,EAAa,EAAQ,GAAc,GAAT,EAC1B,EAAO,GAGR,QAAS,GAAW,GACnB,GAAI,EAAE,QAAQ,QAAS,CACtB,GAAI,GAAM,EAAe,QAAQ,EAAE,UACnC,IAAY,KAAR,EACH,MAED,GAAe,OAAO,EAAK,GAG5B,GAAI,EAAW,CACd,GAAI,EAAE,QAAQ,QAAS,CAEtB,GACC,GADG,IAIJ,KAAK,GAAI,KAAK,GACb,EAAO,EAAM,GACO,kBAAT,GACV,EAAS,GAAK,EAAK,KAAK,GAExB,EAAS,GAAK,CAGhB,GAAQ,EAET,EAAM,KAAO,WACb,EAAQ,GACR,EAAO,MA1DT,GAAI,GAGA,EAFA,GAAY,EACZ,EAAQ,IAER,EAAM,YACN,EAAa,KAAK,YAClB,EAAW,KAAK,UAChB,IAsDJ,GAAI,EAAM,EAAa,GAAM,EAC7B,EAAI,EAAM,EAAW,GAAM,CAI3B,IAAI,GAAa,EAAE,QAAQ,QAAU,EAAS,gBAAkB,CAShE,OAPA,GAAI,iBAAiB,EAAY,GAAc,GAC/C,EAAW,iBAAiB,EAAU,GAAY,GAE9C,EAAE,QAAQ,SACb,EAAW,iBAAiB,EAAE,SAAS,eAAgB,GAAY,GAG7D,MAGR,wBAAyB,SAAU,EAAK,GACvC,GAAI,GAAM,WAWV,OATA,GAAI,oBAAoB,KAAK,YAAa,EAAI,EAAM,KAAK,YAAc,IAAK,IAC3E,EAAE,QAAQ,QAAU,EAAS,gBAAkB,GAAK,oBAC7C,KAAK,UAAW,EAAI,EAAM,KAAK,UAAY,IAAK,GAEpD,EAAE,QAAQ,SACb,EAAS,gBAAgB,oBAAoB,EAAE,SAAS,eAAgB,EAAI,EAAM,KAAK,UAAY,IAClG,GAGK,QAST,EAAE,OAAO,EAAE,UAGV,aAAc,EAAE,QAAQ,UAAY,gBAAkB,cACtD,aAAc,EAAE,QAAQ,UAAY,gBAAkB,cACtD,WAAY,EAAE,QAAQ,UAAY,cAAgB,YAClD,eAAgB,EAAE,QAAQ,UAAY,kBAAoB,gBAE1D,aACA,0BAA0B,EAM1B,mBAAoB,SAAU,EAAK,EAAM,EAAS,GAEjD,OAAQ,GACR,IAAK,aACJ,MAAO,MAAK,wBAAwB,EAAK,EAAM,EAAS;AJl/N3D,AIm/NE,IAAK,WACJ,MAAO,MAAK,CJp/NL,AAAE,IAAF,AAAM,OAAO,AACrB,UIm/NmC,EAAK,EAAM,EAAS,EACvD,KAAK,YACJ,MAAO,MAAK,uBAAuB,EAAK,EAAM,EAAS,EACxD,SACC,KAAM,6BAIR,wBAAyB,SAAU,EAAK,EAAM,EAAS,GACtD,GAAI,GAAM,YACN,EAAW,KAAK,UAEhB,EAAK,SAAU,GACI,UAAlB,EAAE,aAA2B,EAAE,cAAgB,EAAE,sBACpD,EAAE,SAAS,eAAe,EAI3B,KAAK,GADD,IAAiB,EACZ,EAAI,EAAG,EAAI,EAAS,OAAQ,IACpC,GAAI,EAAS,GAAG,YAAc,EAAE,UAAW,CAC1C,GAAiB,CACjB,OAGG,GACJ,EAAS,KAAK,GAGf,EAAE,QAAU,EAAS,QACrB,EAAE,gBAAkB,GAEpB,EAAQ,GAQT,IALA,EAAI,EAAM,aAAe,GAAM,EAC/B,EAAI,iBAAiB,KAAK,aAAc,GAAI,IAIvC,KAAK,yBAA0B,CACnC,GAAI,GAAa,SAAU,GAC1B,IAAK,GAAI,GAAI,EAAG,EAAI,EAAS,OAAQ,IACpC,GAAI,EAAS,GAAG,YAAc,EAAE,UAAW,CAC1C,EAAS,OAAO,EAAG,EACnB,QAKH,GAAS,gBAAgB,iBAAiB,KAAK,WAAY,GAAY,GACvE,EAAS,gBAAgB,iBAAiB,KAAK,eAAgB,GAAY,GAE3E,KAAK,0BAA2B,EAGjC,MAAO,OAGR,uBAAwB,SAAU,EAAK,EAAM,EAAS,GAIrD,QAAS,GAAG,GAGX,GAAK,EAAE,cAAgB,EAAE,sBAA0C,UAAlB,EAAE,aAA0C,IAAd,EAAE,QAAjF,CAEA,IAAK,GAAI,GAAI,EAAG,EAAI,EAAQ,OAAQ,IACnC,GAAI,EAAQ,GAAG,YAAc,EAAE,UAAW,CACzC,EAAQ,GAAK,CACb,OAIF,EAAE,QAAU,EAAQ,QACpB,EAAE,gBAAkB,GAEpB,EAAQ,IAlBT,GAAI,GAAM,YACN,EAAU,KAAK,SAuBnB,OAHA,GAAI,EAAM,YAAc,GAAM,EAC9B,EAAI,iBAAiB,KAAK,aAAc,GAAI,GAErC,MAGR,sBAAuB,SAAU,EAAK,EAAM,EAAS,GACpD,GAAI,GAAM,YACN,EAAU,KAAK,UAEf,EAAK,SAAU,GAClB,IAAK,GAAI,GAAI,EAAG,EAAI,EAAQ,OAAQ,IACnC,GAAI,EAAQ,GAAG,YAAc,EAAE,UAAW,CACzC,EAAQ,OAAO,EAAG,EAClB,OAIF,EAAE,QAAU,EAAQ,QACpB,EAAE,gBAAkB,GAEpB,EAAQ,GAOT,OAJA,GAAI,EAAM,WAAa,GAAM,EAC7B,EAAI,iBAAiB,KAAK,WAAY,GAAI,GAC1C,EAAI,iBAAiB,KAAK,eAAgB,GAAI,GAEvC,MAGR,sBAAuB,SAAU,EAAK,EAAM,GAC3C,GAAI,GAAM,YACN,EAAK,EAAI,EAAM,EAAO,EAE1B,QAAQ,GACR,IAAK,aACJ,EAAI,oBAAoB,KAAK,aAAc,GAAI,EAC/C,MACD,KAAK,YACJ,EAAI,oBAAoB,KAAK,aAAc,GAAI,EAC/C,MACD,KAAK,WACJ,EAAI,oBAAoB,KAAK,WAAY,GAAI,GAC7C,EAAI,oBAAoB,KAAK,eAAgB,GAAI,GAIlD,MAAO,SAST,EAAE,IAAI,cACL,UAAW,EAAE,QAAQ,QAAU,EAAE,QAAQ,UACzC,oBAAoB,IAGrB,EAAE,IAAI,UAAY,EAAE,QAAQ,QAC3B,SAAU,WACT,EAAE,SAAS,GAAG,KAAK,KAAK,WAAY,aAAc,KAAK,cAAe,OAGvE,YAAa,WACZ,EAAE,SAAS,IAAI,KAAK,KAAK,WAAY,aAAc,KAAK,cAAe,OAGxE,cAAe,SAAU,GACxB,GAAI,GAAM,KAAK,IAEf,IAAK,EAAE,SAAgC,IAArB,EAAE,QAAQ,SAAgB,EAAI,iBAAkB,KAAK,SAAvE,CAEA,GAAI,GAAK,EAAI,uBAAuB,EAAE,QAAQ,IAC1C,EAAK,EAAI,uBAAuB,EAAE,QAAQ,IAC1C,EAAa,EAAI,sBAErB,MAAK,aAAe,EAAG,IAAI,GAAI,UAAU,GACzC,KAAK,WAAa,EAAG,WAAW,GAEhC,KAAK,QAAS,EACd,KAAK,UAAW,EAEhB,KAAK,cAAgB,EAAW,SAAS,KAAK,cAE1C,EAAI,UACP,EAAI,SAAS,OAGd,EAAE,SACG,GAAG,EAAU,YAAa,KAAK,aAAc,MAC7C,GAAG,EAAU,WAAY,KAAK,YAAa,MAEhD,EAAE,SAAS,eAAe,KAG3B,aAAc,SAAU,GACvB,GAAI,GAAM,KAAK,IAEf,IAAK,EAAE,SAAgC,IAArB,EAAE,QAAQ,QAAiB,KAAK,SAAlD,CAEA,GAAI,GAAK,EAAI,uBAAuB,EAAE,QAAQ,IAC1C,EAAK,EAAI,uBAAuB,EAAE,QAAQ,GAE9C,MAAK,OAAS,EAAG,WAAW,GAAM,KAAK,WACvC,KAAK,OAAS,EAAG,KAAK,GAAI,UAAU,GAAG,UAAU,KAAK,cAElC,IAAhB,KAAK,SAEJ,EAAI,QAAQ,sBACX,EAAI,YAAc,EAAI,cAAgB,KAAK,OAAS,GACpD,EAAI,YAAc,EAAI,cAAgB,KAAK,OAAS,MAGrD,KAAK,SACT,EAAE,QAAQ,SAAS,EAAI,SAAU,oBAEjC,EACK,KAAK,aACL,KAAK,aAEV,KAAK,QAAS,GAGf,EAAE,KAAK,gBAAgB,KAAK,cAC5B,KAAK,aAAe,EAAE,KAAK,iBACnB,KAAK,cAAe,MAAM,EAAM,KAAK,KAAK,YAElD,EAAE,SAAS,eAAe,MAG3B,cAAe,WACd,GAAI,GAAM,KAAK,KACX,EAAS,KAAK,kBACd,EAAS,EAAI,mBAAmB,GAChC,EAAO,EAAI,aAAa,KAAK,OAEjC,GAAI,aAAa,EAAQ,EAAM,KAAK,aAAc,KAAK,OAAQ,KAAK,QAAQ,GAAO,IAGpF,YAAa,WACZ,IAAK,KAAK,SAAW,KAAK,SAEzB,YADA,KAAK,UAAW,EAIjB,IAAI,GAAM,KAAK,IAEf,MAAK,UAAW,EAChB,EAAE,QAAQ,YAAY,EAAI,SAAU,oBACpC,EAAE,KAAK,gBAAgB,KAAK,cAE5B,EAAE,SACG,IAAI,EAAU,YAAa,KAAK,cAChC,IAAI,EAAU,WAAY,KAAK,YAEpC,IAAI,GAAS,KAAK,kBACd,EAAS,EAAI,mBAAmB,GAEhC,EAAU,EAAI,UACd,EAAiB,EAAI,aAAa,KAAK,QAAU,EACjD,EAAkB,EAAiB,EAC3B,KAAK,KAAK,GAAkB,KAAK,MAAM,GAE/C,EAAO,EAAI,WAAW,EAAU,GAChC,EAAQ,EAAI,aAAa,GAAQ,KAAK,MAE1C,GAAI,aAAa,EAAQ,EAAM,EAAQ,IAGxC,gBAAiB,WAChB,GAAI,GAAe,KAAK,cAAc,SAAS,KAAK,QAAQ,SAAS,KAAK,OAC1E,OAAO,MAAK,aAAa,IAAI,MAI/B,EAAE,IAAI,YAAY,aAAc,YAAa,EAAE,IAAI,WAOnD,EAAE,IAAI,cACL,KAAK,EACL,aAAc,KAGf,EAAE,IAAI,IAAM,EAAE,QAAQ,QACrB,SAAU,WACT,EAAE,SAAS,GAAG,KAAK,KAAK,WAAY,aAAc,KAAK,QAAS,OAGjE,YAAa,WACZ,EAAE,SAAS,IAAI,KAAK,KAAK,WAAY,aAAc,KAAK,QAAS,OAGlE,QAAS,SAAU,GAClB,GAAK,EAAE,QAAP,CAOA,GALA,EAAE,SAAS,eAAe,GAE1B,KAAK,YAAa,EAGd,EAAE,QAAQ,OAAS,EAGtB,MAFA,MAAK,YAAa,MAClB,cAAa,KAAK,aAInB,IAAI,GAAQ,EAAE,QAAQ,GAClB,EAAK,EAAM,MAEf,MAAK,UAAY,KAAK,QAAU,GAAI,GAAE,MAAM,EAAM,QAAS,EAAM,SAG7D,EAAG,SAAwC,MAA7B,EAAG,QAAQ,eAC5B,EAAE,QAAQ,SAAS,EAAI,kBAIxB,KAAK,aAAe,WAAW,EAAE,KAAK,WACjC,KAAK,gBACR,KAAK,YAAa,EAClB,KAAK,QACL,KAAK,eAAe,cAAe,KAElC,MAAO,KAEV,EAAE,SACA,GAAG,EAAU,YAAa,KAAK,QAAS,MACxC,GAAG,EAAU,WAAY,KAAK,MAAO,QAGxC,MAAO,SAAU,GAOhB,GANA,aAAa,KAAK,cAElB,EAAE,SACA,IAAI,EAAU,YAAa,KAAK,QAAS,MACzC,IAAI,EAAU,WAAY,KAAK,MAAO,MAEpC,KAAK,YAAc,GAAK,EAAE,eAAgB,CAE7C,GAAI,GAAQ,EAAE,eAAe,GACzB,EAAK,EAAM,MAEX,IAAM,EAAG,SAAwC,MAA7B,EAAG,QAAQ,eAClC,EAAE,QAAQ,YAAY,EAAI,kBAIvB,KAAK,eACR,KAAK,eAAe,QAAS,KAKhC,YAAa,WACZ,MAAO,MAAK,QAAQ,WAAW,KAAK,YAAc,KAAK,KAAK,QAAQ,cAGrE,QAAS,SAAU,GAClB,GAAI,GAAQ,EAAE,QAAQ,EACtB,MAAK,QAAU,GAAI,GAAE,MAAM,EAAM,QAAS,EAAM,UAGjD,eAAgB,SAAU,EAAM,GAC/B,GAAI,GAAiB,EAAS,YAAY,cAE1C,GAAe,YAAa,EAC5B,EAAE,OAAO,iBAAkB,EAE3B,EAAe,eACP,GAAM,GAAM,EAAM,EAAQ,EAC1B,EAAE,QAAS,EAAE,QACb,EAAE,QAAS,EAAE,SACb,GAAO,GAAO,GAAO,EAAO,EAAG,MAEvC,EAAE,OAAO,cAAc,MAIrB,EAAE,QAAQ,QAAU,EAAE,QAAQ,SACjC,EAAE,IAAI,YAAY,aAAc,MAAO,EAAE,IAAI,KAS9C,EAAE,IAAI,cACL,SAAS,IAGV,EAAE,IAAI,QAAU,EAAE,QAAQ,QACzB,WAAY,SAAU,GACrB,KAAK,KAAO,EACZ,KAAK,WAAa,EAAI,WACtB,KAAK,MAAQ,EAAI,OAAO,YACxB,KAAK,QAAS,GAGf,SAAU,WACT,EAAE,SAAS,GAAG,KAAK,WAAY,YAAa,KAAK,aAAc,OAGhE,YAAa,WACZ,EAAE,SAAS,IAAI,KAAK,WAAY,YAAa,KAAK,cAClD,KAAK,QAAS,GAGf,MAAO,WACN,MAAO,MAAK,QAGb,aAAc,SAAU,GAGvB,MAFA,MAAK,QAAS,GAET,EAAE,UAA0B,IAAZ,EAAE,OAA8B,IAAb,EAAE,QAAyB,GAEnE,EAAE,QAAQ,uBACV,EAAE,QAAQ,mBAEV,KAAK,iBAAmB,KAAK,KAAK,uBAAuB,OAEzD,GAAE,SACG,GAAG,EAAU,YAAa,KAAK,aAAc,MAC7C,GAAG,EAAU,UAAW,KAAK,WAAY,MACzC,GAAG,EAAU,UAAW,KAAK,WAAY,QAG/C,aAAc,SAAU,GAClB,KAAK,SACT,KAAK,KAAO,EAAE,QAAQ,OAAO,MAAO,mBAAoB,KAAK,OAC7D,EAAE,QAAQ,YAAY,KAAK,KAAM,KAAK,kBAGtC,KAAK,WAAW,MAAM,OAAS,YAC/B,KAAK,KAAK,KAAK,gBAGhB,IAAI,GAAa,KAAK,iBAClB,EAAM,KAAK,KAEX,EAAa,KAAK,KAAK,uBAAuB,GAC9C,EAAS,EAAW,SAAS,GAE7B,EAAS,GAAI,GAAE,MACX,KAAK,IAAI,EAAW,EAAG,EAAW,GAClC,KAAK,IAAI,EAAW,EAAG,EAAW,GAE1C,GAAE,QAAQ,YAAY,EAAK,GAE3B,KAAK,QAAS,EAGd,EAAI,MAAM,MAAU,KAAK,IAAI,EAAG,KAAK,IAAI,EAAO,GAAK,GAAM,KAC3D,EAAI,MAAM,OAAU,KAAK,IAAI,EAAG,KAAK,IAAI,EAAO,GAAK,GAAM,MAG5D,QAAS,WACJ,KAAK,SACR,KAAK,MAAM,YAAY,KAAK,MAC5B,KAAK,WAAW,MAAM,OAAS,IAGhC,EAAE,QAAQ,sBACV,EAAE,QAAQ,kBAEV,EAAE,SACG,IAAI,EAAU,YAAa,KAAK,cAChC,IAAI,EAAU,UAAW,KAAK,YAC9B,IAAI,EAAU,UAAW,KAAK,aAGpC,WAAY,SAAU,GAErB,KAAK,SAEL,IAAI,GAAM,KAAK,KACX,EAAa,EAAI,uBAAuB,EAE5C,KAAI,KAAK,iBAAiB,OAAO,GAAjC,CAEA,GAAI,GAAS,GAAI,GAAE,aACX,EAAI,mBAAmB,KAAK,kBAC5B,EAAI,mBAAmB,GAE/B,GAAI,UAAU,GAEd,EAAI,KAAK,cACR,cAAe,MAIjB,WAAY,SAAU,GACH,KAAd,EAAE,SACL,KAAK,aAKR,EAAE,IAAI,YAAY,aAAc,UAAW,EAAE,IAAI,SAOjD,EAAE,IAAI,cACL,UAAU,EACV,kBAAmB,GACnB,mBAAoB,IAGrB,EAAE,IAAI,SAAW,EAAE,QAAQ,QAE1B,UACC,MAAU,IACV,OAAU,IACV,MAAU,IACV,IAAU,IACV,QAAU,IAAK,IAAK,GAAI,KACxB,SAAU,IAAK,IAAK,MAGrB,WAAY,SAAU,GACrB,KAAK,KAAO,EAEZ,KAAK,cAAc,EAAI,QAAQ,mBAC/B,KAAK,eAAe,EAAI,QAAQ,qBAGjC,SAAU,WACT,GAAI,GAAY,KAAK,KAAK,UAGC,MAAvB,EAAU,WACb,EAAU,SAAW,KAGtB,EAAE,SACG,GAAG,EAAW,QAAS,KAAK,SAAU,MACtC,GAAG,EAAW,OAAQ,KAAK,QAAS,MACpC,GAAG,EAAW,YAAa,KAAK,aAAc,MAEnD,KAAK,KACA,GAAG,QAAS,KAAK,UAAW,MAC5B,GAAG,OAAQ,KAAK,aAAc,OAGpC,YAAa,WACZ,KAAK,cAEL,IAAI,GAAY,KAAK,KAAK,UAE1B,GAAE,SACG,IAAI,EAAW,QAAS,KAAK,SAAU,MACvC,IAAI,EAAW,OAAQ,KAAK,QAAS,MACrC,IAAI,EAAW,YAAa,KAAK,aAAc,MAEpD,KAAK,KACA,IAAI,QAAS,KAAK,UAAW,MAC7B,IAAI,OAAQ,KAAK,aAAc,OAGrC,aAAc,WACb,IAAI,KAAK,SAAT,CAEA,GAAI,GAAO,EAAS,KAChB,EAAQ,EAAS,gBACjB,EAAM,EAAK,WAAa,EAAM,UAC9B,EAAO,EAAK,YAAc,EAAM,UAEpC,MAAK,KAAK,WAAW,QAErB,EAAO,SAAS,EAAM,KAGvB,SAAU,WACT,KAAK,UAAW,EAChB,KAAK,KAAK,KAAK,UAGhB,QAAS,WACR,KAAK,UAAW,EAChB,KAAK,KAAK,KAAK,SAGhB,cAAe,SAAU,GACxB,GAEI,GAAG,EAFH,EAAO,KAAK,YACZ,EAAQ,KAAK,QAGjB,KAAK,EAAI,EAAG,EAAM,EAAM,KAAK,OAAY,EAAJ,EAAS,IAC7C,EAAK,EAAM,KAAK,KAAO,GAAK,EAAK,EAElC,KAAK,EAAI,EAAG,EAAM,EAAM,MAAM,OAAY,EAAJ,EAAS,IAC9C,EAAK,EAAM,MAAM,KAAO,EAAK,EAE9B,KAAK,EAAI,EAAG,EAAM,EAAM,KAAK,OAAY,EAAJ,EAAS,IAC7C,EAAK,EAAM,KAAK,KAAO,EAAG,EAE3B,KAAK,EAAI,EAAG,EAAM,EAAM,GAAG,OAAY,EAAJ,EAAS,IAC3C,EAAK,EAAM,GAAG,KAAO,EAAG,GAAK,IAI/B,eAAgB,SAAU,GACzB,GAEI,GAAG,EAFH,EAAO,KAAK,aACZ,EAAQ,KAAK,QAGjB,KAAK,EAAI,EAAG,EAAM,EAAM,OAAO,OAAY,EAAJ,EAAS,IAC/C,EAAK,EAAM,OAAO,IAAM,CAEzB,KAAK,EAAI,EAAG,EAAM,EAAM,QAAQ,OAAY,EAAJ,EAAS,IAChD,EAAK,EAAM,QAAQ,KAAO,GAI5B,UAAW,WACV,EAAE,SAAS,GAAG,EAAU,UAAW,KAAK,WAAY,OAGrD,aAAc,WACb,EAAE,SAAS,IAAI,EAAU,UAAW,KAAK,WAAY,OAGtD,WAAY,SAAU,GACrB,GAAI,GAAM,EAAE,QACR,EAAM,KAAK,IAEf,IAAI,IAAO,MAAK,SAAU,CAEzB,GAAI,EAAI,UAAY,EAAI,SAAS,YAAe,MAEhD,GAAI,MAAM,KAAK,SAAS,IAEpB,EAAI,QAAQ,WACf,EAAI,gBAAgB,EAAI,QAAQ,eAG3B,CAAA,KAAI,IAAO,MAAK,WAItB,MAHA,GAAI,QAAQ,EAAI,UAAY,KAAK,UAAU,IAM5C,EAAE,SAAS,KAAK,MAIlB,EAAE,IAAI,YAAY,aAAc,WAAY,EAAE,IAAI,UAOlD,EAAE,QAAQ,WAAa,EAAE,QAAQ,QAChC,WAAY,SAAU,GACrB,KAAK,QAAU,GAGhB,SAAU,WACT,GAAI,GAAO,KAAK,QAAQ,KACnB,MAAK,aACT,KAAK,WAAa,GAAI,GAAE,UAAU,EAAM,IAGzC,KAAK,WACH,GAAG,YAAa,KAAK,aAAc,MACnC,GAAG,OAAQ,KAAK,QAAS,MACzB,GAAG,UAAW,KAAK,WAAY,MACjC,KAAK,WAAW,SAChB,EAAE,QAAQ,SAAS,KAAK,QAAQ,MAAO,6BAGxC,YAAa,WACZ,KAAK,WACH,IAAI,YAAa,KAAK,aAAc,MACpC,IAAI,OAAQ,KAAK,QAAS,MAC1B,IAAI,UAAW,KAAK,WAAY,MAElC,KAAK,WAAW,UAChB,EAAE,QAAQ,YAAY,KAAK,QAAQ,MAAO,6BAG3C,MAAO,WACN,MAAO,MAAK,YAAc,KAAK,WAAW,QAG3C,aAAc,WACb,KAAK,QACA,aACA,KAAK,aACL,KAAK,cAGX,QAAS,WACR,GAAI,GAAS,KAAK,QACd,EAAS,EAAO,QAChB,EAAU,EAAE,QAAQ,YAAY,EAAO,OACvC,EAAS,EAAO,KAAK,mBAAmB,EAGxC,IACH,EAAE,QAAQ,YAAY,EAAQ,GAG/B,EAAO,QAAU,EAEjB,EACK,KAAK,QAAS,OAAQ,IACtB,KAAK,SAGX,WAAY,SAAU,GACrB,KAAK,QACA,KAAK,WACL,KAAK,UAAW,MAUvB,EAAE,QAAU,EAAE,MAAM,QACnB,SACC,SAAU,YAGX,WAAY,SAAU,GACrB,EAAE,WAAW,KAAM,IAGpB,YAAa,WACZ,MAAO,MAAK,QAAQ,UAGrB,YAAa,SAAU,GACtB,GAAI,GAAM,KAAK,IAYf,OAVI,IACH,EAAI,cAAc,MAGnB,KAAK,QAAQ,SAAW,EAEpB,GACH,EAAI,WAAW,MAGT,MAGR,aAAc,WACb,MAAO,MAAK,YAGb,MAAO,SAAU,GAChB,KAAK,KAAO,CAEZ,IAAI,GAAY,KAAK,WAAa,KAAK,MAAM,GACzC,EAAM,KAAK,cACX,EAAS,EAAI,gBAAgB,EAUjC,OARA,GAAE,QAAQ,SAAS,EAAW,mBAEA,KAA1B,EAAI,QAAQ,UACf,EAAO,aAAa,EAAW,EAAO,YAEtC,EAAO,YAAY,GAGb,MAGR,WAAY,SAAU,GACrB,GAAI,GAAM,KAAK,cACX,EAAS,EAAI,gBAAgB,EASjC,OAPA,GAAO,YAAY,KAAK,YACxB,KAAK,KAAO,KAER,KAAK,UACR,KAAK,SAAS,GAGR,MAGR,cAAe,WACV,KAAK,MACR,KAAK,KAAK,eAAe,WAK5B,EAAE,QAAU,SAAU,GACrB,MAAO,IAAI,GAAE,QAAQ,IAMtB,EAAE,IAAI,SACL,WAAY,SAAU,GAErB,MADA,GAAQ,MAAM,MACP,MAGR,cAAe,SAAU,GAExB,MADA,GAAQ,WAAW,MACZ,MAGR,gBAAiB,WAMhB,QAAS,GAAa,EAAO,GAC5B,GAAI,GAAY,EAAI,EAAQ,IAAM,EAAI,CAEtC,GAAQ,EAAQ,GAAS,EAAE,QAAQ,OAAO,MAAO,EAAW,GAR7D,GAAI,GAAU,KAAK,mBACf,EAAI,WACJ,EAAY,KAAK,kBACT,EAAE,QAAQ,OAAO,MAAO,EAAI,oBAAqB,KAAK,WAQlE,GAAa,MAAO,QACpB,EAAa,MAAO,SACpB,EAAa,SAAU,QACvB,EAAa,SAAU,UAGxB,iBAAkB,WACjB,KAAK,WAAW,YAAY,KAAK,sBASnC,EAAE,QAAQ,KAAO,EAAE,QAAQ,QAC1B,SACC,SAAU,UACV,WAAY,IACZ,YAAa,UACb,YAAa,IACb,aAAc,YAGf,MAAO,SAAU,GAChB,GAAI,GAAW,uBACX,EAAY,EAAE,QAAQ,OAAO,MAAO,EAAW,eAcnD,OAZA,MAAK,KAAO,EAEZ,KAAK,cAAiB,KAAK,cACnB,KAAK,QAAQ,WAAY,KAAK,QAAQ,YACtC,EAAW,MAAQ,EAAW,KAAK,QAAU,MACrD,KAAK,eAAiB,KAAK,cACnB,KAAK,QAAQ,YAAa,KAAK,QAAQ,aACvC,EAAW,OAAQ,EAAW,KAAK,SAAU,MAErD,KAAK,kBACL,EAAI,GAAG,2BAA4B,KAAK,gBAAiB,MAElD,GAGR,SAAU,SAAU,GACnB,EAAI,IAAI,2BAA4B,KAAK,gBAAiB,OAG3D,QAAS,SAAU,GAClB,KAAK,KAAK,OAAO,EAAE,SAAW,EAAI,IAGnC,SAAU,SAAU,GACnB,KAAK,KAAK,QAAQ,EAAE,SAAW,EAAI,IAGpC,cAAe,SAAU,EAAM,EAAO,EAAW,EAAW,EAAI,GAC/D,GAAI,GAAO,EAAE,QAAQ,OAAO,IAAK,EAAW,EAC5C,GAAK,UAAY,EACjB,EAAK,KAAO,IACZ,EAAK,MAAQ,CAEb,IAAI,GAAO,EAAE,SAAS,eAUtB,OARA,GAAE,SACG,GAAG,EAAM,QAAS,GAClB,GAAG,EAAM,YAAa,GACtB,GAAG,EAAM,WAAY,GACrB,GAAG,EAAM,QAAS,EAAE,SAAS,gBAC7B,GAAG,EAAM,QAAS,EAAI,GACtB,GAAG,EAAM,QAAS,KAAK,cAAe,GAEpC,GAGR,gBAAiB,WAChB,GAAI,GAAM,KAAK,KACd,EAAY,kBAEb,GAAE,QAAQ,YAAY,KAAK,cAAe,GAC1C,EAAE,QAAQ,YAAY,KAAK,eAAgB,GAEvC,EAAI,QAAU,EAAI,cACrB,EAAE,QAAQ,SAAS,KAAK,eAAgB,GAErC,EAAI,QAAU,EAAI,cACrB,EAAE,QAAQ,SAAS,KAAK,cAAe,MAK1C,EAAE,IAAI,cACL,aAAa,IAGd,EAAE,IAAI,YAAY,WACb,KAAK,QAAQ,cAChB,KAAK,YAAc,GAAI,GAAE,QAAQ,KACjC,KAAK,WAAW,KAAK,gBAIvB,EAAE,QAAQ,KAAO,SAAU,GAC1B,MAAO,IAAI,GAAE,QAAQ,KAAK,IAS3B,EAAE,QAAQ,YAAc,EAAE,QAAQ,QACjC,SACC,SAAU,cACV,OAAQ,wFAGT,WAAY,SAAU,GACrB,EAAE,WAAW,KAAM,GAEnB,KAAK,kBAGN,MAAO,SAAU,GAChB,KAAK,WAAa,EAAE,QAAQ,OAAO,MAAO,+BAC1C,EAAE,SAAS,wBAAwB,KAAK,WAExC,KAAK,GAAI,KAAK,GAAI,QACb,EAAI,QAAQ,GAAG,gBAClB,KAAK,eAAe,EAAI,QAAQ,GAAG,iBAUrC,OANA,GACK,GAAG,WAAY,KAAK,YAAa,MACjC,GAAG,cAAe,KAAK,eAAgB,MAE5C,KAAK,UAEE,KAAK,YAGb,SAAU,SAAU,GACnB,EACK,IAAI,WAAY,KAAK,aACrB,IAAI,cAAe,KAAK,iBAI9B,UAAW,SAAU,GAGpB,MAFA,MAAK,QAAQ,OAAS,EACtB,KAAK,UACE,MAGR,eAAgB,SAAU,GACzB,MAAK,IAEA,KAAK,cAAc,KACvB,KAAK,cAAc,GAAQ,GAE5B,KAAK,cAAc,KAEnB,KAAK,UAEE,MATP,QAYD,kBAAmB,SAAU,GAC5B,MAAK,IAED,KAAK,cAAc,KACtB,KAAK,cAAc,KACnB,KAAK,WAGC,MAPP,QAUD,QAAS,WACR,GAAK,KAAK,KAAV,CAEA,GAAI,KAEJ,KAAK,GAAI,KAAK,MAAK,cACd,KAAK,cAAc,IACtB,EAAQ,KAAK,EAIf,IAAI,KAEA,MAAK,QAAQ,QAChB,EAAiB,KAAK,KAAK,QAAQ,QAEhC,EAAQ,QACX,EAAiB,KAAK,EAAQ,KAAK,OAGpC,KAAK,WAAW,UAAY,EAAiB,KAAK,SAGnD,YAAa,SAAU,GAClB,EAAE,MAAM,gBACX,KAAK,eAAe,EAAE,MAAM,mBAI9B,eAAgB,SAAU,GACrB,EAAE,MAAM,gBACX,KAAK,kBAAkB,EAAE,MAAM,qBAKlC,EAAE,IAAI,cACL,oBAAoB,IAGrB,EAAE,IAAI,YAAY,WACb,KAAK,QAAQ,qBAChB,KAAK,oBAAqB,GAAK,GAAE,QAAQ,aAAe,MAAM,SAIhE,EAAE,QAAQ,YAAc,SAAU,GACjC,MAAO,IAAI,GAAE,QAAQ,YAAY,IAQlC,EAAE,QAAQ,MAAQ,EAAE,QAAQ,QAC3B,SACC,SAAU,aACV,SAAU,IACV,QAAQ,EACR,UAAU,EACV,gBAAgB,GAGjB,MAAO,SAAU,GAChB,KAAK,KAAO,CAEZ,IAAI,GAAY,wBACZ,EAAY,EAAE,QAAQ,OAAO,MAAO,GACpC,EAAU,KAAK,OAOnB,OALA,MAAK,WAAW,EAAS,EAAW,GAEpC,EAAI,GAAG,EAAQ,eAAiB,UAAY,OAAQ,KAAK,QAAS,MAClE,EAAI,UAAU,KAAK,QAAS,MAErB,GAGR,SAAU,SAAU,GACnB,EAAI,IAAI,KAAK,QAAQ,eAAiB,UAAY,OAAQ,KAAK,QAAS,OAGzE,WAAY,SAAU,EAAS,EAAW,GACrC,EAAQ,SACX,KAAK,QAAU,EAAE,QAAQ,OAAO,MAAO,EAAY,QAAS,IAEzD,EAAQ,WACX,KAAK,QAAU,EAAE,QAAQ,OAAO,MAAO,EAAY,QAAS,KAI9D,QAAS,WACR,GAAI,GAAS,KAAK,KAAK,YACnB,EAAY,EAAO,YAAY,IAC/B,EAAkB,QAAU,KAAK,GAAK,KAAK,IAAI,EAAY,KAAK,GAAK,KACrE,EAAO,GAAmB,EAAO,eAAe,IAAM,EAAO,eAAe,KAAO,IAEnF,EAAO,KAAK,KAAK,UACjB,EAAU,KAAK,QACf,EAAY,CAEZ,GAAK,EAAI,IACZ,EAAY,GAAQ,EAAQ,SAAW,EAAK,IAG7C,KAAK,cAAc,EAAS,IAG7B,cAAe,SAAU,EAAS,GAC7B,EAAQ,QAAU,GACrB,KAAK,cAAc,GAGhB,EAAQ,UAAY,GACvB,KAAK,gBAAgB,IAIvB,cAAe,SAAU,GACxB,GAAI,GAAS,KAAK,aAAa,EAE/B,MAAK,QAAQ,MAAM,MAAQ,KAAK,eAAe,EAAS,GAAa,KACrE,KAAK,QAAQ,UAAqB,IAAT,EAAgB,EAAS,KAAQ,EAAS,IAAQ,OAG5E,gBAAiB,SAAU,GAC1B,GAEI,GAAU,EAAO,EAFjB,EAAsB,UAAZ,EACV,EAAQ,KAAK,OAGb,GAAU,MACb,EAAW,EAAU,KACrB,EAAQ,KAAK,aAAa,GAE1B,EAAM,MAAM,MAAQ,KAAK,eAAe,EAAQ,GAAY,KAC5D,EAAM,UAAY,EAAQ,QAG1B,EAAO,KAAK,aAAa,GAEzB,EAAM,MAAM,MAAQ,KAAK,eAAe,EAAO,GAAW,KAC1D,EAAM,UAAY,EAAO,QAI3B,eAAgB,SAAU,GACzB,MAAO,MAAK,MAAM,KAAK,QAAQ,SAAW,GAAS,IAGpD,aAAc,SAAU,GACvB,GAAI,GAAQ,KAAK,IAAI,IAAK,KAAK,MAAM,GAAO,IAAI,OAAS,GACrD,EAAI,EAAM,CAId,OAFA,GAAI,GAAK,GAAK,GAAK,GAAK,EAAI,EAAI,GAAK,EAAI,EAAI,GAAK,EAAI,EAAI,EAEnD,EAAQ,KAIjB,EAAE,QAAQ,MAAQ,SAAU,GAC3B,MAAO,IAAI,GAAE,QAAQ,MAAM,IAQ5B,EAAE,QAAQ,OAAS,EAAE,QAAQ,QAC5B,SACC,WAAW,EACX,SAAU,WACV,YAAY,GAGb,WAAY,SAAU,EAAY,EAAU,GAC3C,EAAE,WAAW,KAAM,GAEnB,KAAK,WACL,KAAK,YAAc,EACnB,KAAK,gBAAiB,CAEtB,KAAK,GAAI,KAAK,GACb,KAAK,UAAU,EAAW,GAAI,EAG/B,KAAK,IAAK,GACT,KAAK,UAAU,EAAS,GAAI,GAAG,IAIjC,MAAO,SAAU,GAQhB,MAPA,MAAK,cACL,KAAK,UAEL,EACK,GAAG,WAAY,KAAK,eAAgB,MACpC,GAAG,cAAe,KAAK,eAAgB,MAErC,KAAK,YAGb,SAAU,SAAU,GACnB,EACK,IAAI,WAAY,KAAK,eAAgB,MACrC,IAAI,cAAe,KAAK,eAAgB,OAG9C,aAAc,SAAU,EAAO,GAG9B,MAFA,MAAK,UAAU,EAAO,GACtB,KAAK,UACE,MAGR,WAAY,SAAU,EAAO,GAG5B,MAFA,MAAK,UAAU,EAAO,GAAM,GAC5B,KAAK,UACE,MAGR,YAAa,SAAU,GACtB,GAAI,GAAK,EAAE,MAAM,EAGjB,cAFO,MAAK,QAAQ,GACpB,KAAK,UACE,MAGR,YAAa,WACZ,GAAI,GAAY,yBACZ,EAAY,KAAK,WAAa,EAAE,QAAQ,OAAO,MAAO,EAG1D,GAAU,aAAa,iBAAiB,GAEnC,EAAE,QAAQ,MAKd,EAAE,SAAS,GAAG,EAAW,QAAS,EAAE,SAAS,iBAJ7C,EAAE,SACA,wBAAwB,GACxB,yBAAyB,EAK5B,IAAI,GAAO,KAAK,MAAQ,EAAE,QAAQ,OAAO,OAAQ,EAAY,QAE7D,IAAI,KAAK,QAAQ,UAAW,CACtB,EAAE,QAAQ,SACd,EAAE,SACG,GAAG,EAAW,YAAa,KAAK,QAAS,MACzC,GAAG,EAAW,WAAY,KAAK,UAAW,KAEhD,IAAI,GAAO,KAAK,YAAc,EAAE,QAAQ,OAAO,IAAK,EAAY,UAAW,EAC3E,GAAK,KAAO,IACZ,EAAK,MAAQ,SAET,EAAE,QAAQ,MACb,EAAE,SACG,GAAG,EAAM,QAAS,EAAE,SAAS,MAC7B,GAAG,EAAM,QAAS,KAAK,QAAS,MAGrC,EAAE,SAAS,GAAG,EAAM,QAAS,KAAK,QAAS,MAG5C,EAAE,SAAS,GAAG,EAAM,QAAS,WAC5B,WAAW,EAAE,KAAK,KAAK,cAAe,MAAO,IAC3C,MAEH,KAAK,KAAK,GAAG,QAAS,KAAK,UAAW,UAGtC,MAAK,SAGN,MAAK,gBAAkB,EAAE,QAAQ,OAAO,MAAO,EAAY,QAAS,GACpE,KAAK,WAAa,EAAE,QAAQ,OAAO,MAAO,EAAY,aAAc,GACpE,KAAK,cAAgB,EAAE,QAAQ,OAAO,MAAO,EAAY,YAAa,GAEtE,EAAU,YAAY,IAGvB,UAAW,SAAU,EAAO,EAAM,GACjC,GAAI,GAAK,EAAE,MAAM,EAEjB,MAAK,QAAQ,IACZ,MAAO,EACP,KAAM,EACN,QAAS,GAGN,KAAK,QAAQ,YAAc,EAAM,YACpC,KAAK,cACL,EAAM,UAAU,KAAK,eAIvB,QAAS,WACR,GAAK,KAAK,WAAV,CAIA,KAAK,gBAAgB,UAAY,GACjC,KAAK,cAAc,UAAY,EAE/B,IAEI,GAAG,EAFH,GAAoB,EACpB,GAAkB,CAGtB,KAAK,IAAK,MAAK,QACd,EAAM,KAAK,QAAQ,GACnB,KAAK,SAAS,GACd,EAAkB,GAAmB,EAAI,QACzC,EAAoB,IAAsB,EAAI,OAG/C,MAAK,WAAW,MAAM,QAAU,GAAmB,EAAoB,GAAK,SAG7E,eAAgB,SAAU,GACzB,GAAI,GAAM,KAAK,QAAQ,EAAE,MAAM,EAAE,OAEjC,IAAK,EAAL,CAEK,KAAK,gBACT,KAAK,SAGN,IAAI,GAAO,EAAI,QACF,aAAX,EAAE,KAAsB,aAAe,gBAC5B,aAAX,EAAE,KAAsB,kBAAoB,IAE1C,IACH,KAAK,KAAK,KAAK,EAAM,KAKvB,oBAAqB,SAAU,EAAM,GAEpC,GAAI,GAAY,qEAAuE,EAAO,GAC1F,KACH,GAAa,sBAEd,GAAa,IAEb,IAAI,GAAgB,EAAS,cAAc,MAG3C,OAFA,GAAc,UAAY,EAEnB,EAAc,YAGtB,SAAU,SAAU,GACnB,GACI,GADA,EAAQ,EAAS,cAAc,SAE/B,EAAU,KAAK,KAAK,SAAS,EAAI,MAEjC,GAAI,SACP,EAAQ,EAAS,cAAc,SAC/B,EAAM,KAAO,WACb,EAAM,UAAY,kCAClB,EAAM,eAAiB,GAEvB,EAAQ,KAAK,oBAAoB,sBAAuB,GAGzD,EAAM,QAAU,EAAE,MAAM,EAAI,OAE5B,EAAE,SAAS,GAAG,EAAO,QAAS,KAAK,cAAe,KAElD,IAAI,GAAO,EAAS,cAAc,OAClC,GAAK,UAAY,IAAM,EAAI,KAE3B,EAAM,YAAY,GAClB,EAAM,YAAY,EAElB,IAAI,GAAY,EAAI,QAAU,KAAK,cAAgB,KAAK,eAGxD,OAFA,GAAU,YAAY,GAEf,GAGR,cAAe,WACd,GAAI,GAAG,EAAO,EACV,EAAS,KAAK,MAAM,qBAAqB,SACzC,EAAY,EAAO,MAIvB,KAFA,KAAK,gBAAiB,EAEjB,EAAI,EAAO,EAAJ,EAAe,IAC1B,EAAQ,EAAO,GACf,EAAM,KAAK,QAAQ,EAAM,SAErB,EAAM,UAAY,KAAK,KAAK,SAAS,EAAI,OAC5C,KAAK,KAAK,SAAS,EAAI,QAEZ,EAAM,SAAW,KAAK,KAAK,SAAS,EAAI,QACnD,KAAK,KAAK,YAAY,EAAI,MAI5B,MAAK,gBAAiB,EAEtB,KAAK,iBAGN,QAAS,WACR,EAAE,QAAQ,SAAS,KAAK,WAAY,oCAGrC,UAAW,WACV,KAAK,WAAW,UAAY,KAAK,WAAW,UAAU,QAAQ,mCAAoC,OAIpG,EAAE,QAAQ,OAAS,SAAU,EAAY,EAAU,GAClD,MAAO,IAAI,GAAE,QAAQ,OAAO,EAAY,EAAU,IAQnD,EAAE,aAAe,EAAE,MAAM,QACxB,SAAU,EAAE,MAAM,OAElB,IAAK,SAAU,EAAI,EAAQ,EAAU,GACpC,KAAK,OAEL,KAAK,IAAM,EACX,KAAK,aAAc,EACnB,KAAK,QAAU,EAEf,KAAK,KAAK,SAEV,EAAG,MAAM,EAAE,QAAQ,YAAc,QAAU,GAAY,KAC/C,uBAAyB,GAAiB,IAAO,MAEzD,EAAE,SAAS,GAAG,EAAI,EAAE,QAAQ,eAAgB,KAAK,iBAAkB,MACnE,EAAE,QAAQ,YAAY,EAAI,GAG1B,EAAE,KAAK,QAAQ,EAAG,aAGlB,KAAK,WAAa,YAAY,EAAE,KAAK,KAAK,QAAS,MAAO,KAG3D,KAAM,WACA,KAAK,cAKV,EAAE,QAAQ,YAAY,KAAK,IAAK,KAAK,WACrC,KAAK,mBACL,EAAE,KAAK,QAAQ,KAAK,IAAI,eAGzB,QAAS,WACR,GAAI,GAAU,KAAK,SACnB,OAAK,IAML,KAAK,IAAI,aAAe,MAExB,MAAK,KAAK,aAPT,MAAK,oBAaP,aAAc,qDAEd,QAAS,WACR,GAAI,GAAM,EAAK,EACX,EAAK,KAAK,IACV,EAAQ,EAAO,iBAAiB,EAEpC,IAAI,EAAE,QAAQ,MAAO,CAEpB,GADA,EAAU,EAAM,EAAE,QAAQ,WAAW,MAAM,KAAK,eAC3C,EAAW,MAChB,GAAO,WAAW,EAAQ,IAC1B,EAAO,WAAW,EAAQ,QAE1B,GAAO,WAAW,EAAM,MACxB,EAAO,WAAW,EAAM,IAGzB,OAAO,IAAI,GAAE,MAAM,EAAM,GAAK,IAG/B,iBAAkB,WACjB,EAAE,SAAS,IAAI,KAAK,IAAK,EAAE,QAAQ,eAAgB,KAAK,iBAAkB,MAErE,KAAK,cACV,KAAK,aAAc,EAEnB,KAAK,IAAI,MAAM,EAAE,QAAQ,YAAc,GAIvC,KAAK,IAAI,aAAe,KAAK,QAE7B,cAAc,KAAK,YAEnB,KAAK,KAAK,QAAQ,KAAK,WAUzB,EAAE,IAAI,SAEL,QAAS,SAAU,EAAQ,EAAM,GAUhC,GARA,EAAO,IAAS,EAAY,KAAK,MAAQ,KAAK,WAAW,GACzD,EAAS,KAAK,aAAa,EAAE,OAAO,GAAS,EAAM,KAAK,QAAQ,WAChE,EAAU,MAEN,KAAK,UACR,KAAK,SAAS,OAGX,KAAK,UAAY,EAAQ,OAAS,KAAY,EAAM,CAEnD,EAAQ,UAAY,IACvB,EAAQ,KAAO,EAAE,QAAQ,QAAS,EAAQ,SAAU,EAAQ,MAC5D,EAAQ,IAAM,EAAE,QAAQ,QAAS,EAAQ,SAAU,EAAQ,KAI5D,IAAI,GAAY,KAAK,QAAU,EAC9B,KAAK,kBAAoB,KAAK,iBAAiB,EAAQ,EAAM,EAAQ,MACrE,KAAK,gBAAgB,EAAQ,EAAQ,IAEtC,IAAI,EAGH,MADA,cAAa,KAAK,YACX,KAOT,MAFA,MAAK,WAAW,EAAQ,GAEjB,MAGR,MAAO,SAAU,EAAQ,GAIxB,GAHA,EAAS,EAAE,MAAM,GAAQ,QACzB,EAAU,OAEL,EAAO,IAAM,EAAO,EACxB,MAAO,KAkBR,IAfK,KAAK,WACT,KAAK,SAAW,GAAI,GAAE,aAEtB,KAAK,SAAS,IACb,KAAQ,KAAK,qBACb,IAAO,KAAK,qBACV,OAIC,EAAQ,aACZ,KAAK,KAAK,aAIP,EAAQ,WAAY,EAAO,CAC9B,EAAE,QAAQ,SAAS,KAAK,SAAU,mBAElC,IAAI,GAAS,KAAK,iBAAiB,SAAS,EAC5C,MAAK,SAAS,IAAI,KAAK,SAAU,EAAQ,EAAQ,UAAY,IAAM,EAAQ,mBAE3E,MAAK,UAAU,GACf,KAAK,KAAK,QAAQ,KAAK,UAGxB,OAAO,OAGR,qBAAsB,WACrB,KAAK,KAAK,SAGX,oBAAqB,WACpB,EAAE,QAAQ,YAAY,KAAK,SAAU,oBACrC,KAAK,KAAK,YAGX,gBAAiB,SAAU,EAAQ,GAElC,GAAI,GAAS,KAAK,iBAAiB,GAAQ,QAG3C,QAAK,GAAW,EAAQ,YAAa,GAAS,KAAK,UAAU,SAAS,IAEtE,KAAK,MAAM,EAAQ,IAEZ,IAJiF,KAc1F,EAAE,aAAe,EAAE,QAAQ,WAAa,EAAE,aAAe,EAAE,aAAa,QAEvE,IAAK,SAAU,EAAI,EAAQ,EAAU,GACpC,KAAK,OAEL,KAAK,IAAM,EACX,KAAK,aAAc,EACnB,KAAK,UAAY,GAAY,IAC7B,KAAK,cAAgB,EAAI,KAAK,IAAI,GAAiB,GAAK,IAExD,KAAK,UAAY,EAAE,QAAQ,YAAY,GACvC,KAAK,QAAU,EAAO,SAAS,KAAK,WACpC,KAAK,YAAc,GAAI,MAEvB,KAAK,KAAK,SAEV,KAAK,YAGN,KAAM,WACA,KAAK,cAEV,KAAK,QACL,KAAK,cAGN,SAAU,WAET,KAAK,QAAU,EAAE,KAAK,iBAAiB,KAAK,SAAU,MACtD,KAAK,SAGN,MAAO,WACN,GAAI,IAAY,GAAI,MAAU,KAAK,WAC/B,EAA4B,IAAjB,KAAK,SAEN,GAAV,EACH,KAAK,UAAU,KAAK,SAAS,EAAU,KAEvC,KAAK,UAAU,GACf,KAAK,cAIP,UAAW,SAAU,GACpB,GAAI,GAAM,KAAK,UAAU,IAAI,KAAK,QAAQ,WAAW,GACrD,GAAE,QAAQ,YAAY,KAAK,IAAK,GAEhC,KAAK,KAAK,SAGX,UAAW,WACV,EAAE,KAAK,gBAAgB,KAAK,SAE5B,KAAK,aAAc,EACnB,KAAK,KAAK,QAGX,SAAU,SAAU,GACnB,MAAO,GAAI,KAAK,IAAI,EAAI,EAAG,KAAK,kBASlC,EAAE,IAAI,cACL,eAAe,EACf,uBAAwB,IAGrB,EAAE,QAAQ,YAEb,EAAE,IAAI,YAAY,WAEjB,KAAK,cAAgB,KAAK,QAAQ,eAAiB,EAAE,QAAQ,YAC3D,EAAE,QAAQ,QAAU,EAAE,QAAQ,YAAc,EAAE,QAAQ,YAIpD,KAAK,eACR,EAAE,SAAS,GAAG,KAAK,SAAU,EAAE,QAAQ,eAAgB,KAAK,oBAAqB,QAKpF,EAAE,IAAI,QAAS,EAAE,QAAQ,YAExB,oBAAqB,SAAU,GAC1B,KAAK,gBAAkB,EAAE,aAAa,QAAQ,cAAgB,GACjE,KAAK,wBAIP,kBAAmB,WAClB,OAAQ,KAAK,WAAW,uBAAuB,yBAAyB,QAGzE,iBAAkB,SAAU,EAAQ,EAAM,GAEzC,GAAI,KAAK,eAAkB,OAAO,CAKlC,IAHA,EAAU,OAGL,KAAK,eAAiB,EAAQ,WAAY,GAAS,KAAK,qBACrD,KAAK,IAAI,EAAO,KAAK,OAAS,KAAK,QAAQ,uBAA0B,OAAO,CAGpF,IAAI,GAAQ,KAAK,aAAa,GAC1B,EAAS,KAAK,iBAAiB,GAAQ,UAAU,EAAI,EAAI,GAC5D,EAAS,KAAK,uBAAuB,KAAK,EAG3C,OAAI,GAAQ,WAAY,GAAS,KAAK,UAAU,SAAS,IAEzD,KACK,KAAK,aACL,KAAK,aAEV,KAAK,aAAa,EAAQ,EAAM,EAAQ,EAAO,MAAM,IAE9C,IARoE,GAW5E,aAAc,SAAU,EAAQ,EAAM,EAAQ,EAAO,EAAO,EAAW,GAEjE,IACJ,KAAK,gBAAiB,GAIvB,EAAE,QAAQ,SAAS,KAAK,SAAU,qBAGlC,KAAK,iBAAmB,EACxB,KAAK,eAAiB,EAGlB,EAAE,YACL,EAAE,UAAU,WAAY,GAGzB,EAAE,KAAK,iBAAiB,WACvB,KAAK,KAAK,YACT,OAAQ,EACR,KAAM,EACN,OAAQ,EACR,MAAO,EACP,MAAO,EACP,UAAW,IAGZ,WAAW,EAAE,KAAK,KAAK,qBAAsB,MAAO,MAClD,OAGJ,qBAAsB,WAChB,KAAK,iBAEV,KAAK,gBAAiB,EAEtB,EAAE,QAAQ,YAAY,KAAK,SAAU,qBAErC,EAAE,KAAK,iBAAiB,WACvB,KAAK,WAAW,KAAK,iBAAkB,KAAK,gBAAgB,GAAM,GAE9D,EAAE,YACL,EAAE,UAAU,WAAY,IAEvB,aASL,EAAE,UAAU,SACX,aAAc,SAAU,GAClB,KAAK,aACT,KAAK,YAAa,EAClB,KAAK,mBAGN,IAAI,GAAK,KAAK,UACV,EAAY,EAAE,QAAQ,UACtB,EAAmB,EAAE,MAAQ,EAAE,QAAQ,mBAAmB,EAAE,OAAS,EAAG,MAAM,GAC9E,EAAW,EAAE,QAAQ,eAAe,EAAE,MAAO,EAAE,OAEnD,GAAG,MAAM,GAAa,EAAE,UACtB,EAAW,IAAM,EACjB,EAAmB,IAAM,GAG5B,aAAc,WACb,GAAI,GAAQ,KAAK,eACb,EAAK,KAAK,SAEd,GAAM,MAAM,WAAa,GACzB,EAAM,WAAW,YAAY,GAG7B,EAAE,KAAK,QAAQ,EAAG,YAElB,IAAI,GAAO,KAAK,KAAK,WACjB,EAAO,KAAK,QAAQ,SAAW,EAAO,KAAK,QAAQ,UACtD,KAAK,iBAGN,KAAK,YAAa,GAGnB,eAAgB,WACf,GAAI,GAAM,KAAK,MAEX,GAAQ,EAAI,gBAAmB,EAAI,UAAU,WAChD,KAAK,UAAU,UAAY,GAC3B,KAAK,UAAU,MAAM,EAAE,QAAQ,WAAa,KAI9C,iBAAkB,WAEjB,GAAI,GAAQ,KAAK,eACb,EAAK,KAAK,UAKV,EAAW,KAAK,0BAA0B,GAC1C,EAAc,KAAK,0BAA0B,EAEjD,OAAI,IAAM,EAAW,IAAqB,GAAd,GAE3B,EAAM,MAAM,WAAa,aACzB,MAAK,mBAAmB,KAKzB,EAAG,MAAM,WAAa,SACtB,EAAG,MAAM,EAAE,QAAQ,WAAa,GAGhC,KAAK,eAAiB,EACtB,EAAK,KAAK,UAAY,EAEtB,KAAK,mBAAmB,OAGxB,cAAa,KAAK,uBAGnB,0BAA2B,SAAU,GACpC,GACI,GAAG,EADH,EAAQ,EAAU,qBAAqB,OAC/B,EAAQ,CAEpB,KAAK,EAAI,EAAG,EAAM,EAAM,OAAY,EAAJ,EAAS,IACpC,EAAM,GAAG,UACZ,GAGF,OAAO,GAAQ,GAIhB,mBAAoB,SAAU,GAC7B,GACI,GAAG,EAAK,EADR,EAAQ,MAAM,UAAU,MAAM,KAAK,EAAU,qBAAqB,OAGtE,KAAK,EAAI,EAAG,EAAM,EAAM,OAAY,EAAJ,EAAS,IACxC,EAAO,EAAM,GAER,EAAK,WACT,EAAK,OAAS,EAAE,KAAK,QACrB,EAAK,QAAU,EAAE,KAAK,QACtB,EAAK,IAAM,EAAE,KAAK,cAElB,EAAK,WAAW,YAAY,OAWhC,EAAE,IAAI,SACL,uBACC,OAAO,EACP,SAAS,EACT,QAAS,EAAA,EACT,QAAS,IACT,WAAY,EACZ,oBAAoB,GAGrB,OAAQ,SAAqB,GAI5B,GAFA,EAAU,KAAK,eAAiB,EAAE,OAAO,KAAK,sBAAuB,IAEhE,UAAU,YAKd,MAJA,MAAK,yBACJ,KAAM,EACN,QAAS,+BAEH,IAGR,IAAI,GAAa,EAAE,KAAK,KAAK,2BAA4B,MACxD,EAAU,EAAE,KAAK,KAAK,wBAAyB,KAQhD,OANI,GAAQ,MACX,KAAK,iBACG,UAAU,YAAY,cAAc,EAAY,EAAS,GAEjE,UAAU,YAAY,mBAAmB,EAAY,EAAS,GAExD,MAGR,WAAY,WAOX,MANI,WAAU,aACb,UAAU,YAAY,WAAW,KAAK,kBAEnC,KAAK,iBACR,KAAK,eAAe,SAAU,GAExB,MAGR,wBAAyB,SAAU,GAClC,GAAI,GAAI,EAAM,KACV,EAAU,EAAM,UACD,IAAN,EAAU,oBACJ,IAAN,EAAU,uBAAyB,UAE5C,MAAK,eAAe,UAAY,KAAK,SACxC,KAAK,WAGN,KAAK,KAAK,iBACT,KAAM,EACN,QAAS,sBAAwB,EAAU,OAI7C,2BAA4B,SAAU,GACrC,GAAI,GAAM,EAAI,OAAO,SACjB,EAAM,EAAI,OAAO,UACjB,EAAS,GAAI,GAAE,OAAO,EAAK,GAE3B,EAAc,IAAM,EAAI,OAAO,SAAW,SAC1C,EAAc,EAAc,KAAK,IAAI,EAAE,OAAO,WAAa,GAE3D,EAAS,EAAE,cACF,EAAM,EAAa,EAAM,IACzB,EAAM,EAAa,EAAM,IAElC,EAAU,KAAK,cAEnB,IAAI,EAAQ,QAAS,CACpB,GAAI,GAAO,KAAK,IAAI,KAAK,cAAc,GAAS,EAAQ,QACxD,MAAK,QAAQ,EAAQ,GAGtB,GAAI,IACH,OAAQ,EACR,OAAQ,EACR,UAAW,EAAI,UAGhB,KAAK,GAAI,KAAK,GAAI,OACY,gBAAlB,GAAI,OAAO,KACrB,EAAK,GAAK,EAAI,OAAO,GAIvB,MAAK,KAAK,gBAAiB,OAK3B,OAAQ;UJ58RA,CAAA,AAAC,OAAO,CAAhB,AAAgB,AAAC,AACjB;ADDF,QCCE,AAAM,AACN,SDFF,AAAE,mBAAF,AAAqB,GAArB,AAAwB;AMaxB,INbsC,AACpC,AAAE,AACF,IMWO,UAAS,CLXhB,AAAiB,AACjB,EDHoC,AACpC,AMaA,GAAI,IAAO,GAAI,OAAO,UAClB,EAAK,KAAK,IAAI,EAAG,IAAM,EAAO,OAC9B,EAAM,WAAW,EAAI,EAEzB,OADA,MAAO,EACA,EAjBT,QAAU,OAAO,QAAU,OAAO,uBAC7B,OAAO,6BACP,OAAO,0BACP,OAAO,wBACP,OAAO,yBACP,QAML,IAAI,OAAO,GAAI,OAAO,UAalB,OAAS,OAAO,sBACf,OAAO,4BACP,OAAO,yBACP,OAAO,uBACP,OAAO,wBACP,OAAO,YAEZ,SAAQ,OAAS,SAAS,GACxB,OAAO,KAAK,OAAQ;mBN/BpB,AAAE,GCHA,AAAM,AAIR,AAAoB,gBDDpB,AAAqB,YAFe,AAEpC,AAAiC,AACjC;CCJQ,CAAN,iBDIF,AAAE,oBAAF,AAAsB,SAHc,AAGpC,AAA+B,AAC/B;ADJgB,AGIlB,CKPA,GLOI,GHEF,AAAK,GQTI,EAAM,CLOJ,EKNX,IPME,EAAF,AAAE,AAAE,GDEQ,AAAC,GQFS,EPAtB,AAAY,CEAV,AAAS,AAAE,QFJuB,AAIpC,AAAqB,AACrB,QODW,SAAyB,OAAO,IACzC,OAAO,GAGqB,gBAAZ,UAA0C,gBAAX,QAC/C,OAAO,QAAU,IAGjB,EAAK,aAAe,KAGrB,KAAM,WACT,YAGA,IAAsB,gBAAX,SAIsB,SAA9B,SAAS,kBAAsD,SAAvB,OAAO,aAAgD,SAAtB,QAAQ,UAApF,CAGA,GAAI,GAAS,SAAS,GAElB,MAAwB,SAArB,EAAQ,UAA6B,OAAO,YACxC,EAAQ,wBAAwB,IAAM,OAAO,aAIpD,EAAiB,SAAU,GAAK,MAAS,GAAF,EAAO,EAAE,EAAE,EAAE,GAAK,EAAE,IAAI,EAAE,EAAE,IAAI,EAAE,EAAE,GAAG,GAM9E,EAAW,SAAS,EAAO,EAAK,EAAS,GACzC,MAAI,GAAU,EAAiB,EACxB,GAAS,EAAM,GAAS,EAAe,EAAU,IASxD,EAAe,SAAS,EAAI,EAAU,EAAU,GAChD,EAAW,GAAY,IACvB,EAAU,GAAW,MACrB,IAAI,GAAQ,OAAO,WAEnB,IAAkB,gBAAP,GACT,GAAI,GAAM,SAAS,OAEnB,IAAI,GAAM,EAAO,EAGnB,IAAI,GAAQ,KAAK,MACb,EAAwB,OAAO,uBAC/B,OAAO,0BAA4B,OAAO,6BAC1C,SAAS,GAAI,OAAO,WAAW,EAAI,KAEnC,EAAO,WACP,GAAI,GAAU,KAAK,MAAQ,CACvB,KAAY,OACf,EAAQ,UAAY,EAAS,EAAO,EAAK,EAAS,GAGlD,OAAO,OAAO,EAAG,EAAS,EAAO,EAAK,EAAS,IAG5C,EAAU,EACc,kBAAb,IACP,EAAS,GAGb,EAAsB,GAG9B,MAGA,EAAc,SAAS,GACvB,EAAG,iBAEC,SAAS,OAAS,KAAK,MAAM,OAAO,QAAQ,UAAU,KAAM,KAAM,KAAK,MAK3E,EAAa,SAAS,eAAe,KAAK,KAAK,UAAU,IAAK,IAAK,SAAS,GACxE,SAAS,QAAQ,IAAM,EAAG,MAclC,OARA,UAAS,iBAAiB,mBAAoB,WAE1C,IAAI,GADsE,GAAtE,EAAW,SAAS,iBAAiB,gCACjC,EAAE,EAAS,OAAQ,EAAE,IAAW,IACpC,EAAE,iBAAiB,QAAS,GAAa,KAK1C;ANvGP,UFCI,AAAK,QADa,AAClB,AAAa,AACb,UCHO,EAAA,AAAE,OAAF,AAAS,CCCA,AAAE,KAAK,AACzB,EDFS,AAAiB,OAA1B,SAAA,AAAuC,YALzC,AAAiC,AAAK,AAKpC,AAAmD;CALpB,UDAf,AAMJ,AAAQ,AECpB,AAAS,AACT,MFFoB,AAClB;GADU,cEEZ,AAAe,AACf;ADDF,AEHA,IAAI,KFGJ,AAAS,GCCG,CAAA,AAAC,IAAX,AAAU,AAAK,AACf,ACLe,CFGjB,AAAmB,SAAnB,AAA4B,OEHxB,AAAa,AAAE,GFGmB,AACpC;AEHF,IAAI,EFGE,QCCQ,CDDC,ACCD,AAAC,CCJC,GFGG,ACCjB,AAAY,AAAK,AACjB,cCLE,AAAY,AAAE,IFGC,AAAE,OAAO,WAAW,QAAA,AAAQ,QAAhC,AAAwB,AAAgB,MAAM,WAAW,QAAA,AAAQ,QAD1C,AAChC,AAAS,AAAyD,AAAgB,AACtF;MAAI,SCCS,CAAA,AAAC,CDDC,ECCE,CAAjB,AAAiB,AAAC,AAClB,IDFe,AAAO,WAAW,SAAlB,AAAkB,AAAS,UAFN,AAErB,AAAqC,AACpD;AEHF,OAAA,AAAO,EFGE,CEHT,AAAU,GDIR,AAAW,AACX,ODFkB,SAAA,AAAS,QAH7B,AAAsC,AAGpC,AAAO,AAAW,AAAiB;IEHb,AACtB,AAAE,AACF,EHIA,CAAA,AAAK,YEDL,AAAiB,AACjB,ECNsB,AACtB;WHK6B,GEAjB,CAAA,AAAC,EFAgB,AAAK,EEAlC,AAAY,AAAK,AACjB,WCLS,SAAA,AAAS,eAAe,EAAA,AAAE,OAAF,AAAS,QAF5C,AAAmB,AAAK,AAEtB,AAAiC,AAAiB;AFI7C,CENY,QFMZ,AAAS,IDA8B,EAAA,AAAE,CEChC,CAAA,AAAC,GATb,AAAgB,AASlB,AAAc,AAAI,KFD0B,AAAY,CCAnD,AAA2B,GDdhB,AAcA,AAAuB,AAAK,AAAgB;CER1C,CAAhB,GFQqC,CCCnC,wBAAO,AAAE,wBAAF,AACR;AEHL,GHCkB,MGDlB,AAAS,EFGc,OEHJ,AACjB,CFEqB,AAAQ,QAAR,AAAgB,OAAO,QAAA,AAAQ,QADzC,AACD,AAAkC,AAAgB;ACE9D,GDFY,CADC,CAAA,AAER,CEHC,MAAM,SAAA,AAAS,gBDIF,AAAE,ACJT,AAAyB,KDIX,AACxB,QCLgD,SAAA,AAAS,KADxC,AAC+B,AAAc,AAC9D;MAAI,KDIJ,AAAS,AACT,CDFI,AAAQ,OEHK,CFGb,AAAgB,QEHH,AAAS,GFGK,SAAA,AAAS,EEHvB,AAAuB,OFEtB,AACd,AAA2B,AAAkB,AAC7C,KENa,AAEA,AAAmC,AACpD;ACfF,IAAA,AAAI,KDeF,AAAO,GFGH,AAAQ,IGlBE,CFmBd,AAAe,AACf,ICRiB,AAGjB,AAAmB,AACnB,AChBF,AAAgB,AAAK,KHkBf,AAAsB,aAAtB,AAAmC,sCAAoC,QAAA,AAAQ,QAAR,AAAgB,WAFzE,AAEd,AACA;AGlBN,IAAA,AAAI,EDeE,MDIM,ACJA,CDIA,AAAC,IAAX,AAAU,AAAK,AACf,CEpBgB,GHkBZ,AAAE,EGlBR,AAAkB,AAAK,EDeE,KFGnB,AAAW,EEHQ,AAAO,UFAZ,AAGd,AAAuB,AACvB,IEJmB,AAAqB;MHE5C,CAAA,AAAK,ICJM,AAEJ,AAAW,AAId,AAAO,CEHT,AAAQ,EDIE,CAAA,AAAC,GAJX,AAAe,AAIjB,AAAY,AAAI,CDLE,AACd,MEAmB,EAAC,MAAtB,AAAsB,AAAM,UAA5B,AAAqC,QADQ,AAC7C,AAA6C,AAC7C;CDDe,CAAf,CDDK,EAFI,AAQR,MDJ6B,IGA9B,AAAW,EHAmB,AAAK,GCI7B,AAAC,GAAD,AAAG,CENX,AAA+C,AAE7C,AAAoB,AAEtB,UAJ+C,AAC7C;WFKe,EDJ8B,ACI9B,AAAE,EDJ4B,AAAE,MCIhC,AAAU,IDJoB,AAAY,OAnB3C,AAmBG,AAAuB,AAAK,AAAmB,ACI5B,EAAA,AAAE,QAR7B,AAQH,AAA8B,AAAU;ACElD,GDFU,EDJkC,ACJ/B,AASR,CEHC,MAAM,ODIO,AACjB,MCLuB,OAAA,AAAO,cAAP,AAAqB;GHFzB,QCKN,ACEb,AAAS,AACT,CCLE,AAAQ,EFPC,AASJ,AAAM,AAAG,WEFO,EAAC,MAAtB,AAAsB,AAAM,SAA5B,AAAoC,OADS,AAC7C,AAA2C,AAC3C;GFCK,EATI,AAUR,KAXuC,AACtC,AAAO,AAUH,AACR,ECCA,AAAU,AACV,EDd0C,AAC1C,AEQE,AAAU,SAVd,AAQE,AAA+C,AAE7C,AAAmB,UAF0B,AAC7C;UDMF,AAAQ,AACR,CDHA,AAAS,cAAT,AAAuB,qBAAvB,AAA4C,YAZvC,AAAqC,AAY1C,AAAwD;YCGxD,AAAU,AACV;aALE,AAKF,AAAW;ADDN,AEFP,CDFI,GDIO,EDLT,CAAA,AAAK,2BCKe,CEFtB,AAAS,gBFEa,AAAE,oBAAF,AAAsB;AED5C,SFCsD,EDLpB,CCKvB,AAAqC,AAAM,AAAG,KDLvB,AAAK;AESvC,CDJgD,YDLC,EAAA,AAAE,GESnD,AAAE,OFT+C,AAAY,GES7D,AAAY,IFjCM,AAwBG,AAAuB,AAAK,AAAmB,0EESsB,AACxF;KFV0C,MEU1C,AAAS,AACT;GFXmB,YESrB,AAA0F;GAA1F,AAMG,MANH,AAMS;;AAET,SAAA,AAAS,WAAT,AAAqB,GAAG,AACtB;MAAI,EAAA,AAAE,OAAO,EAAA,AAAE,KAAK,AAClB;QAAI,kCAAgC,EAAA,AAAE,cAAS,EAAA,AAAE,OAD/B,AACd,AACJ;sBAAA,AAAE,OAAO,CAAC,EAAA,AAAE,KAAK,EAAjB,AAAiB,AAAE,MAAM,EAAC,MAA1B,AAA0B,AAAM,iBAAhC,AAAgD,MAAhD,AAAsD,KAAtD,AAA2D,UAF7D,AAAoB,AAElB,AAAqE;MFbvE,CAAA,AAAK,EEcE,AACL,aFfQ,AAAC,OAAD,AAAQ;UAChB,AAAK,EEcL,AAAQ,gBFdO,AACb,mCEauD,EAL7D,AACE,AAGO,AACL,AAAyD,AAAE;QFbzD,AAAE,oBAAF,AAAsB,OAAtB,AAA6B,IADhB,AACb,AAAiC,AACjC;QAAA,AAAE,iBAAF,AAAmB,OAAnB,AAA0B,IAlCd,AA+BN,AAAe,AACvB,AAAU,AAAK,AAEb,AAA8B;KAFtB,EADa,AACvB;AEkBJ,GFnBY,CEmBZ,AAAI,OAAO,AACT;WAAA,AAAS,AACT;WAAA,AAAS,AACT;SAHF,AAGE,AAAO;;;AAGT,IAAA,AAAI,EFdF,CAAA,AAAK,AEcP,AAAO,gBFdM,AAAC,OAAD,AAAQ,OEcQ,AAE3B;WFhB0B,MAAA,AAAK;MEgB3B,EAAA,AAAE,KFhBmC,EAAA,AAAE,IEgBvC,AAAa,QAAQ,EAAA,AAAE,MFhBc,AAAsB,KEgBtC,AAAa,EFhBG,AAA6B,IA1CxE,AAAkB,AA0CL,AAAyB,AAAK,AAAiC,EEgB5B,EAAA,AAAE,YAAY,CAAA,AAAC,SAAS,EAAA,AAAE,YAAY,CAAA,AAAC;KFhBjD,iBEiBlC,AAAE,OAAO,EAAA,AAAE,QAAX,AAAmB,KAAnB,AAAwB,cAAxB,AAAsC,MADmD,AACzF,AAA4C,AAC5C;GFlBS,mBEkBT,AAAE,OAAO,EAAA,AAAE,QAAQ,EAAC,MAApB,AAAoB,AAAM,gBAA1B,AAAyC,MAFgD,AAEzF,AAA+C,AAC/C;QAAA,AAAI,MAAM,EALd,AAAwB,AAEtB,AAA2F,AAGzF,AAAU,AAAE,QAH6E,AACzF;;AFdJ,CEWwB,KFXxB,AAAM,YAAY,MAAA,AAAM;;AAExB,AEkBO,IFlBH,AEkBO,aFlBP,AAAI,gCEkBG,AAAc;MFjBnB,GEiB0B,IAAA,AAAI,MFjBjB,EEiBM,AAAO,AAAY,EFlBxB,AACd,AAAa,AAAI,AACrB;CEgBuB,KFhBnB,SAAA,AAAS,UAAU,AACrB;AEgBG,IAAI,WFhBP,AAAW,KADb,AAAuB,AACrB,AAAgB,iCEgBT,AAAgB;SFflB,AACL,AEc6B,IAAA,AAAI,GAAJ,AAAO,iBAAb,AAAM,AAAwB;CAA9B,cFdvB,AAAW,0CAAQ,SAAA,AAAS,iBAH9B,AAEO,AACL,AAAmB,AAA0B,AAE/C;;SAPM,AAAY,AAOlB,AAAO,WAPW,AAClB;CADM;;kBAUO",
  "file": "generated.js",
  "sourceRoot": "",
  "sourcesContent": [
    "(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})",
    "/**\n* Create a new array like object of dom elements\n*/\nfunction Query () {\n  /**\n  * Apply a function to every element in collection\n  * @param {Function} fn Function to apply to every element\n  * @return Query\n  */\n  this.each = (fn) => {\n    this.forEach(fn)\n    return this\n  }\n  /**\n  * Add a class to selected elements\n  * @param {String} className The class name to add\n  */\n  this.addClass = className => this.each(e => e.classList.add(className))\n  /**\n  * Remove a class from selected elements\n  * @param {String} className The class name to remove\n  */\n  this.removeClass = className => this.each(e => e.classList.remove(className))\n  /**\n  * Toggle a class from selected elements\n  * @param {String} className The class name to toggle\n  */\n  this.toggleClass = className => this.each(e => e.classList.toggle(className))\n  /**\n  * Attach an event listener with a callback to the selected elements\n  * Automatically removes listner if it already exists to avoid duplicates\n  * @param {String}   event    Name of event, eg. \"click\", \"mouseover\", etc...\n  * @param {Function} callback The function to call when the event is triggered\n  */\n  this.on = (event, fn) => {\n    this.each(e => {\n      e.removeEventListener(event, fn, false)\n      e.addEventListener(event, fn, false)\n    })\n  }\n  /**\n  * Remove an event listener with a callback to the selected elements\n  * @param {String}   event    Name of event, eg. \"click\", \"mouseover\", etc...\n  * @param {Function} callback The function to call when the event is triggered\n  */\n  this.off = (event, fn) => this.each(e => e.removeEventListener(event, fn, false))\n}\n\nQuery.prototype = Array.prototype\n\nlet $ = selector => {\n  var collection = new Query()\n  if (selector.nodeType) {\n    collection.push(selector)\n  } else {\n    collection.push(...document.querySelectorAll(selector))\n  }\n  return collection\n}\n\nexport default $\n",
    "import $ from '../lib/$'\nimport L from 'leaflet'\n\n$('.js-list-toggle').on('click', e => {\n  e.preventDefault()\n  $('.js-list-toggle').removeClass('active')\n  $('.js-list-content').addClass('hidden')\n  $(e.target).addClass('active')\n  $(`.js-${e.target.dataset.sort}-list`).removeClass('hidden')\n})\n\nfunction distance (roaster, location) {\n  var latlng = new L.LatLng(parseFloat(roaster.dataset.lat), parseFloat(roaster.dataset.lng))\n  var distance = latlng.distanceTo(location.latlng) * 0.000621371\n  return parseFloat(distance.toFixed(2))\n}\n\nexport function sortDistanceList (location) {\n  let list = $('.js-by-distance-item')\n    .filter(roaster => roaster.dataset.lat && roaster.dataset.lng)\n    .map(roaster => {\n      roaster.dataset.distance = distance(roaster, location)\n      roaster.querySelector('.distance').innerHTML = `<span class=\"letter\">${roaster.dataset.distance}</span>`\n      $(roaster).removeClass('greyed-out')\n      return roaster\n    })\n    .sort((a,b) => a.dataset.distance - b.dataset.distance)\n    .map(el => el.outerHTML)\n    .join('')\n  document.querySelector('.js-distance-list').innerHTML = list\n}\n\nexport let roasters = $('.js-by-name-item').map(el => el.dataset)\n",
    "import L from 'leaflet'\n\nvar map = L.map('map', {\n  center: [45.52, -122.67],\n  zoom: 13,\n  scrollWheelZoom: false,\n  attributionControl: false\n})\n\nvar roasterMarker = L.icon({\n  iconUrl: '/static/img/roaster-marker-sans.png',\n  iconRetinaUrl: '/static/img/roaster-marker-sans@2x.png',\n  iconSize: [20, 34],\n  iconAnchor: [10, 30],\n  popupAnchor: [0, -34],\n  shadowUrl: '/static/img/shadow@2x.png',\n  shadowRetinaUrl: '/static/img/shadow@2x.png',\n  shadowSize: [18, 10],\n  shadowAnchor: [9, 5]\n})\n\nvar deviceMarker = L.icon({\n  iconUrl: '/static/img/device.png',\n  iconRetinaUrl: '/static/img/device@2x.png',\n  iconSize: [10, 10],\n  iconAnchor: [5, 5]\n})\n\nvar deviceCircle = {\n  \"color\": \"#4DAEFF\",\n  \"stroke\": true,\n  \"fill\": \"#ffffff\",\n  \"weight\": 1,\n  \"opacity\": 1\n}\n\nL.tileLayer('http://{s}.tiles.mapbox.com/v3/financialtimes.map-w7l4lfi8/{z}/{x}/{y}.png', {\n  maxZoom: 18,\n  attribution: `Map data &copy;\n                <a href=\"http://openstreetmap.org\">OpenStreetMap</a> contributors,\n                <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>,\n                Imagery © <a href=\"http://cloudmade.com\">CloudMade</a>`\n}).addTo(map)\n\nfunction addRoaster (r) {\n  if (r.lat && r.lng) {\n    var popup = `<h5><a href=\"roaster/${r.slug}\">${r.name}<span class=\"right-arrow\"></span></a></h5>`\n    L.marker([r.lat, r.lng], {icon: roasterMarker}).addTo(map).bindPopup(popup)\n  } else {\n    console.log(`latitude and longitude not available for: ${r.name}`)\n  }\n}\n\nmap.locate({\n  setView: false,\n  maxZoom: 12,\n  watch: false\n})\n\nmap.on('locationfound', e => {\n  // if the device is in portland, center and show device location\n  if (e.latitude > 45.2 && e.latitude < 45.9 && e.longitude > -123.1 && e.longitude < -122.4){\n    L.circle(e.latlng, 120, deviceCircle).addTo(map);\n    L.marker(e.latlng, {icon: deviceMarker}).addTo(map);\n    map.panTo(e.latlng);\n  }\n})\n\nexport let addRoasters = arr => arr.forEach(addRoaster)\nexport let locationFound = cb => map.on('locationfound', cb)\n",
    "/**\n * Make the correct link active in top nav and scroll to correct section\n */\nimport scrollTo from 'smoothscroll'\nimport onScroll from 'do-something-on-scroll'\nimport $ from '../lib/$'\n\nlet anchor = $('.js-nav-anchor')\nlet listAnchor = $('.js-list-anchor')\nlet mapAnchor = $('.js-map-anchor')\n\nanchor.on('click', e => {\n  e.preventDefault()\n  scrollTo(document.getElementById(e.target.dataset.scrollTo))\n})\n\nfunction update () {\n  let win = document.documentElement.scrollTop || document.body.scrollTop\n  let listOffset = document.querySelector('.js-list').offsetTop\n  anchor.removeClass('active')\n  if (win > listOffset - window.innerHeight / 2) {\n    history.replaceState({page: \"list\"}, \"List\", \"/#list\")\n    listAnchor.addClass('active')\n  }\n  if (win < listOffset - window.innerHeight / 2) {\n    history.replaceState({page: \"map\"}, \"Map\", \"/\")\n    mapAnchor.addClass('active')\n  }\n}\n\nonScroll(update)\nupdate()\n",
    "import * as map from './lib/map'\nimport * as list from './lib/list'\nimport scroll from './lib/scroll'\n\nmap.addRoasters(list.roasters)\nmap.locationFound(list.sortDistanceList)\n",
    "var raf = require('raf-component');\n\nvar currentlyScrolling = false;\nvar handlers = [];\nvar prevOffset;\nvar scrollTimeout;\n\nfunction onScroll(evt) {\n    if (!currentlyScrolling) {\n        currentlyScrolling = true;\n        update();\n    }\n    clearTimeout(scrollTimeout);\n    scrollTimeout = setTimeout(function() {\n        currentlyScrolling = false;\n    }, 50);\n}\n\nfunction update() {\n    var offset = document.body.scrollTop;\n    if (offset != prevOffset) {\n        for (var i = 0, j = handlers.length; i < j; i++) {\n            handlers[i](offset, prevOffset);\n        }\n        prevOffset = offset;\n    }\n    if (currentlyScrolling) {\n        raf(update);\n    }\n}\n\nmodule.exports = function(handler) {\n    handlers.push(handler);\n    if (handlers.length == 1) {\n        window.addEventListener('scroll', onScroll);\n    }\n};\n\nmodule.exports.cancel = function(handler) {\n    var index = handlers.indexOf(handler);\n    if (index > -1) {\n        handlers.splice(index, 1);\n    }\n    if (handlers.length == 0) {\n        window.removeEventListener('scroll', onScroll);\n    }\n};\n",
    "/*\n Leaflet, a JavaScript library for mobile-friendly interactive maps. http://leafletjs.com\n (c) 2010-2013, Vladimir Agafonkin\n (c) 2010-2011, CloudMade\n*/\n(function (window, document, undefined) {\r\nvar oldL = window.L,\r\n    L = {};\r\n\r\nL.version = '0.7.7';\r\n\r\n// define Leaflet for Node module pattern loaders, including Browserify\r\nif (typeof module === 'object' && typeof module.exports === 'object') {\r\n\tmodule.exports = L;\r\n\r\n// define Leaflet as an AMD module\r\n} else if (typeof define === 'function' && define.amd) {\r\n\tdefine(L);\r\n}\r\n\r\n// define Leaflet as a global L variable, saving the original L to restore later if needed\r\n\r\nL.noConflict = function () {\r\n\twindow.L = oldL;\r\n\treturn this;\r\n};\r\n\r\nwindow.L = L;\r\n\n\n/*\r\n * L.Util contains various utility functions used throughout Leaflet code.\r\n */\r\n\r\nL.Util = {\r\n\textend: function (dest) { // (Object[, Object, ...]) ->\r\n\t\tvar sources = Array.prototype.slice.call(arguments, 1),\r\n\t\t    i, j, len, src;\r\n\r\n\t\tfor (j = 0, len = sources.length; j < len; j++) {\r\n\t\t\tsrc = sources[j] || {};\r\n\t\t\tfor (i in src) {\r\n\t\t\t\tif (src.hasOwnProperty(i)) {\r\n\t\t\t\t\tdest[i] = src[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn dest;\r\n\t},\r\n\r\n\tbind: function (fn, obj) { // (Function, Object) -> Function\r\n\t\tvar args = arguments.length > 2 ? Array.prototype.slice.call(arguments, 2) : null;\r\n\t\treturn function () {\r\n\t\t\treturn fn.apply(obj, args || arguments);\r\n\t\t};\r\n\t},\r\n\r\n\tstamp: (function () {\r\n\t\tvar lastId = 0,\r\n\t\t    key = '_leaflet_id';\r\n\t\treturn function (obj) {\r\n\t\t\tobj[key] = obj[key] || ++lastId;\r\n\t\t\treturn obj[key];\r\n\t\t};\r\n\t}()),\r\n\r\n\tinvokeEach: function (obj, method, context) {\r\n\t\tvar i, args;\r\n\r\n\t\tif (typeof obj === 'object') {\r\n\t\t\targs = Array.prototype.slice.call(arguments, 3);\r\n\r\n\t\t\tfor (i in obj) {\r\n\t\t\t\tmethod.apply(context, [i, obj[i]].concat(args));\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t},\r\n\r\n\tlimitExecByInterval: function (fn, time, context) {\r\n\t\tvar lock, execOnUnlock;\r\n\r\n\t\treturn function wrapperFn() {\r\n\t\t\tvar args = arguments;\r\n\r\n\t\t\tif (lock) {\r\n\t\t\t\texecOnUnlock = true;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tlock = true;\r\n\r\n\t\t\tsetTimeout(function () {\r\n\t\t\t\tlock = false;\r\n\r\n\t\t\t\tif (execOnUnlock) {\r\n\t\t\t\t\twrapperFn.apply(context, args);\r\n\t\t\t\t\texecOnUnlock = false;\r\n\t\t\t\t}\r\n\t\t\t}, time);\r\n\r\n\t\t\tfn.apply(context, args);\r\n\t\t};\r\n\t},\r\n\r\n\tfalseFn: function () {\r\n\t\treturn false;\r\n\t},\r\n\r\n\tformatNum: function (num, digits) {\r\n\t\tvar pow = Math.pow(10, digits || 5);\r\n\t\treturn Math.round(num * pow) / pow;\r\n\t},\r\n\r\n\ttrim: function (str) {\r\n\t\treturn str.trim ? str.trim() : str.replace(/^\\s+|\\s+$/g, '');\r\n\t},\r\n\r\n\tsplitWords: function (str) {\r\n\t\treturn L.Util.trim(str).split(/\\s+/);\r\n\t},\r\n\r\n\tsetOptions: function (obj, options) {\r\n\t\tobj.options = L.extend({}, obj.options, options);\r\n\t\treturn obj.options;\r\n\t},\r\n\r\n\tgetParamString: function (obj, existingUrl, uppercase) {\r\n\t\tvar params = [];\r\n\t\tfor (var i in obj) {\r\n\t\t\tparams.push(encodeURIComponent(uppercase ? i.toUpperCase() : i) + '=' + encodeURIComponent(obj[i]));\r\n\t\t}\r\n\t\treturn ((!existingUrl || existingUrl.indexOf('?') === -1) ? '?' : '&') + params.join('&');\r\n\t},\r\n\ttemplate: function (str, data) {\r\n\t\treturn str.replace(/\\{ *([\\w_]+) *\\}/g, function (str, key) {\r\n\t\t\tvar value = data[key];\r\n\t\t\tif (value === undefined) {\r\n\t\t\t\tthrow new Error('No value provided for variable ' + str);\r\n\t\t\t} else if (typeof value === 'function') {\r\n\t\t\t\tvalue = value(data);\r\n\t\t\t}\r\n\t\t\treturn value;\r\n\t\t});\r\n\t},\r\n\r\n\tisArray: Array.isArray || function (obj) {\r\n\t\treturn (Object.prototype.toString.call(obj) === '[object Array]');\r\n\t},\r\n\r\n\temptyImageUrl: 'data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs='\r\n};\r\n\r\n(function () {\r\n\r\n\t// inspired by http://paulirish.com/2011/requestanimationframe-for-smart-animating/\r\n\r\n\tfunction getPrefixed(name) {\r\n\t\tvar i, fn,\r\n\t\t    prefixes = ['webkit', 'moz', 'o', 'ms'];\r\n\r\n\t\tfor (i = 0; i < prefixes.length && !fn; i++) {\r\n\t\t\tfn = window[prefixes[i] + name];\r\n\t\t}\r\n\r\n\t\treturn fn;\r\n\t}\r\n\r\n\tvar lastTime = 0;\r\n\r\n\tfunction timeoutDefer(fn) {\r\n\t\tvar time = +new Date(),\r\n\t\t    timeToCall = Math.max(0, 16 - (time - lastTime));\r\n\r\n\t\tlastTime = time + timeToCall;\r\n\t\treturn window.setTimeout(fn, timeToCall);\r\n\t}\r\n\r\n\tvar requestFn = window.requestAnimationFrame ||\r\n\t        getPrefixed('RequestAnimationFrame') || timeoutDefer;\r\n\r\n\tvar cancelFn = window.cancelAnimationFrame ||\r\n\t        getPrefixed('CancelAnimationFrame') ||\r\n\t        getPrefixed('CancelRequestAnimationFrame') ||\r\n\t        function (id) { window.clearTimeout(id); };\r\n\r\n\r\n\tL.Util.requestAnimFrame = function (fn, context, immediate, element) {\r\n\t\tfn = L.bind(fn, context);\r\n\r\n\t\tif (immediate && requestFn === timeoutDefer) {\r\n\t\t\tfn();\r\n\t\t} else {\r\n\t\t\treturn requestFn.call(window, fn, element);\r\n\t\t}\r\n\t};\r\n\r\n\tL.Util.cancelAnimFrame = function (id) {\r\n\t\tif (id) {\r\n\t\t\tcancelFn.call(window, id);\r\n\t\t}\r\n\t};\r\n\r\n}());\r\n\r\n// shortcuts for most used utility functions\r\nL.extend = L.Util.extend;\r\nL.bind = L.Util.bind;\r\nL.stamp = L.Util.stamp;\r\nL.setOptions = L.Util.setOptions;\r\n\n\n/*\r\n * L.Class powers the OOP facilities of the library.\r\n * Thanks to John Resig and Dean Edwards for inspiration!\r\n */\r\n\r\nL.Class = function () {};\r\n\r\nL.Class.extend = function (props) {\r\n\r\n\t// extended class with the new prototype\r\n\tvar NewClass = function () {\r\n\r\n\t\t// call the constructor\r\n\t\tif (this.initialize) {\r\n\t\t\tthis.initialize.apply(this, arguments);\r\n\t\t}\r\n\r\n\t\t// call all constructor hooks\r\n\t\tif (this._initHooks) {\r\n\t\t\tthis.callInitHooks();\r\n\t\t}\r\n\t};\r\n\r\n\t// instantiate class without calling constructor\r\n\tvar F = function () {};\r\n\tF.prototype = this.prototype;\r\n\r\n\tvar proto = new F();\r\n\tproto.constructor = NewClass;\r\n\r\n\tNewClass.prototype = proto;\r\n\r\n\t//inherit parent's statics\r\n\tfor (var i in this) {\r\n\t\tif (this.hasOwnProperty(i) && i !== 'prototype') {\r\n\t\t\tNewClass[i] = this[i];\r\n\t\t}\r\n\t}\r\n\r\n\t// mix static properties into the class\r\n\tif (props.statics) {\r\n\t\tL.extend(NewClass, props.statics);\r\n\t\tdelete props.statics;\r\n\t}\r\n\r\n\t// mix includes into the prototype\r\n\tif (props.includes) {\r\n\t\tL.Util.extend.apply(null, [proto].concat(props.includes));\r\n\t\tdelete props.includes;\r\n\t}\r\n\r\n\t// merge options\r\n\tif (props.options && proto.options) {\r\n\t\tprops.options = L.extend({}, proto.options, props.options);\r\n\t}\r\n\r\n\t// mix given properties into the prototype\r\n\tL.extend(proto, props);\r\n\r\n\tproto._initHooks = [];\r\n\r\n\tvar parent = this;\r\n\t// jshint camelcase: false\r\n\tNewClass.__super__ = parent.prototype;\r\n\r\n\t// add method for calling all hooks\r\n\tproto.callInitHooks = function () {\r\n\r\n\t\tif (this._initHooksCalled) { return; }\r\n\r\n\t\tif (parent.prototype.callInitHooks) {\r\n\t\t\tparent.prototype.callInitHooks.call(this);\r\n\t\t}\r\n\r\n\t\tthis._initHooksCalled = true;\r\n\r\n\t\tfor (var i = 0, len = proto._initHooks.length; i < len; i++) {\r\n\t\t\tproto._initHooks[i].call(this);\r\n\t\t}\r\n\t};\r\n\r\n\treturn NewClass;\r\n};\r\n\r\n\r\n// method for adding properties to prototype\r\nL.Class.include = function (props) {\r\n\tL.extend(this.prototype, props);\r\n};\r\n\r\n// merge new default options to the Class\r\nL.Class.mergeOptions = function (options) {\r\n\tL.extend(this.prototype.options, options);\r\n};\r\n\r\n// add a constructor hook\r\nL.Class.addInitHook = function (fn) { // (Function) || (String, args...)\r\n\tvar args = Array.prototype.slice.call(arguments, 1);\r\n\r\n\tvar init = typeof fn === 'function' ? fn : function () {\r\n\t\tthis[fn].apply(this, args);\r\n\t};\r\n\r\n\tthis.prototype._initHooks = this.prototype._initHooks || [];\r\n\tthis.prototype._initHooks.push(init);\r\n};\r\n\n\n/*\r\n * L.Mixin.Events is used to add custom events functionality to Leaflet classes.\r\n */\r\n\r\nvar eventsKey = '_leaflet_events';\r\n\r\nL.Mixin = {};\r\n\r\nL.Mixin.Events = {\r\n\r\n\taddEventListener: function (types, fn, context) { // (String, Function[, Object]) or (Object[, Object])\r\n\r\n\t\t// types can be a map of types/handlers\r\n\t\tif (L.Util.invokeEach(types, this.addEventListener, this, fn, context)) { return this; }\r\n\r\n\t\tvar events = this[eventsKey] = this[eventsKey] || {},\r\n\t\t    contextId = context && context !== this && L.stamp(context),\r\n\t\t    i, len, event, type, indexKey, indexLenKey, typeIndex;\r\n\r\n\t\t// types can be a string of space-separated words\r\n\t\ttypes = L.Util.splitWords(types);\r\n\r\n\t\tfor (i = 0, len = types.length; i < len; i++) {\r\n\t\t\tevent = {\r\n\t\t\t\taction: fn,\r\n\t\t\t\tcontext: context || this\r\n\t\t\t};\r\n\t\t\ttype = types[i];\r\n\r\n\t\t\tif (contextId) {\r\n\t\t\t\t// store listeners of a particular context in a separate hash (if it has an id)\r\n\t\t\t\t// gives a major performance boost when removing thousands of map layers\r\n\r\n\t\t\t\tindexKey = type + '_idx';\r\n\t\t\t\tindexLenKey = indexKey + '_len';\r\n\r\n\t\t\t\ttypeIndex = events[indexKey] = events[indexKey] || {};\r\n\r\n\t\t\t\tif (!typeIndex[contextId]) {\r\n\t\t\t\t\ttypeIndex[contextId] = [];\r\n\r\n\t\t\t\t\t// keep track of the number of keys in the index to quickly check if it's empty\r\n\t\t\t\t\tevents[indexLenKey] = (events[indexLenKey] || 0) + 1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttypeIndex[contextId].push(event);\r\n\r\n\r\n\t\t\t} else {\r\n\t\t\t\tevents[type] = events[type] || [];\r\n\t\t\t\tevents[type].push(event);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\thasEventListeners: function (type) { // (String) -> Boolean\r\n\t\tvar events = this[eventsKey];\r\n\t\treturn !!events && ((type in events && events[type].length > 0) ||\r\n\t\t                    (type + '_idx' in events && events[type + '_idx_len'] > 0));\r\n\t},\r\n\r\n\tremoveEventListener: function (types, fn, context) { // ([String, Function, Object]) or (Object[, Object])\r\n\r\n\t\tif (!this[eventsKey]) {\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tif (!types) {\r\n\t\t\treturn this.clearAllEventListeners();\r\n\t\t}\r\n\r\n\t\tif (L.Util.invokeEach(types, this.removeEventListener, this, fn, context)) { return this; }\r\n\r\n\t\tvar events = this[eventsKey],\r\n\t\t    contextId = context && context !== this && L.stamp(context),\r\n\t\t    i, len, type, listeners, j, indexKey, indexLenKey, typeIndex, removed;\r\n\r\n\t\ttypes = L.Util.splitWords(types);\r\n\r\n\t\tfor (i = 0, len = types.length; i < len; i++) {\r\n\t\t\ttype = types[i];\r\n\t\t\tindexKey = type + '_idx';\r\n\t\t\tindexLenKey = indexKey + '_len';\r\n\r\n\t\t\ttypeIndex = events[indexKey];\r\n\r\n\t\t\tif (!fn) {\r\n\t\t\t\t// clear all listeners for a type if function isn't specified\r\n\t\t\t\tdelete events[type];\r\n\t\t\t\tdelete events[indexKey];\r\n\t\t\t\tdelete events[indexLenKey];\r\n\r\n\t\t\t} else {\r\n\t\t\t\tlisteners = contextId && typeIndex ? typeIndex[contextId] : events[type];\r\n\r\n\t\t\t\tif (listeners) {\r\n\t\t\t\t\tfor (j = listeners.length - 1; j >= 0; j--) {\r\n\t\t\t\t\t\tif ((listeners[j].action === fn) && (!context || (listeners[j].context === context))) {\r\n\t\t\t\t\t\t\tremoved = listeners.splice(j, 1);\r\n\t\t\t\t\t\t\t// set the old action to a no-op, because it is possible\r\n\t\t\t\t\t\t\t// that the listener is being iterated over as part of a dispatch\r\n\t\t\t\t\t\t\tremoved[0].action = L.Util.falseFn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (context && typeIndex && (listeners.length === 0)) {\r\n\t\t\t\t\t\tdelete typeIndex[contextId];\r\n\t\t\t\t\t\tevents[indexLenKey]--;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tclearAllEventListeners: function () {\r\n\t\tdelete this[eventsKey];\r\n\t\treturn this;\r\n\t},\r\n\r\n\tfireEvent: function (type, data) { // (String[, Object])\r\n\t\tif (!this.hasEventListeners(type)) {\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tvar event = L.Util.extend({}, data, { type: type, target: this });\r\n\r\n\t\tvar events = this[eventsKey],\r\n\t\t    listeners, i, len, typeIndex, contextId;\r\n\r\n\t\tif (events[type]) {\r\n\t\t\t// make sure adding/removing listeners inside other listeners won't cause infinite loop\r\n\t\t\tlisteners = events[type].slice();\r\n\r\n\t\t\tfor (i = 0, len = listeners.length; i < len; i++) {\r\n\t\t\t\tlisteners[i].action.call(listeners[i].context, event);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// fire event for the context-indexed listeners as well\r\n\t\ttypeIndex = events[type + '_idx'];\r\n\r\n\t\tfor (contextId in typeIndex) {\r\n\t\t\tlisteners = typeIndex[contextId].slice();\r\n\r\n\t\t\tif (listeners) {\r\n\t\t\t\tfor (i = 0, len = listeners.length; i < len; i++) {\r\n\t\t\t\t\tlisteners[i].action.call(listeners[i].context, event);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\taddOneTimeEventListener: function (types, fn, context) {\r\n\r\n\t\tif (L.Util.invokeEach(types, this.addOneTimeEventListener, this, fn, context)) { return this; }\r\n\r\n\t\tvar handler = L.bind(function () {\r\n\t\t\tthis\r\n\t\t\t    .removeEventListener(types, fn, context)\r\n\t\t\t    .removeEventListener(types, handler, context);\r\n\t\t}, this);\r\n\r\n\t\treturn this\r\n\t\t    .addEventListener(types, fn, context)\r\n\t\t    .addEventListener(types, handler, context);\r\n\t}\r\n};\r\n\r\nL.Mixin.Events.on = L.Mixin.Events.addEventListener;\r\nL.Mixin.Events.off = L.Mixin.Events.removeEventListener;\r\nL.Mixin.Events.once = L.Mixin.Events.addOneTimeEventListener;\r\nL.Mixin.Events.fire = L.Mixin.Events.fireEvent;\r\n\n\n/*\r\n * L.Browser handles different browser and feature detections for internal Leaflet use.\r\n */\r\n\r\n(function () {\r\n\r\n\tvar ie = 'ActiveXObject' in window,\r\n\t\tielt9 = ie && !document.addEventListener,\r\n\r\n\t    // terrible browser detection to work around Safari / iOS / Android browser bugs\r\n\t    ua = navigator.userAgent.toLowerCase(),\r\n\t    webkit = ua.indexOf('webkit') !== -1,\r\n\t    chrome = ua.indexOf('chrome') !== -1,\r\n\t    phantomjs = ua.indexOf('phantom') !== -1,\r\n\t    android = ua.indexOf('android') !== -1,\r\n\t    android23 = ua.search('android [23]') !== -1,\r\n\t\tgecko = ua.indexOf('gecko') !== -1,\r\n\r\n\t    mobile = typeof orientation !== undefined + '',\r\n\t    msPointer = !window.PointerEvent && window.MSPointerEvent,\r\n\t\tpointer = (window.PointerEvent && window.navigator.pointerEnabled) ||\r\n\t\t\t\t  msPointer,\r\n\t    retina = ('devicePixelRatio' in window && window.devicePixelRatio > 1) ||\r\n\t             ('matchMedia' in window && window.matchMedia('(min-resolution:144dpi)') &&\r\n\t              window.matchMedia('(min-resolution:144dpi)').matches),\r\n\r\n\t    doc = document.documentElement,\r\n\t    ie3d = ie && ('transition' in doc.style),\r\n\t    webkit3d = ('WebKitCSSMatrix' in window) && ('m11' in new window.WebKitCSSMatrix()) && !android23,\r\n\t    gecko3d = 'MozPerspective' in doc.style,\r\n\t    opera3d = 'OTransition' in doc.style,\r\n\t    any3d = !window.L_DISABLE_3D && (ie3d || webkit3d || gecko3d || opera3d) && !phantomjs;\r\n\r\n\tvar touch = !window.L_NO_TOUCH && !phantomjs && (pointer || 'ontouchstart' in window ||\r\n\t\t(window.DocumentTouch && document instanceof window.DocumentTouch));\r\n\r\n\tL.Browser = {\r\n\t\tie: ie,\r\n\t\tielt9: ielt9,\r\n\t\twebkit: webkit,\r\n\t\tgecko: gecko && !webkit && !window.opera && !ie,\r\n\r\n\t\tandroid: android,\r\n\t\tandroid23: android23,\r\n\r\n\t\tchrome: chrome,\r\n\r\n\t\tie3d: ie3d,\r\n\t\twebkit3d: webkit3d,\r\n\t\tgecko3d: gecko3d,\r\n\t\topera3d: opera3d,\r\n\t\tany3d: any3d,\r\n\r\n\t\tmobile: mobile,\r\n\t\tmobileWebkit: mobile && webkit,\r\n\t\tmobileWebkit3d: mobile && webkit3d,\r\n\t\tmobileOpera: mobile && window.opera,\r\n\r\n\t\ttouch: touch,\r\n\t\tmsPointer: msPointer,\r\n\t\tpointer: pointer,\r\n\r\n\t\tretina: retina\r\n\t};\r\n\r\n}());\r\n\n\n/*\r\n * L.Point represents a point with x and y coordinates.\r\n */\r\n\r\nL.Point = function (/*Number*/ x, /*Number*/ y, /*Boolean*/ round) {\r\n\tthis.x = (round ? Math.round(x) : x);\r\n\tthis.y = (round ? Math.round(y) : y);\r\n};\r\n\r\nL.Point.prototype = {\r\n\r\n\tclone: function () {\r\n\t\treturn new L.Point(this.x, this.y);\r\n\t},\r\n\r\n\t// non-destructive, returns a new point\r\n\tadd: function (point) {\r\n\t\treturn this.clone()._add(L.point(point));\r\n\t},\r\n\r\n\t// destructive, used directly for performance in situations where it's safe to modify existing point\r\n\t_add: function (point) {\r\n\t\tthis.x += point.x;\r\n\t\tthis.y += point.y;\r\n\t\treturn this;\r\n\t},\r\n\r\n\tsubtract: function (point) {\r\n\t\treturn this.clone()._subtract(L.point(point));\r\n\t},\r\n\r\n\t_subtract: function (point) {\r\n\t\tthis.x -= point.x;\r\n\t\tthis.y -= point.y;\r\n\t\treturn this;\r\n\t},\r\n\r\n\tdivideBy: function (num) {\r\n\t\treturn this.clone()._divideBy(num);\r\n\t},\r\n\r\n\t_divideBy: function (num) {\r\n\t\tthis.x /= num;\r\n\t\tthis.y /= num;\r\n\t\treturn this;\r\n\t},\r\n\r\n\tmultiplyBy: function (num) {\r\n\t\treturn this.clone()._multiplyBy(num);\r\n\t},\r\n\r\n\t_multiplyBy: function (num) {\r\n\t\tthis.x *= num;\r\n\t\tthis.y *= num;\r\n\t\treturn this;\r\n\t},\r\n\r\n\tround: function () {\r\n\t\treturn this.clone()._round();\r\n\t},\r\n\r\n\t_round: function () {\r\n\t\tthis.x = Math.round(this.x);\r\n\t\tthis.y = Math.round(this.y);\r\n\t\treturn this;\r\n\t},\r\n\r\n\tfloor: function () {\r\n\t\treturn this.clone()._floor();\r\n\t},\r\n\r\n\t_floor: function () {\r\n\t\tthis.x = Math.floor(this.x);\r\n\t\tthis.y = Math.floor(this.y);\r\n\t\treturn this;\r\n\t},\r\n\r\n\tdistanceTo: function (point) {\r\n\t\tpoint = L.point(point);\r\n\r\n\t\tvar x = point.x - this.x,\r\n\t\t    y = point.y - this.y;\r\n\r\n\t\treturn Math.sqrt(x * x + y * y);\r\n\t},\r\n\r\n\tequals: function (point) {\r\n\t\tpoint = L.point(point);\r\n\r\n\t\treturn point.x === this.x &&\r\n\t\t       point.y === this.y;\r\n\t},\r\n\r\n\tcontains: function (point) {\r\n\t\tpoint = L.point(point);\r\n\r\n\t\treturn Math.abs(point.x) <= Math.abs(this.x) &&\r\n\t\t       Math.abs(point.y) <= Math.abs(this.y);\r\n\t},\r\n\r\n\ttoString: function () {\r\n\t\treturn 'Point(' +\r\n\t\t        L.Util.formatNum(this.x) + ', ' +\r\n\t\t        L.Util.formatNum(this.y) + ')';\r\n\t}\r\n};\r\n\r\nL.point = function (x, y, round) {\r\n\tif (x instanceof L.Point) {\r\n\t\treturn x;\r\n\t}\r\n\tif (L.Util.isArray(x)) {\r\n\t\treturn new L.Point(x[0], x[1]);\r\n\t}\r\n\tif (x === undefined || x === null) {\r\n\t\treturn x;\r\n\t}\r\n\treturn new L.Point(x, y, round);\r\n};\r\n\n\n/*\r\n * L.Bounds represents a rectangular area on the screen in pixel coordinates.\r\n */\r\n\r\nL.Bounds = function (a, b) { //(Point, Point) or Point[]\r\n\tif (!a) { return; }\r\n\r\n\tvar points = b ? [a, b] : a;\r\n\r\n\tfor (var i = 0, len = points.length; i < len; i++) {\r\n\t\tthis.extend(points[i]);\r\n\t}\r\n};\r\n\r\nL.Bounds.prototype = {\r\n\t// extend the bounds to contain the given point\r\n\textend: function (point) { // (Point)\r\n\t\tpoint = L.point(point);\r\n\r\n\t\tif (!this.min && !this.max) {\r\n\t\t\tthis.min = point.clone();\r\n\t\t\tthis.max = point.clone();\r\n\t\t} else {\r\n\t\t\tthis.min.x = Math.min(point.x, this.min.x);\r\n\t\t\tthis.max.x = Math.max(point.x, this.max.x);\r\n\t\t\tthis.min.y = Math.min(point.y, this.min.y);\r\n\t\t\tthis.max.y = Math.max(point.y, this.max.y);\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\tgetCenter: function (round) { // (Boolean) -> Point\r\n\t\treturn new L.Point(\r\n\t\t        (this.min.x + this.max.x) / 2,\r\n\t\t        (this.min.y + this.max.y) / 2, round);\r\n\t},\r\n\r\n\tgetBottomLeft: function () { // -> Point\r\n\t\treturn new L.Point(this.min.x, this.max.y);\r\n\t},\r\n\r\n\tgetTopRight: function () { // -> Point\r\n\t\treturn new L.Point(this.max.x, this.min.y);\r\n\t},\r\n\r\n\tgetSize: function () {\r\n\t\treturn this.max.subtract(this.min);\r\n\t},\r\n\r\n\tcontains: function (obj) { // (Bounds) or (Point) -> Boolean\r\n\t\tvar min, max;\r\n\r\n\t\tif (typeof obj[0] === 'number' || obj instanceof L.Point) {\r\n\t\t\tobj = L.point(obj);\r\n\t\t} else {\r\n\t\t\tobj = L.bounds(obj);\r\n\t\t}\r\n\r\n\t\tif (obj instanceof L.Bounds) {\r\n\t\t\tmin = obj.min;\r\n\t\t\tmax = obj.max;\r\n\t\t} else {\r\n\t\t\tmin = max = obj;\r\n\t\t}\r\n\r\n\t\treturn (min.x >= this.min.x) &&\r\n\t\t       (max.x <= this.max.x) &&\r\n\t\t       (min.y >= this.min.y) &&\r\n\t\t       (max.y <= this.max.y);\r\n\t},\r\n\r\n\tintersects: function (bounds) { // (Bounds) -> Boolean\r\n\t\tbounds = L.bounds(bounds);\r\n\r\n\t\tvar min = this.min,\r\n\t\t    max = this.max,\r\n\t\t    min2 = bounds.min,\r\n\t\t    max2 = bounds.max,\r\n\t\t    xIntersects = (max2.x >= min.x) && (min2.x <= max.x),\r\n\t\t    yIntersects = (max2.y >= min.y) && (min2.y <= max.y);\r\n\r\n\t\treturn xIntersects && yIntersects;\r\n\t},\r\n\r\n\tisValid: function () {\r\n\t\treturn !!(this.min && this.max);\r\n\t}\r\n};\r\n\r\nL.bounds = function (a, b) { // (Bounds) or (Point, Point) or (Point[])\r\n\tif (!a || a instanceof L.Bounds) {\r\n\t\treturn a;\r\n\t}\r\n\treturn new L.Bounds(a, b);\r\n};\r\n\n\n/*\r\n * L.Transformation is an utility class to perform simple point transformations through a 2d-matrix.\r\n */\r\n\r\nL.Transformation = function (a, b, c, d) {\r\n\tthis._a = a;\r\n\tthis._b = b;\r\n\tthis._c = c;\r\n\tthis._d = d;\r\n};\r\n\r\nL.Transformation.prototype = {\r\n\ttransform: function (point, scale) { // (Point, Number) -> Point\r\n\t\treturn this._transform(point.clone(), scale);\r\n\t},\r\n\r\n\t// destructive transform (faster)\r\n\t_transform: function (point, scale) {\r\n\t\tscale = scale || 1;\r\n\t\tpoint.x = scale * (this._a * point.x + this._b);\r\n\t\tpoint.y = scale * (this._c * point.y + this._d);\r\n\t\treturn point;\r\n\t},\r\n\r\n\tuntransform: function (point, scale) {\r\n\t\tscale = scale || 1;\r\n\t\treturn new L.Point(\r\n\t\t        (point.x / scale - this._b) / this._a,\r\n\t\t        (point.y / scale - this._d) / this._c);\r\n\t}\r\n};\r\n\n\n/*\r\n * L.DomUtil contains various utility functions for working with DOM.\r\n */\r\n\r\nL.DomUtil = {\r\n\tget: function (id) {\r\n\t\treturn (typeof id === 'string' ? document.getElementById(id) : id);\r\n\t},\r\n\r\n\tgetStyle: function (el, style) {\r\n\r\n\t\tvar value = el.style[style];\r\n\r\n\t\tif (!value && el.currentStyle) {\r\n\t\t\tvalue = el.currentStyle[style];\r\n\t\t}\r\n\r\n\t\tif ((!value || value === 'auto') && document.defaultView) {\r\n\t\t\tvar css = document.defaultView.getComputedStyle(el, null);\r\n\t\t\tvalue = css ? css[style] : null;\r\n\t\t}\r\n\r\n\t\treturn value === 'auto' ? null : value;\r\n\t},\r\n\r\n\tgetViewportOffset: function (element) {\r\n\r\n\t\tvar top = 0,\r\n\t\t    left = 0,\r\n\t\t    el = element,\r\n\t\t    docBody = document.body,\r\n\t\t    docEl = document.documentElement,\r\n\t\t    pos;\r\n\r\n\t\tdo {\r\n\t\t\ttop  += el.offsetTop  || 0;\r\n\t\t\tleft += el.offsetLeft || 0;\r\n\r\n\t\t\t//add borders\r\n\t\t\ttop += parseInt(L.DomUtil.getStyle(el, 'borderTopWidth'), 10) || 0;\r\n\t\t\tleft += parseInt(L.DomUtil.getStyle(el, 'borderLeftWidth'), 10) || 0;\r\n\r\n\t\t\tpos = L.DomUtil.getStyle(el, 'position');\r\n\r\n\t\t\tif (el.offsetParent === docBody && pos === 'absolute') { break; }\r\n\r\n\t\t\tif (pos === 'fixed') {\r\n\t\t\t\ttop  += docBody.scrollTop  || docEl.scrollTop  || 0;\r\n\t\t\t\tleft += docBody.scrollLeft || docEl.scrollLeft || 0;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tif (pos === 'relative' && !el.offsetLeft) {\r\n\t\t\t\tvar width = L.DomUtil.getStyle(el, 'width'),\r\n\t\t\t\t    maxWidth = L.DomUtil.getStyle(el, 'max-width'),\r\n\t\t\t\t    r = el.getBoundingClientRect();\r\n\r\n\t\t\t\tif (width !== 'none' || maxWidth !== 'none') {\r\n\t\t\t\t\tleft += r.left + el.clientLeft;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//calculate full y offset since we're breaking out of the loop\r\n\t\t\t\ttop += r.top + (docBody.scrollTop  || docEl.scrollTop  || 0);\r\n\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tel = el.offsetParent;\r\n\r\n\t\t} while (el);\r\n\r\n\t\tel = element;\r\n\r\n\t\tdo {\r\n\t\t\tif (el === docBody) { break; }\r\n\r\n\t\t\ttop  -= el.scrollTop  || 0;\r\n\t\t\tleft -= el.scrollLeft || 0;\r\n\r\n\t\t\tel = el.parentNode;\r\n\t\t} while (el);\r\n\r\n\t\treturn new L.Point(left, top);\r\n\t},\r\n\r\n\tdocumentIsLtr: function () {\r\n\t\tif (!L.DomUtil._docIsLtrCached) {\r\n\t\t\tL.DomUtil._docIsLtrCached = true;\r\n\t\t\tL.DomUtil._docIsLtr = L.DomUtil.getStyle(document.body, 'direction') === 'ltr';\r\n\t\t}\r\n\t\treturn L.DomUtil._docIsLtr;\r\n\t},\r\n\r\n\tcreate: function (tagName, className, container) {\r\n\r\n\t\tvar el = document.createElement(tagName);\r\n\t\tel.className = className;\r\n\r\n\t\tif (container) {\r\n\t\t\tcontainer.appendChild(el);\r\n\t\t}\r\n\r\n\t\treturn el;\r\n\t},\r\n\r\n\thasClass: function (el, name) {\r\n\t\tif (el.classList !== undefined) {\r\n\t\t\treturn el.classList.contains(name);\r\n\t\t}\r\n\t\tvar className = L.DomUtil._getClass(el);\r\n\t\treturn className.length > 0 && new RegExp('(^|\\\\s)' + name + '(\\\\s|$)').test(className);\r\n\t},\r\n\r\n\taddClass: function (el, name) {\r\n\t\tif (el.classList !== undefined) {\r\n\t\t\tvar classes = L.Util.splitWords(name);\r\n\t\t\tfor (var i = 0, len = classes.length; i < len; i++) {\r\n\t\t\t\tel.classList.add(classes[i]);\r\n\t\t\t}\r\n\t\t} else if (!L.DomUtil.hasClass(el, name)) {\r\n\t\t\tvar className = L.DomUtil._getClass(el);\r\n\t\t\tL.DomUtil._setClass(el, (className ? className + ' ' : '') + name);\r\n\t\t}\r\n\t},\r\n\r\n\tremoveClass: function (el, name) {\r\n\t\tif (el.classList !== undefined) {\r\n\t\t\tel.classList.remove(name);\r\n\t\t} else {\r\n\t\t\tL.DomUtil._setClass(el, L.Util.trim((' ' + L.DomUtil._getClass(el) + ' ').replace(' ' + name + ' ', ' ')));\r\n\t\t}\r\n\t},\r\n\r\n\t_setClass: function (el, name) {\r\n\t\tif (el.className.baseVal === undefined) {\r\n\t\t\tel.className = name;\r\n\t\t} else {\r\n\t\t\t// in case of SVG element\r\n\t\t\tel.className.baseVal = name;\r\n\t\t}\r\n\t},\r\n\r\n\t_getClass: function (el) {\r\n\t\treturn el.className.baseVal === undefined ? el.className : el.className.baseVal;\r\n\t},\r\n\r\n\tsetOpacity: function (el, value) {\r\n\r\n\t\tif ('opacity' in el.style) {\r\n\t\t\tel.style.opacity = value;\r\n\r\n\t\t} else if ('filter' in el.style) {\r\n\r\n\t\t\tvar filter = false,\r\n\t\t\t    filterName = 'DXImageTransform.Microsoft.Alpha';\r\n\r\n\t\t\t// filters collection throws an error if we try to retrieve a filter that doesn't exist\r\n\t\t\ttry {\r\n\t\t\t\tfilter = el.filters.item(filterName);\r\n\t\t\t} catch (e) {\r\n\t\t\t\t// don't set opacity to 1 if we haven't already set an opacity,\r\n\t\t\t\t// it isn't needed and breaks transparent pngs.\r\n\t\t\t\tif (value === 1) { return; }\r\n\t\t\t}\r\n\r\n\t\t\tvalue = Math.round(value * 100);\r\n\r\n\t\t\tif (filter) {\r\n\t\t\t\tfilter.Enabled = (value !== 100);\r\n\t\t\t\tfilter.Opacity = value;\r\n\t\t\t} else {\r\n\t\t\t\tel.style.filter += ' progid:' + filterName + '(opacity=' + value + ')';\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\ttestProp: function (props) {\r\n\r\n\t\tvar style = document.documentElement.style;\r\n\r\n\t\tfor (var i = 0; i < props.length; i++) {\r\n\t\t\tif (props[i] in style) {\r\n\t\t\t\treturn props[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\tgetTranslateString: function (point) {\r\n\t\t// on WebKit browsers (Chrome/Safari/iOS Safari/Android) using translate3d instead of translate\r\n\t\t// makes animation smoother as it ensures HW accel is used. Firefox 13 doesn't care\r\n\t\t// (same speed either way), Opera 12 doesn't support translate3d\r\n\r\n\t\tvar is3d = L.Browser.webkit3d,\r\n\t\t    open = 'translate' + (is3d ? '3d' : '') + '(',\r\n\t\t    close = (is3d ? ',0' : '') + ')';\r\n\r\n\t\treturn open + point.x + 'px,' + point.y + 'px' + close;\r\n\t},\r\n\r\n\tgetScaleString: function (scale, origin) {\r\n\r\n\t\tvar preTranslateStr = L.DomUtil.getTranslateString(origin.add(origin.multiplyBy(-1 * scale))),\r\n\t\t    scaleStr = ' scale(' + scale + ') ';\r\n\r\n\t\treturn preTranslateStr + scaleStr;\r\n\t},\r\n\r\n\tsetPosition: function (el, point, disable3D) { // (HTMLElement, Point[, Boolean])\r\n\r\n\t\t// jshint camelcase: false\r\n\t\tel._leaflet_pos = point;\r\n\r\n\t\tif (!disable3D && L.Browser.any3d) {\r\n\t\t\tel.style[L.DomUtil.TRANSFORM] =  L.DomUtil.getTranslateString(point);\r\n\t\t} else {\r\n\t\t\tel.style.left = point.x + 'px';\r\n\t\t\tel.style.top = point.y + 'px';\r\n\t\t}\r\n\t},\r\n\r\n\tgetPosition: function (el) {\r\n\t\t// this method is only used for elements previously positioned using setPosition,\r\n\t\t// so it's safe to cache the position for performance\r\n\r\n\t\t// jshint camelcase: false\r\n\t\treturn el._leaflet_pos;\r\n\t}\r\n};\r\n\r\n\r\n// prefix style property names\r\n\r\nL.DomUtil.TRANSFORM = L.DomUtil.testProp(\r\n        ['transform', 'WebkitTransform', 'OTransform', 'MozTransform', 'msTransform']);\r\n\r\n// webkitTransition comes first because some browser versions that drop vendor prefix don't do\r\n// the same for the transitionend event, in particular the Android 4.1 stock browser\r\n\r\nL.DomUtil.TRANSITION = L.DomUtil.testProp(\r\n        ['webkitTransition', 'transition', 'OTransition', 'MozTransition', 'msTransition']);\r\n\r\nL.DomUtil.TRANSITION_END =\r\n        L.DomUtil.TRANSITION === 'webkitTransition' || L.DomUtil.TRANSITION === 'OTransition' ?\r\n        L.DomUtil.TRANSITION + 'End' : 'transitionend';\r\n\r\n(function () {\r\n    if ('onselectstart' in document) {\r\n        L.extend(L.DomUtil, {\r\n            disableTextSelection: function () {\r\n                L.DomEvent.on(window, 'selectstart', L.DomEvent.preventDefault);\r\n            },\r\n\r\n            enableTextSelection: function () {\r\n                L.DomEvent.off(window, 'selectstart', L.DomEvent.preventDefault);\r\n            }\r\n        });\r\n    } else {\r\n        var userSelectProperty = L.DomUtil.testProp(\r\n            ['userSelect', 'WebkitUserSelect', 'OUserSelect', 'MozUserSelect', 'msUserSelect']);\r\n\r\n        L.extend(L.DomUtil, {\r\n            disableTextSelection: function () {\r\n                if (userSelectProperty) {\r\n                    var style = document.documentElement.style;\r\n                    this._userSelect = style[userSelectProperty];\r\n                    style[userSelectProperty] = 'none';\r\n                }\r\n            },\r\n\r\n            enableTextSelection: function () {\r\n                if (userSelectProperty) {\r\n                    document.documentElement.style[userSelectProperty] = this._userSelect;\r\n                    delete this._userSelect;\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n\tL.extend(L.DomUtil, {\r\n\t\tdisableImageDrag: function () {\r\n\t\t\tL.DomEvent.on(window, 'dragstart', L.DomEvent.preventDefault);\r\n\t\t},\r\n\r\n\t\tenableImageDrag: function () {\r\n\t\t\tL.DomEvent.off(window, 'dragstart', L.DomEvent.preventDefault);\r\n\t\t}\r\n\t});\r\n})();\r\n\n\n/*\r\n * L.LatLng represents a geographical point with latitude and longitude coordinates.\r\n */\r\n\r\nL.LatLng = function (lat, lng, alt) { // (Number, Number, Number)\r\n\tlat = parseFloat(lat);\r\n\tlng = parseFloat(lng);\r\n\r\n\tif (isNaN(lat) || isNaN(lng)) {\r\n\t\tthrow new Error('Invalid LatLng object: (' + lat + ', ' + lng + ')');\r\n\t}\r\n\r\n\tthis.lat = lat;\r\n\tthis.lng = lng;\r\n\r\n\tif (alt !== undefined) {\r\n\t\tthis.alt = parseFloat(alt);\r\n\t}\r\n};\r\n\r\nL.extend(L.LatLng, {\r\n\tDEG_TO_RAD: Math.PI / 180,\r\n\tRAD_TO_DEG: 180 / Math.PI,\r\n\tMAX_MARGIN: 1.0E-9 // max margin of error for the \"equals\" check\r\n});\r\n\r\nL.LatLng.prototype = {\r\n\tequals: function (obj) { // (LatLng) -> Boolean\r\n\t\tif (!obj) { return false; }\r\n\r\n\t\tobj = L.latLng(obj);\r\n\r\n\t\tvar margin = Math.max(\r\n\t\t        Math.abs(this.lat - obj.lat),\r\n\t\t        Math.abs(this.lng - obj.lng));\r\n\r\n\t\treturn margin <= L.LatLng.MAX_MARGIN;\r\n\t},\r\n\r\n\ttoString: function (precision) { // (Number) -> String\r\n\t\treturn 'LatLng(' +\r\n\t\t        L.Util.formatNum(this.lat, precision) + ', ' +\r\n\t\t        L.Util.formatNum(this.lng, precision) + ')';\r\n\t},\r\n\r\n\t// Haversine distance formula, see http://en.wikipedia.org/wiki/Haversine_formula\r\n\t// TODO move to projection code, LatLng shouldn't know about Earth\r\n\tdistanceTo: function (other) { // (LatLng) -> Number\r\n\t\tother = L.latLng(other);\r\n\r\n\t\tvar R = 6378137, // earth radius in meters\r\n\t\t    d2r = L.LatLng.DEG_TO_RAD,\r\n\t\t    dLat = (other.lat - this.lat) * d2r,\r\n\t\t    dLon = (other.lng - this.lng) * d2r,\r\n\t\t    lat1 = this.lat * d2r,\r\n\t\t    lat2 = other.lat * d2r,\r\n\t\t    sin1 = Math.sin(dLat / 2),\r\n\t\t    sin2 = Math.sin(dLon / 2);\r\n\r\n\t\tvar a = sin1 * sin1 + sin2 * sin2 * Math.cos(lat1) * Math.cos(lat2);\r\n\r\n\t\treturn R * 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n\t},\r\n\r\n\twrap: function (a, b) { // (Number, Number) -> LatLng\r\n\t\tvar lng = this.lng;\r\n\r\n\t\ta = a || -180;\r\n\t\tb = b ||  180;\r\n\r\n\t\tlng = (lng + b) % (b - a) + (lng < a || lng === b ? b : a);\r\n\r\n\t\treturn new L.LatLng(this.lat, lng);\r\n\t}\r\n};\r\n\r\nL.latLng = function (a, b) { // (LatLng) or ([Number, Number]) or (Number, Number)\r\n\tif (a instanceof L.LatLng) {\r\n\t\treturn a;\r\n\t}\r\n\tif (L.Util.isArray(a)) {\r\n\t\tif (typeof a[0] === 'number' || typeof a[0] === 'string') {\r\n\t\t\treturn new L.LatLng(a[0], a[1], a[2]);\r\n\t\t} else {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\tif (a === undefined || a === null) {\r\n\t\treturn a;\r\n\t}\r\n\tif (typeof a === 'object' && 'lat' in a) {\r\n\t\treturn new L.LatLng(a.lat, 'lng' in a ? a.lng : a.lon);\r\n\t}\r\n\tif (b === undefined) {\r\n\t\treturn null;\r\n\t}\r\n\treturn new L.LatLng(a, b);\r\n};\r\n\r\n\n\n/*\r\n * L.LatLngBounds represents a rectangular area on the map in geographical coordinates.\r\n */\r\n\r\nL.LatLngBounds = function (southWest, northEast) { // (LatLng, LatLng) or (LatLng[])\r\n\tif (!southWest) { return; }\r\n\r\n\tvar latlngs = northEast ? [southWest, northEast] : southWest;\r\n\r\n\tfor (var i = 0, len = latlngs.length; i < len; i++) {\r\n\t\tthis.extend(latlngs[i]);\r\n\t}\r\n};\r\n\r\nL.LatLngBounds.prototype = {\r\n\t// extend the bounds to contain the given point or bounds\r\n\textend: function (obj) { // (LatLng) or (LatLngBounds)\r\n\t\tif (!obj) { return this; }\r\n\r\n\t\tvar latLng = L.latLng(obj);\r\n\t\tif (latLng !== null) {\r\n\t\t\tobj = latLng;\r\n\t\t} else {\r\n\t\t\tobj = L.latLngBounds(obj);\r\n\t\t}\r\n\r\n\t\tif (obj instanceof L.LatLng) {\r\n\t\t\tif (!this._southWest && !this._northEast) {\r\n\t\t\t\tthis._southWest = new L.LatLng(obj.lat, obj.lng);\r\n\t\t\t\tthis._northEast = new L.LatLng(obj.lat, obj.lng);\r\n\t\t\t} else {\r\n\t\t\t\tthis._southWest.lat = Math.min(obj.lat, this._southWest.lat);\r\n\t\t\t\tthis._southWest.lng = Math.min(obj.lng, this._southWest.lng);\r\n\r\n\t\t\t\tthis._northEast.lat = Math.max(obj.lat, this._northEast.lat);\r\n\t\t\t\tthis._northEast.lng = Math.max(obj.lng, this._northEast.lng);\r\n\t\t\t}\r\n\t\t} else if (obj instanceof L.LatLngBounds) {\r\n\t\t\tthis.extend(obj._southWest);\r\n\t\t\tthis.extend(obj._northEast);\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// extend the bounds by a percentage\r\n\tpad: function (bufferRatio) { // (Number) -> LatLngBounds\r\n\t\tvar sw = this._southWest,\r\n\t\t    ne = this._northEast,\r\n\t\t    heightBuffer = Math.abs(sw.lat - ne.lat) * bufferRatio,\r\n\t\t    widthBuffer = Math.abs(sw.lng - ne.lng) * bufferRatio;\r\n\r\n\t\treturn new L.LatLngBounds(\r\n\t\t        new L.LatLng(sw.lat - heightBuffer, sw.lng - widthBuffer),\r\n\t\t        new L.LatLng(ne.lat + heightBuffer, ne.lng + widthBuffer));\r\n\t},\r\n\r\n\tgetCenter: function () { // -> LatLng\r\n\t\treturn new L.LatLng(\r\n\t\t        (this._southWest.lat + this._northEast.lat) / 2,\r\n\t\t        (this._southWest.lng + this._northEast.lng) / 2);\r\n\t},\r\n\r\n\tgetSouthWest: function () {\r\n\t\treturn this._southWest;\r\n\t},\r\n\r\n\tgetNorthEast: function () {\r\n\t\treturn this._northEast;\r\n\t},\r\n\r\n\tgetNorthWest: function () {\r\n\t\treturn new L.LatLng(this.getNorth(), this.getWest());\r\n\t},\r\n\r\n\tgetSouthEast: function () {\r\n\t\treturn new L.LatLng(this.getSouth(), this.getEast());\r\n\t},\r\n\r\n\tgetWest: function () {\r\n\t\treturn this._southWest.lng;\r\n\t},\r\n\r\n\tgetSouth: function () {\r\n\t\treturn this._southWest.lat;\r\n\t},\r\n\r\n\tgetEast: function () {\r\n\t\treturn this._northEast.lng;\r\n\t},\r\n\r\n\tgetNorth: function () {\r\n\t\treturn this._northEast.lat;\r\n\t},\r\n\r\n\tcontains: function (obj) { // (LatLngBounds) or (LatLng) -> Boolean\r\n\t\tif (typeof obj[0] === 'number' || obj instanceof L.LatLng) {\r\n\t\t\tobj = L.latLng(obj);\r\n\t\t} else {\r\n\t\t\tobj = L.latLngBounds(obj);\r\n\t\t}\r\n\r\n\t\tvar sw = this._southWest,\r\n\t\t    ne = this._northEast,\r\n\t\t    sw2, ne2;\r\n\r\n\t\tif (obj instanceof L.LatLngBounds) {\r\n\t\t\tsw2 = obj.getSouthWest();\r\n\t\t\tne2 = obj.getNorthEast();\r\n\t\t} else {\r\n\t\t\tsw2 = ne2 = obj;\r\n\t\t}\r\n\r\n\t\treturn (sw2.lat >= sw.lat) && (ne2.lat <= ne.lat) &&\r\n\t\t       (sw2.lng >= sw.lng) && (ne2.lng <= ne.lng);\r\n\t},\r\n\r\n\tintersects: function (bounds) { // (LatLngBounds)\r\n\t\tbounds = L.latLngBounds(bounds);\r\n\r\n\t\tvar sw = this._southWest,\r\n\t\t    ne = this._northEast,\r\n\t\t    sw2 = bounds.getSouthWest(),\r\n\t\t    ne2 = bounds.getNorthEast(),\r\n\r\n\t\t    latIntersects = (ne2.lat >= sw.lat) && (sw2.lat <= ne.lat),\r\n\t\t    lngIntersects = (ne2.lng >= sw.lng) && (sw2.lng <= ne.lng);\r\n\r\n\t\treturn latIntersects && lngIntersects;\r\n\t},\r\n\r\n\ttoBBoxString: function () {\r\n\t\treturn [this.getWest(), this.getSouth(), this.getEast(), this.getNorth()].join(',');\r\n\t},\r\n\r\n\tequals: function (bounds) { // (LatLngBounds)\r\n\t\tif (!bounds) { return false; }\r\n\r\n\t\tbounds = L.latLngBounds(bounds);\r\n\r\n\t\treturn this._southWest.equals(bounds.getSouthWest()) &&\r\n\t\t       this._northEast.equals(bounds.getNorthEast());\r\n\t},\r\n\r\n\tisValid: function () {\r\n\t\treturn !!(this._southWest && this._northEast);\r\n\t}\r\n};\r\n\r\n//TODO International date line?\r\n\r\nL.latLngBounds = function (a, b) { // (LatLngBounds) or (LatLng, LatLng)\r\n\tif (!a || a instanceof L.LatLngBounds) {\r\n\t\treturn a;\r\n\t}\r\n\treturn new L.LatLngBounds(a, b);\r\n};\r\n\n\n/*\r\n * L.Projection contains various geographical projections used by CRS classes.\r\n */\r\n\r\nL.Projection = {};\r\n\n\n/*\r\n * Spherical Mercator is the most popular map projection, used by EPSG:3857 CRS used by default.\r\n */\r\n\r\nL.Projection.SphericalMercator = {\r\n\tMAX_LATITUDE: 85.0511287798,\r\n\r\n\tproject: function (latlng) { // (LatLng) -> Point\r\n\t\tvar d = L.LatLng.DEG_TO_RAD,\r\n\t\t    max = this.MAX_LATITUDE,\r\n\t\t    lat = Math.max(Math.min(max, latlng.lat), -max),\r\n\t\t    x = latlng.lng * d,\r\n\t\t    y = lat * d;\r\n\r\n\t\ty = Math.log(Math.tan((Math.PI / 4) + (y / 2)));\r\n\r\n\t\treturn new L.Point(x, y);\r\n\t},\r\n\r\n\tunproject: function (point) { // (Point, Boolean) -> LatLng\r\n\t\tvar d = L.LatLng.RAD_TO_DEG,\r\n\t\t    lng = point.x * d,\r\n\t\t    lat = (2 * Math.atan(Math.exp(point.y)) - (Math.PI / 2)) * d;\r\n\r\n\t\treturn new L.LatLng(lat, lng);\r\n\t}\r\n};\r\n\n\n/*\r\n * Simple equirectangular (Plate Carree) projection, used by CRS like EPSG:4326 and Simple.\r\n */\r\n\r\nL.Projection.LonLat = {\r\n\tproject: function (latlng) {\r\n\t\treturn new L.Point(latlng.lng, latlng.lat);\r\n\t},\r\n\r\n\tunproject: function (point) {\r\n\t\treturn new L.LatLng(point.y, point.x);\r\n\t}\r\n};\r\n\n\n/*\r\n * L.CRS is a base object for all defined CRS (Coordinate Reference Systems) in Leaflet.\r\n */\r\n\r\nL.CRS = {\r\n\tlatLngToPoint: function (latlng, zoom) { // (LatLng, Number) -> Point\r\n\t\tvar projectedPoint = this.projection.project(latlng),\r\n\t\t    scale = this.scale(zoom);\r\n\r\n\t\treturn this.transformation._transform(projectedPoint, scale);\r\n\t},\r\n\r\n\tpointToLatLng: function (point, zoom) { // (Point, Number[, Boolean]) -> LatLng\r\n\t\tvar scale = this.scale(zoom),\r\n\t\t    untransformedPoint = this.transformation.untransform(point, scale);\r\n\r\n\t\treturn this.projection.unproject(untransformedPoint);\r\n\t},\r\n\r\n\tproject: function (latlng) {\r\n\t\treturn this.projection.project(latlng);\r\n\t},\r\n\r\n\tscale: function (zoom) {\r\n\t\treturn 256 * Math.pow(2, zoom);\r\n\t},\r\n\r\n\tgetSize: function (zoom) {\r\n\t\tvar s = this.scale(zoom);\r\n\t\treturn L.point(s, s);\r\n\t}\r\n};\r\n\n\n/*\n * A simple CRS that can be used for flat non-Earth maps like panoramas or game maps.\n */\n\nL.CRS.Simple = L.extend({}, L.CRS, {\n\tprojection: L.Projection.LonLat,\n\ttransformation: new L.Transformation(1, 0, -1, 0),\n\n\tscale: function (zoom) {\n\t\treturn Math.pow(2, zoom);\n\t}\n});\n\n\n/*\r\n * L.CRS.EPSG3857 (Spherical Mercator) is the most common CRS for web mapping\r\n * and is used by Leaflet by default.\r\n */\r\n\r\nL.CRS.EPSG3857 = L.extend({}, L.CRS, {\r\n\tcode: 'EPSG:3857',\r\n\r\n\tprojection: L.Projection.SphericalMercator,\r\n\ttransformation: new L.Transformation(0.5 / Math.PI, 0.5, -0.5 / Math.PI, 0.5),\r\n\r\n\tproject: function (latlng) { // (LatLng) -> Point\r\n\t\tvar projectedPoint = this.projection.project(latlng),\r\n\t\t    earthRadius = 6378137;\r\n\t\treturn projectedPoint.multiplyBy(earthRadius);\r\n\t}\r\n});\r\n\r\nL.CRS.EPSG900913 = L.extend({}, L.CRS.EPSG3857, {\r\n\tcode: 'EPSG:900913'\r\n});\r\n\n\n/*\r\n * L.CRS.EPSG4326 is a CRS popular among advanced GIS specialists.\r\n */\r\n\r\nL.CRS.EPSG4326 = L.extend({}, L.CRS, {\r\n\tcode: 'EPSG:4326',\r\n\r\n\tprojection: L.Projection.LonLat,\r\n\ttransformation: new L.Transformation(1 / 360, 0.5, -1 / 360, 0.5)\r\n});\r\n\n\n/*\r\n * L.Map is the central class of the API - it is used to create a map.\r\n */\r\n\r\nL.Map = L.Class.extend({\r\n\r\n\tincludes: L.Mixin.Events,\r\n\r\n\toptions: {\r\n\t\tcrs: L.CRS.EPSG3857,\r\n\r\n\t\t/*\r\n\t\tcenter: LatLng,\r\n\t\tzoom: Number,\r\n\t\tlayers: Array,\r\n\t\t*/\r\n\r\n\t\tfadeAnimation: L.DomUtil.TRANSITION && !L.Browser.android23,\r\n\t\ttrackResize: true,\r\n\t\tmarkerZoomAnimation: L.DomUtil.TRANSITION && L.Browser.any3d\r\n\t},\r\n\r\n\tinitialize: function (id, options) { // (HTMLElement or String, Object)\r\n\t\toptions = L.setOptions(this, options);\r\n\r\n\r\n\t\tthis._initContainer(id);\r\n\t\tthis._initLayout();\r\n\r\n\t\t// hack for https://github.com/Leaflet/Leaflet/issues/1980\r\n\t\tthis._onResize = L.bind(this._onResize, this);\r\n\r\n\t\tthis._initEvents();\r\n\r\n\t\tif (options.maxBounds) {\r\n\t\t\tthis.setMaxBounds(options.maxBounds);\r\n\t\t}\r\n\r\n\t\tif (options.center && options.zoom !== undefined) {\r\n\t\t\tthis.setView(L.latLng(options.center), options.zoom, {reset: true});\r\n\t\t}\r\n\r\n\t\tthis._handlers = [];\r\n\r\n\t\tthis._layers = {};\r\n\t\tthis._zoomBoundLayers = {};\r\n\t\tthis._tileLayersNum = 0;\r\n\r\n\t\tthis.callInitHooks();\r\n\r\n\t\tthis._addLayers(options.layers);\r\n\t},\r\n\r\n\r\n\t// public methods that modify map state\r\n\r\n\t// replaced by animation-powered implementation in Map.PanAnimation.js\r\n\tsetView: function (center, zoom) {\r\n\t\tzoom = zoom === undefined ? this.getZoom() : zoom;\r\n\t\tthis._resetView(L.latLng(center), this._limitZoom(zoom));\r\n\t\treturn this;\r\n\t},\r\n\r\n\tsetZoom: function (zoom, options) {\r\n\t\tif (!this._loaded) {\r\n\t\t\tthis._zoom = this._limitZoom(zoom);\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\treturn this.setView(this.getCenter(), zoom, {zoom: options});\r\n\t},\r\n\r\n\tzoomIn: function (delta, options) {\r\n\t\treturn this.setZoom(this._zoom + (delta || 1), options);\r\n\t},\r\n\r\n\tzoomOut: function (delta, options) {\r\n\t\treturn this.setZoom(this._zoom - (delta || 1), options);\r\n\t},\r\n\r\n\tsetZoomAround: function (latlng, zoom, options) {\r\n\t\tvar scale = this.getZoomScale(zoom),\r\n\t\t    viewHalf = this.getSize().divideBy(2),\r\n\t\t    containerPoint = latlng instanceof L.Point ? latlng : this.latLngToContainerPoint(latlng),\r\n\r\n\t\t    centerOffset = containerPoint.subtract(viewHalf).multiplyBy(1 - 1 / scale),\r\n\t\t    newCenter = this.containerPointToLatLng(viewHalf.add(centerOffset));\r\n\r\n\t\treturn this.setView(newCenter, zoom, {zoom: options});\r\n\t},\r\n\r\n\tfitBounds: function (bounds, options) {\r\n\r\n\t\toptions = options || {};\r\n\t\tbounds = bounds.getBounds ? bounds.getBounds() : L.latLngBounds(bounds);\r\n\r\n\t\tvar paddingTL = L.point(options.paddingTopLeft || options.padding || [0, 0]),\r\n\t\t    paddingBR = L.point(options.paddingBottomRight || options.padding || [0, 0]),\r\n\r\n\t\t    zoom = this.getBoundsZoom(bounds, false, paddingTL.add(paddingBR));\r\n\r\n\t\tzoom = (options.maxZoom) ? Math.min(options.maxZoom, zoom) : zoom;\r\n\r\n\t\tvar paddingOffset = paddingBR.subtract(paddingTL).divideBy(2),\r\n\r\n\t\t    swPoint = this.project(bounds.getSouthWest(), zoom),\r\n\t\t    nePoint = this.project(bounds.getNorthEast(), zoom),\r\n\t\t    center = this.unproject(swPoint.add(nePoint).divideBy(2).add(paddingOffset), zoom);\r\n\r\n\t\treturn this.setView(center, zoom, options);\r\n\t},\r\n\r\n\tfitWorld: function (options) {\r\n\t\treturn this.fitBounds([[-90, -180], [90, 180]], options);\r\n\t},\r\n\r\n\tpanTo: function (center, options) { // (LatLng)\r\n\t\treturn this.setView(center, this._zoom, {pan: options});\r\n\t},\r\n\r\n\tpanBy: function (offset) { // (Point)\r\n\t\t// replaced with animated panBy in Map.PanAnimation.js\r\n\t\tthis.fire('movestart');\r\n\r\n\t\tthis._rawPanBy(L.point(offset));\r\n\r\n\t\tthis.fire('move');\r\n\t\treturn this.fire('moveend');\r\n\t},\r\n\r\n\tsetMaxBounds: function (bounds) {\r\n\t\tbounds = L.latLngBounds(bounds);\r\n\r\n\t\tthis.options.maxBounds = bounds;\r\n\r\n\t\tif (!bounds) {\r\n\t\t\treturn this.off('moveend', this._panInsideMaxBounds, this);\r\n\t\t}\r\n\r\n\t\tif (this._loaded) {\r\n\t\t\tthis._panInsideMaxBounds();\r\n\t\t}\r\n\r\n\t\treturn this.on('moveend', this._panInsideMaxBounds, this);\r\n\t},\r\n\r\n\tpanInsideBounds: function (bounds, options) {\r\n\t\tvar center = this.getCenter(),\r\n\t\t\tnewCenter = this._limitCenter(center, this._zoom, bounds);\r\n\r\n\t\tif (center.equals(newCenter)) { return this; }\r\n\r\n\t\treturn this.panTo(newCenter, options);\r\n\t},\r\n\r\n\taddLayer: function (layer) {\r\n\t\t// TODO method is too big, refactor\r\n\r\n\t\tvar id = L.stamp(layer);\r\n\r\n\t\tif (this._layers[id]) { return this; }\r\n\r\n\t\tthis._layers[id] = layer;\r\n\r\n\t\t// TODO getMaxZoom, getMinZoom in ILayer (instead of options)\r\n\t\tif (layer.options && (!isNaN(layer.options.maxZoom) || !isNaN(layer.options.minZoom))) {\r\n\t\t\tthis._zoomBoundLayers[id] = layer;\r\n\t\t\tthis._updateZoomLevels();\r\n\t\t}\r\n\r\n\t\t// TODO looks ugly, refactor!!!\r\n\t\tif (this.options.zoomAnimation && L.TileLayer && (layer instanceof L.TileLayer)) {\r\n\t\t\tthis._tileLayersNum++;\r\n\t\t\tthis._tileLayersToLoad++;\r\n\t\t\tlayer.on('load', this._onTileLayerLoad, this);\r\n\t\t}\r\n\r\n\t\tif (this._loaded) {\r\n\t\t\tthis._layerAdd(layer);\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tremoveLayer: function (layer) {\r\n\t\tvar id = L.stamp(layer);\r\n\r\n\t\tif (!this._layers[id]) { return this; }\r\n\r\n\t\tif (this._loaded) {\r\n\t\t\tlayer.onRemove(this);\r\n\t\t}\r\n\r\n\t\tdelete this._layers[id];\r\n\r\n\t\tif (this._loaded) {\r\n\t\t\tthis.fire('layerremove', {layer: layer});\r\n\t\t}\r\n\r\n\t\tif (this._zoomBoundLayers[id]) {\r\n\t\t\tdelete this._zoomBoundLayers[id];\r\n\t\t\tthis._updateZoomLevels();\r\n\t\t}\r\n\r\n\t\t// TODO looks ugly, refactor\r\n\t\tif (this.options.zoomAnimation && L.TileLayer && (layer instanceof L.TileLayer)) {\r\n\t\t\tthis._tileLayersNum--;\r\n\t\t\tthis._tileLayersToLoad--;\r\n\t\t\tlayer.off('load', this._onTileLayerLoad, this);\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\thasLayer: function (layer) {\r\n\t\tif (!layer) { return false; }\r\n\r\n\t\treturn (L.stamp(layer) in this._layers);\r\n\t},\r\n\r\n\teachLayer: function (method, context) {\r\n\t\tfor (var i in this._layers) {\r\n\t\t\tmethod.call(context, this._layers[i]);\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\tinvalidateSize: function (options) {\r\n\t\tif (!this._loaded) { return this; }\r\n\r\n\t\toptions = L.extend({\r\n\t\t\tanimate: false,\r\n\t\t\tpan: true\r\n\t\t}, options === true ? {animate: true} : options);\r\n\r\n\t\tvar oldSize = this.getSize();\r\n\t\tthis._sizeChanged = true;\r\n\t\tthis._initialCenter = null;\r\n\r\n\t\tvar newSize = this.getSize(),\r\n\t\t    oldCenter = oldSize.divideBy(2).round(),\r\n\t\t    newCenter = newSize.divideBy(2).round(),\r\n\t\t    offset = oldCenter.subtract(newCenter);\r\n\r\n\t\tif (!offset.x && !offset.y) { return this; }\r\n\r\n\t\tif (options.animate && options.pan) {\r\n\t\t\tthis.panBy(offset);\r\n\r\n\t\t} else {\r\n\t\t\tif (options.pan) {\r\n\t\t\t\tthis._rawPanBy(offset);\r\n\t\t\t}\r\n\r\n\t\t\tthis.fire('move');\r\n\r\n\t\t\tif (options.debounceMoveend) {\r\n\t\t\t\tclearTimeout(this._sizeTimer);\r\n\t\t\t\tthis._sizeTimer = setTimeout(L.bind(this.fire, this, 'moveend'), 200);\r\n\t\t\t} else {\r\n\t\t\t\tthis.fire('moveend');\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this.fire('resize', {\r\n\t\t\toldSize: oldSize,\r\n\t\t\tnewSize: newSize\r\n\t\t});\r\n\t},\r\n\r\n\t// TODO handler.addTo\r\n\taddHandler: function (name, HandlerClass) {\r\n\t\tif (!HandlerClass) { return this; }\r\n\r\n\t\tvar handler = this[name] = new HandlerClass(this);\r\n\r\n\t\tthis._handlers.push(handler);\r\n\r\n\t\tif (this.options[name]) {\r\n\t\t\thandler.enable();\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tremove: function () {\r\n\t\tif (this._loaded) {\r\n\t\t\tthis.fire('unload');\r\n\t\t}\r\n\r\n\t\tthis._initEvents('off');\r\n\r\n\t\ttry {\r\n\t\t\t// throws error in IE6-8\r\n\t\t\tdelete this._container._leaflet;\r\n\t\t} catch (e) {\r\n\t\t\tthis._container._leaflet = undefined;\r\n\t\t}\r\n\r\n\t\tthis._clearPanes();\r\n\t\tif (this._clearControlPos) {\r\n\t\t\tthis._clearControlPos();\r\n\t\t}\r\n\r\n\t\tthis._clearHandlers();\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\r\n\t// public methods for getting map state\r\n\r\n\tgetCenter: function () { // (Boolean) -> LatLng\r\n\t\tthis._checkIfLoaded();\r\n\r\n\t\tif (this._initialCenter && !this._moved()) {\r\n\t\t\treturn this._initialCenter;\r\n\t\t}\r\n\t\treturn this.layerPointToLatLng(this._getCenterLayerPoint());\r\n\t},\r\n\r\n\tgetZoom: function () {\r\n\t\treturn this._zoom;\r\n\t},\r\n\r\n\tgetBounds: function () {\r\n\t\tvar bounds = this.getPixelBounds(),\r\n\t\t    sw = this.unproject(bounds.getBottomLeft()),\r\n\t\t    ne = this.unproject(bounds.getTopRight());\r\n\r\n\t\treturn new L.LatLngBounds(sw, ne);\r\n\t},\r\n\r\n\tgetMinZoom: function () {\r\n\t\treturn this.options.minZoom === undefined ?\r\n\t\t\t(this._layersMinZoom === undefined ? 0 : this._layersMinZoom) :\r\n\t\t\tthis.options.minZoom;\r\n\t},\r\n\r\n\tgetMaxZoom: function () {\r\n\t\treturn this.options.maxZoom === undefined ?\r\n\t\t\t(this._layersMaxZoom === undefined ? Infinity : this._layersMaxZoom) :\r\n\t\t\tthis.options.maxZoom;\r\n\t},\r\n\r\n\tgetBoundsZoom: function (bounds, inside, padding) { // (LatLngBounds[, Boolean, Point]) -> Number\r\n\t\tbounds = L.latLngBounds(bounds);\r\n\r\n\t\tvar zoom = this.getMinZoom() - (inside ? 1 : 0),\r\n\t\t    maxZoom = this.getMaxZoom(),\r\n\t\t    size = this.getSize(),\r\n\r\n\t\t    nw = bounds.getNorthWest(),\r\n\t\t    se = bounds.getSouthEast(),\r\n\r\n\t\t    zoomNotFound = true,\r\n\t\t    boundsSize;\r\n\r\n\t\tpadding = L.point(padding || [0, 0]);\r\n\r\n\t\tdo {\r\n\t\t\tzoom++;\r\n\t\t\tboundsSize = this.project(se, zoom).subtract(this.project(nw, zoom)).add(padding);\r\n\t\t\tzoomNotFound = !inside ? size.contains(boundsSize) : boundsSize.x < size.x || boundsSize.y < size.y;\r\n\r\n\t\t} while (zoomNotFound && zoom <= maxZoom);\r\n\r\n\t\tif (zoomNotFound && inside) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn inside ? zoom : zoom - 1;\r\n\t},\r\n\r\n\tgetSize: function () {\r\n\t\tif (!this._size || this._sizeChanged) {\r\n\t\t\tthis._size = new L.Point(\r\n\t\t\t\tthis._container.clientWidth,\r\n\t\t\t\tthis._container.clientHeight);\r\n\r\n\t\t\tthis._sizeChanged = false;\r\n\t\t}\r\n\t\treturn this._size.clone();\r\n\t},\r\n\r\n\tgetPixelBounds: function () {\r\n\t\tvar topLeftPoint = this._getTopLeftPoint();\r\n\t\treturn new L.Bounds(topLeftPoint, topLeftPoint.add(this.getSize()));\r\n\t},\r\n\r\n\tgetPixelOrigin: function () {\r\n\t\tthis._checkIfLoaded();\r\n\t\treturn this._initialTopLeftPoint;\r\n\t},\r\n\r\n\tgetPanes: function () {\r\n\t\treturn this._panes;\r\n\t},\r\n\r\n\tgetContainer: function () {\r\n\t\treturn this._container;\r\n\t},\r\n\r\n\r\n\t// TODO replace with universal implementation after refactoring projections\r\n\r\n\tgetZoomScale: function (toZoom) {\r\n\t\tvar crs = this.options.crs;\r\n\t\treturn crs.scale(toZoom) / crs.scale(this._zoom);\r\n\t},\r\n\r\n\tgetScaleZoom: function (scale) {\r\n\t\treturn this._zoom + (Math.log(scale) / Math.LN2);\r\n\t},\r\n\r\n\r\n\t// conversion methods\r\n\r\n\tproject: function (latlng, zoom) { // (LatLng[, Number]) -> Point\r\n\t\tzoom = zoom === undefined ? this._zoom : zoom;\r\n\t\treturn this.options.crs.latLngToPoint(L.latLng(latlng), zoom);\r\n\t},\r\n\r\n\tunproject: function (point, zoom) { // (Point[, Number]) -> LatLng\r\n\t\tzoom = zoom === undefined ? this._zoom : zoom;\r\n\t\treturn this.options.crs.pointToLatLng(L.point(point), zoom);\r\n\t},\r\n\r\n\tlayerPointToLatLng: function (point) { // (Point)\r\n\t\tvar projectedPoint = L.point(point).add(this.getPixelOrigin());\r\n\t\treturn this.unproject(projectedPoint);\r\n\t},\r\n\r\n\tlatLngToLayerPoint: function (latlng) { // (LatLng)\r\n\t\tvar projectedPoint = this.project(L.latLng(latlng))._round();\r\n\t\treturn projectedPoint._subtract(this.getPixelOrigin());\r\n\t},\r\n\r\n\tcontainerPointToLayerPoint: function (point) { // (Point)\r\n\t\treturn L.point(point).subtract(this._getMapPanePos());\r\n\t},\r\n\r\n\tlayerPointToContainerPoint: function (point) { // (Point)\r\n\t\treturn L.point(point).add(this._getMapPanePos());\r\n\t},\r\n\r\n\tcontainerPointToLatLng: function (point) {\r\n\t\tvar layerPoint = this.containerPointToLayerPoint(L.point(point));\r\n\t\treturn this.layerPointToLatLng(layerPoint);\r\n\t},\r\n\r\n\tlatLngToContainerPoint: function (latlng) {\r\n\t\treturn this.layerPointToContainerPoint(this.latLngToLayerPoint(L.latLng(latlng)));\r\n\t},\r\n\r\n\tmouseEventToContainerPoint: function (e) { // (MouseEvent)\r\n\t\treturn L.DomEvent.getMousePosition(e, this._container);\r\n\t},\r\n\r\n\tmouseEventToLayerPoint: function (e) { // (MouseEvent)\r\n\t\treturn this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e));\r\n\t},\r\n\r\n\tmouseEventToLatLng: function (e) { // (MouseEvent)\r\n\t\treturn this.layerPointToLatLng(this.mouseEventToLayerPoint(e));\r\n\t},\r\n\r\n\r\n\t// map initialization methods\r\n\r\n\t_initContainer: function (id) {\r\n\t\tvar container = this._container = L.DomUtil.get(id);\r\n\r\n\t\tif (!container) {\r\n\t\t\tthrow new Error('Map container not found.');\r\n\t\t} else if (container._leaflet) {\r\n\t\t\tthrow new Error('Map container is already initialized.');\r\n\t\t}\r\n\r\n\t\tcontainer._leaflet = true;\r\n\t},\r\n\r\n\t_initLayout: function () {\r\n\t\tvar container = this._container;\r\n\r\n\t\tL.DomUtil.addClass(container, 'leaflet-container' +\r\n\t\t\t(L.Browser.touch ? ' leaflet-touch' : '') +\r\n\t\t\t(L.Browser.retina ? ' leaflet-retina' : '') +\r\n\t\t\t(L.Browser.ielt9 ? ' leaflet-oldie' : '') +\r\n\t\t\t(this.options.fadeAnimation ? ' leaflet-fade-anim' : ''));\r\n\r\n\t\tvar position = L.DomUtil.getStyle(container, 'position');\r\n\r\n\t\tif (position !== 'absolute' && position !== 'relative' && position !== 'fixed') {\r\n\t\t\tcontainer.style.position = 'relative';\r\n\t\t}\r\n\r\n\t\tthis._initPanes();\r\n\r\n\t\tif (this._initControlPos) {\r\n\t\t\tthis._initControlPos();\r\n\t\t}\r\n\t},\r\n\r\n\t_initPanes: function () {\r\n\t\tvar panes = this._panes = {};\r\n\r\n\t\tthis._mapPane = panes.mapPane = this._createPane('leaflet-map-pane', this._container);\r\n\r\n\t\tthis._tilePane = panes.tilePane = this._createPane('leaflet-tile-pane', this._mapPane);\r\n\t\tpanes.objectsPane = this._createPane('leaflet-objects-pane', this._mapPane);\r\n\t\tpanes.shadowPane = this._createPane('leaflet-shadow-pane');\r\n\t\tpanes.overlayPane = this._createPane('leaflet-overlay-pane');\r\n\t\tpanes.markerPane = this._createPane('leaflet-marker-pane');\r\n\t\tpanes.popupPane = this._createPane('leaflet-popup-pane');\r\n\r\n\t\tvar zoomHide = ' leaflet-zoom-hide';\r\n\r\n\t\tif (!this.options.markerZoomAnimation) {\r\n\t\t\tL.DomUtil.addClass(panes.markerPane, zoomHide);\r\n\t\t\tL.DomUtil.addClass(panes.shadowPane, zoomHide);\r\n\t\t\tL.DomUtil.addClass(panes.popupPane, zoomHide);\r\n\t\t}\r\n\t},\r\n\r\n\t_createPane: function (className, container) {\r\n\t\treturn L.DomUtil.create('div', className, container || this._panes.objectsPane);\r\n\t},\r\n\r\n\t_clearPanes: function () {\r\n\t\tthis._container.removeChild(this._mapPane);\r\n\t},\r\n\r\n\t_addLayers: function (layers) {\r\n\t\tlayers = layers ? (L.Util.isArray(layers) ? layers : [layers]) : [];\r\n\r\n\t\tfor (var i = 0, len = layers.length; i < len; i++) {\r\n\t\t\tthis.addLayer(layers[i]);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// private methods that modify map state\r\n\r\n\t_resetView: function (center, zoom, preserveMapOffset, afterZoomAnim) {\r\n\r\n\t\tvar zoomChanged = (this._zoom !== zoom);\r\n\r\n\t\tif (!afterZoomAnim) {\r\n\t\t\tthis.fire('movestart');\r\n\r\n\t\t\tif (zoomChanged) {\r\n\t\t\t\tthis.fire('zoomstart');\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._zoom = zoom;\r\n\t\tthis._initialCenter = center;\r\n\r\n\t\tthis._initialTopLeftPoint = this._getNewTopLeftPoint(center);\r\n\r\n\t\tif (!preserveMapOffset) {\r\n\t\t\tL.DomUtil.setPosition(this._mapPane, new L.Point(0, 0));\r\n\t\t} else {\r\n\t\t\tthis._initialTopLeftPoint._add(this._getMapPanePos());\r\n\t\t}\r\n\r\n\t\tthis._tileLayersToLoad = this._tileLayersNum;\r\n\r\n\t\tvar loading = !this._loaded;\r\n\t\tthis._loaded = true;\r\n\r\n\t\tthis.fire('viewreset', {hard: !preserveMapOffset});\r\n\r\n\t\tif (loading) {\r\n\t\t\tthis.fire('load');\r\n\t\t\tthis.eachLayer(this._layerAdd, this);\r\n\t\t}\r\n\r\n\t\tthis.fire('move');\r\n\r\n\t\tif (zoomChanged || afterZoomAnim) {\r\n\t\t\tthis.fire('zoomend');\r\n\t\t}\r\n\r\n\t\tthis.fire('moveend', {hard: !preserveMapOffset});\r\n\t},\r\n\r\n\t_rawPanBy: function (offset) {\r\n\t\tL.DomUtil.setPosition(this._mapPane, this._getMapPanePos().subtract(offset));\r\n\t},\r\n\r\n\t_getZoomSpan: function () {\r\n\t\treturn this.getMaxZoom() - this.getMinZoom();\r\n\t},\r\n\r\n\t_updateZoomLevels: function () {\r\n\t\tvar i,\r\n\t\t\tminZoom = Infinity,\r\n\t\t\tmaxZoom = -Infinity,\r\n\t\t\toldZoomSpan = this._getZoomSpan();\r\n\r\n\t\tfor (i in this._zoomBoundLayers) {\r\n\t\t\tvar layer = this._zoomBoundLayers[i];\r\n\t\t\tif (!isNaN(layer.options.minZoom)) {\r\n\t\t\t\tminZoom = Math.min(minZoom, layer.options.minZoom);\r\n\t\t\t}\r\n\t\t\tif (!isNaN(layer.options.maxZoom)) {\r\n\t\t\t\tmaxZoom = Math.max(maxZoom, layer.options.maxZoom);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (i === undefined) { // we have no tilelayers\r\n\t\t\tthis._layersMaxZoom = this._layersMinZoom = undefined;\r\n\t\t} else {\r\n\t\t\tthis._layersMaxZoom = maxZoom;\r\n\t\t\tthis._layersMinZoom = minZoom;\r\n\t\t}\r\n\r\n\t\tif (oldZoomSpan !== this._getZoomSpan()) {\r\n\t\t\tthis.fire('zoomlevelschange');\r\n\t\t}\r\n\t},\r\n\r\n\t_panInsideMaxBounds: function () {\r\n\t\tthis.panInsideBounds(this.options.maxBounds);\r\n\t},\r\n\r\n\t_checkIfLoaded: function () {\r\n\t\tif (!this._loaded) {\r\n\t\t\tthrow new Error('Set map center and zoom first.');\r\n\t\t}\r\n\t},\r\n\r\n\t// map events\r\n\r\n\t_initEvents: function (onOff) {\r\n\t\tif (!L.DomEvent) { return; }\r\n\r\n\t\tonOff = onOff || 'on';\r\n\r\n\t\tL.DomEvent[onOff](this._container, 'click', this._onMouseClick, this);\r\n\r\n\t\tvar events = ['dblclick', 'mousedown', 'mouseup', 'mouseenter',\r\n\t\t              'mouseleave', 'mousemove', 'contextmenu'],\r\n\t\t    i, len;\r\n\r\n\t\tfor (i = 0, len = events.length; i < len; i++) {\r\n\t\t\tL.DomEvent[onOff](this._container, events[i], this._fireMouseEvent, this);\r\n\t\t}\r\n\r\n\t\tif (this.options.trackResize) {\r\n\t\t\tL.DomEvent[onOff](window, 'resize', this._onResize, this);\r\n\t\t}\r\n\t},\r\n\r\n\t_onResize: function () {\r\n\t\tL.Util.cancelAnimFrame(this._resizeRequest);\r\n\t\tthis._resizeRequest = L.Util.requestAnimFrame(\r\n\t\t        function () { this.invalidateSize({debounceMoveend: true}); }, this, false, this._container);\r\n\t},\r\n\r\n\t_onMouseClick: function (e) {\r\n\t\tif (!this._loaded || (!e._simulated &&\r\n\t\t        ((this.dragging && this.dragging.moved()) ||\r\n\t\t         (this.boxZoom  && this.boxZoom.moved()))) ||\r\n\t\t            L.DomEvent._skipped(e)) { return; }\r\n\r\n\t\tthis.fire('preclick');\r\n\t\tthis._fireMouseEvent(e);\r\n\t},\r\n\r\n\t_fireMouseEvent: function (e) {\r\n\t\tif (!this._loaded || L.DomEvent._skipped(e)) { return; }\r\n\r\n\t\tvar type = e.type;\r\n\r\n\t\ttype = (type === 'mouseenter' ? 'mouseover' : (type === 'mouseleave' ? 'mouseout' : type));\r\n\r\n\t\tif (!this.hasEventListeners(type)) { return; }\r\n\r\n\t\tif (type === 'contextmenu') {\r\n\t\t\tL.DomEvent.preventDefault(e);\r\n\t\t}\r\n\r\n\t\tvar containerPoint = this.mouseEventToContainerPoint(e),\r\n\t\t    layerPoint = this.containerPointToLayerPoint(containerPoint),\r\n\t\t    latlng = this.layerPointToLatLng(layerPoint);\r\n\r\n\t\tthis.fire(type, {\r\n\t\t\tlatlng: latlng,\r\n\t\t\tlayerPoint: layerPoint,\r\n\t\t\tcontainerPoint: containerPoint,\r\n\t\t\toriginalEvent: e\r\n\t\t});\r\n\t},\r\n\r\n\t_onTileLayerLoad: function () {\r\n\t\tthis._tileLayersToLoad--;\r\n\t\tif (this._tileLayersNum && !this._tileLayersToLoad) {\r\n\t\t\tthis.fire('tilelayersload');\r\n\t\t}\r\n\t},\r\n\r\n\t_clearHandlers: function () {\r\n\t\tfor (var i = 0, len = this._handlers.length; i < len; i++) {\r\n\t\t\tthis._handlers[i].disable();\r\n\t\t}\r\n\t},\r\n\r\n\twhenReady: function (callback, context) {\r\n\t\tif (this._loaded) {\r\n\t\t\tcallback.call(context || this, this);\r\n\t\t} else {\r\n\t\t\tthis.on('load', callback, context);\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\t_layerAdd: function (layer) {\r\n\t\tlayer.onAdd(this);\r\n\t\tthis.fire('layeradd', {layer: layer});\r\n\t},\r\n\r\n\r\n\t// private methods for getting map state\r\n\r\n\t_getMapPanePos: function () {\r\n\t\treturn L.DomUtil.getPosition(this._mapPane);\r\n\t},\r\n\r\n\t_moved: function () {\r\n\t\tvar pos = this._getMapPanePos();\r\n\t\treturn pos && !pos.equals([0, 0]);\r\n\t},\r\n\r\n\t_getTopLeftPoint: function () {\r\n\t\treturn this.getPixelOrigin().subtract(this._getMapPanePos());\r\n\t},\r\n\r\n\t_getNewTopLeftPoint: function (center, zoom) {\r\n\t\tvar viewHalf = this.getSize()._divideBy(2);\r\n\t\t// TODO round on display, not calculation to increase precision?\r\n\t\treturn this.project(center, zoom)._subtract(viewHalf)._round();\r\n\t},\r\n\r\n\t_latLngToNewLayerPoint: function (latlng, newZoom, newCenter) {\r\n\t\tvar topLeft = this._getNewTopLeftPoint(newCenter, newZoom).add(this._getMapPanePos());\r\n\t\treturn this.project(latlng, newZoom)._subtract(topLeft);\r\n\t},\r\n\r\n\t// layer point of the current center\r\n\t_getCenterLayerPoint: function () {\r\n\t\treturn this.containerPointToLayerPoint(this.getSize()._divideBy(2));\r\n\t},\r\n\r\n\t// offset of the specified place to the current center in pixels\r\n\t_getCenterOffset: function (latlng) {\r\n\t\treturn this.latLngToLayerPoint(latlng).subtract(this._getCenterLayerPoint());\r\n\t},\r\n\r\n\t// adjust center for view to get inside bounds\r\n\t_limitCenter: function (center, zoom, bounds) {\r\n\r\n\t\tif (!bounds) { return center; }\r\n\r\n\t\tvar centerPoint = this.project(center, zoom),\r\n\t\t    viewHalf = this.getSize().divideBy(2),\r\n\t\t    viewBounds = new L.Bounds(centerPoint.subtract(viewHalf), centerPoint.add(viewHalf)),\r\n\t\t    offset = this._getBoundsOffset(viewBounds, bounds, zoom);\r\n\r\n\t\treturn this.unproject(centerPoint.add(offset), zoom);\r\n\t},\r\n\r\n\t// adjust offset for view to get inside bounds\r\n\t_limitOffset: function (offset, bounds) {\r\n\t\tif (!bounds) { return offset; }\r\n\r\n\t\tvar viewBounds = this.getPixelBounds(),\r\n\t\t    newBounds = new L.Bounds(viewBounds.min.add(offset), viewBounds.max.add(offset));\r\n\r\n\t\treturn offset.add(this._getBoundsOffset(newBounds, bounds));\r\n\t},\r\n\r\n\t// returns offset needed for pxBounds to get inside maxBounds at a specified zoom\r\n\t_getBoundsOffset: function (pxBounds, maxBounds, zoom) {\r\n\t\tvar nwOffset = this.project(maxBounds.getNorthWest(), zoom).subtract(pxBounds.min),\r\n\t\t    seOffset = this.project(maxBounds.getSouthEast(), zoom).subtract(pxBounds.max),\r\n\r\n\t\t    dx = this._rebound(nwOffset.x, -seOffset.x),\r\n\t\t    dy = this._rebound(nwOffset.y, -seOffset.y);\r\n\r\n\t\treturn new L.Point(dx, dy);\r\n\t},\r\n\r\n\t_rebound: function (left, right) {\r\n\t\treturn left + right > 0 ?\r\n\t\t\tMath.round(left - right) / 2 :\r\n\t\t\tMath.max(0, Math.ceil(left)) - Math.max(0, Math.floor(right));\r\n\t},\r\n\r\n\t_limitZoom: function (zoom) {\r\n\t\tvar min = this.getMinZoom(),\r\n\t\t    max = this.getMaxZoom();\r\n\r\n\t\treturn Math.max(min, Math.min(max, zoom));\r\n\t}\r\n});\r\n\r\nL.map = function (id, options) {\r\n\treturn new L.Map(id, options);\r\n};\r\n\n\n/*\r\n * Mercator projection that takes into account that the Earth is not a perfect sphere.\r\n * Less popular than spherical mercator; used by projections like EPSG:3395.\r\n */\r\n\r\nL.Projection.Mercator = {\r\n\tMAX_LATITUDE: 85.0840591556,\r\n\r\n\tR_MINOR: 6356752.314245179,\r\n\tR_MAJOR: 6378137,\r\n\r\n\tproject: function (latlng) { // (LatLng) -> Point\r\n\t\tvar d = L.LatLng.DEG_TO_RAD,\r\n\t\t    max = this.MAX_LATITUDE,\r\n\t\t    lat = Math.max(Math.min(max, latlng.lat), -max),\r\n\t\t    r = this.R_MAJOR,\r\n\t\t    r2 = this.R_MINOR,\r\n\t\t    x = latlng.lng * d * r,\r\n\t\t    y = lat * d,\r\n\t\t    tmp = r2 / r,\r\n\t\t    eccent = Math.sqrt(1.0 - tmp * tmp),\r\n\t\t    con = eccent * Math.sin(y);\r\n\r\n\t\tcon = Math.pow((1 - con) / (1 + con), eccent * 0.5);\r\n\r\n\t\tvar ts = Math.tan(0.5 * ((Math.PI * 0.5) - y)) / con;\r\n\t\ty = -r * Math.log(ts);\r\n\r\n\t\treturn new L.Point(x, y);\r\n\t},\r\n\r\n\tunproject: function (point) { // (Point, Boolean) -> LatLng\r\n\t\tvar d = L.LatLng.RAD_TO_DEG,\r\n\t\t    r = this.R_MAJOR,\r\n\t\t    r2 = this.R_MINOR,\r\n\t\t    lng = point.x * d / r,\r\n\t\t    tmp = r2 / r,\r\n\t\t    eccent = Math.sqrt(1 - (tmp * tmp)),\r\n\t\t    ts = Math.exp(- point.y / r),\r\n\t\t    phi = (Math.PI / 2) - 2 * Math.atan(ts),\r\n\t\t    numIter = 15,\r\n\t\t    tol = 1e-7,\r\n\t\t    i = numIter,\r\n\t\t    dphi = 0.1,\r\n\t\t    con;\r\n\r\n\t\twhile ((Math.abs(dphi) > tol) && (--i > 0)) {\r\n\t\t\tcon = eccent * Math.sin(phi);\r\n\t\t\tdphi = (Math.PI / 2) - 2 * Math.atan(ts *\r\n\t\t\t            Math.pow((1.0 - con) / (1.0 + con), 0.5 * eccent)) - phi;\r\n\t\t\tphi += dphi;\r\n\t\t}\r\n\r\n\t\treturn new L.LatLng(phi * d, lng);\r\n\t}\r\n};\r\n\n\n\r\nL.CRS.EPSG3395 = L.extend({}, L.CRS, {\r\n\tcode: 'EPSG:3395',\r\n\r\n\tprojection: L.Projection.Mercator,\r\n\r\n\ttransformation: (function () {\r\n\t\tvar m = L.Projection.Mercator,\r\n\t\t    r = m.R_MAJOR,\r\n\t\t    scale = 0.5 / (Math.PI * r);\r\n\r\n\t\treturn new L.Transformation(scale, 0.5, -scale, 0.5);\r\n\t}())\r\n});\r\n\n\n/*\r\n * L.TileLayer is used for standard xyz-numbered tile layers.\r\n */\r\n\r\nL.TileLayer = L.Class.extend({\r\n\tincludes: L.Mixin.Events,\r\n\r\n\toptions: {\r\n\t\tminZoom: 0,\r\n\t\tmaxZoom: 18,\r\n\t\ttileSize: 256,\r\n\t\tsubdomains: 'abc',\r\n\t\terrorTileUrl: '',\r\n\t\tattribution: '',\r\n\t\tzoomOffset: 0,\r\n\t\topacity: 1,\r\n\t\t/*\r\n\t\tmaxNativeZoom: null,\r\n\t\tzIndex: null,\r\n\t\ttms: false,\r\n\t\tcontinuousWorld: false,\r\n\t\tnoWrap: false,\r\n\t\tzoomReverse: false,\r\n\t\tdetectRetina: false,\r\n\t\treuseTiles: false,\r\n\t\tbounds: false,\r\n\t\t*/\r\n\t\tunloadInvisibleTiles: L.Browser.mobile,\r\n\t\tupdateWhenIdle: L.Browser.mobile\r\n\t},\r\n\r\n\tinitialize: function (url, options) {\r\n\t\toptions = L.setOptions(this, options);\r\n\r\n\t\t// detecting retina displays, adjusting tileSize and zoom levels\r\n\t\tif (options.detectRetina && L.Browser.retina && options.maxZoom > 0) {\r\n\r\n\t\t\toptions.tileSize = Math.floor(options.tileSize / 2);\r\n\t\t\toptions.zoomOffset++;\r\n\r\n\t\t\tif (options.minZoom > 0) {\r\n\t\t\t\toptions.minZoom--;\r\n\t\t\t}\r\n\t\t\tthis.options.maxZoom--;\r\n\t\t}\r\n\r\n\t\tif (options.bounds) {\r\n\t\t\toptions.bounds = L.latLngBounds(options.bounds);\r\n\t\t}\r\n\r\n\t\tthis._url = url;\r\n\r\n\t\tvar subdomains = this.options.subdomains;\r\n\r\n\t\tif (typeof subdomains === 'string') {\r\n\t\t\tthis.options.subdomains = subdomains.split('');\r\n\t\t}\r\n\t},\r\n\r\n\tonAdd: function (map) {\r\n\t\tthis._map = map;\r\n\t\tthis._animated = map._zoomAnimated;\r\n\r\n\t\t// create a container div for tiles\r\n\t\tthis._initContainer();\r\n\r\n\t\t// set up events\r\n\t\tmap.on({\r\n\t\t\t'viewreset': this._reset,\r\n\t\t\t'moveend': this._update\r\n\t\t}, this);\r\n\r\n\t\tif (this._animated) {\r\n\t\t\tmap.on({\r\n\t\t\t\t'zoomanim': this._animateZoom,\r\n\t\t\t\t'zoomend': this._endZoomAnim\r\n\t\t\t}, this);\r\n\t\t}\r\n\r\n\t\tif (!this.options.updateWhenIdle) {\r\n\t\t\tthis._limitedUpdate = L.Util.limitExecByInterval(this._update, 150, this);\r\n\t\t\tmap.on('move', this._limitedUpdate, this);\r\n\t\t}\r\n\r\n\t\tthis._reset();\r\n\t\tthis._update();\r\n\t},\r\n\r\n\taddTo: function (map) {\r\n\t\tmap.addLayer(this);\r\n\t\treturn this;\r\n\t},\r\n\r\n\tonRemove: function (map) {\r\n\t\tthis._container.parentNode.removeChild(this._container);\r\n\r\n\t\tmap.off({\r\n\t\t\t'viewreset': this._reset,\r\n\t\t\t'moveend': this._update\r\n\t\t}, this);\r\n\r\n\t\tif (this._animated) {\r\n\t\t\tmap.off({\r\n\t\t\t\t'zoomanim': this._animateZoom,\r\n\t\t\t\t'zoomend': this._endZoomAnim\r\n\t\t\t}, this);\r\n\t\t}\r\n\r\n\t\tif (!this.options.updateWhenIdle) {\r\n\t\t\tmap.off('move', this._limitedUpdate, this);\r\n\t\t}\r\n\r\n\t\tthis._container = null;\r\n\t\tthis._map = null;\r\n\t},\r\n\r\n\tbringToFront: function () {\r\n\t\tvar pane = this._map._panes.tilePane;\r\n\r\n\t\tif (this._container) {\r\n\t\t\tpane.appendChild(this._container);\r\n\t\t\tthis._setAutoZIndex(pane, Math.max);\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tbringToBack: function () {\r\n\t\tvar pane = this._map._panes.tilePane;\r\n\r\n\t\tif (this._container) {\r\n\t\t\tpane.insertBefore(this._container, pane.firstChild);\r\n\t\t\tthis._setAutoZIndex(pane, Math.min);\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tgetAttribution: function () {\r\n\t\treturn this.options.attribution;\r\n\t},\r\n\r\n\tgetContainer: function () {\r\n\t\treturn this._container;\r\n\t},\r\n\r\n\tsetOpacity: function (opacity) {\r\n\t\tthis.options.opacity = opacity;\r\n\r\n\t\tif (this._map) {\r\n\t\t\tthis._updateOpacity();\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tsetZIndex: function (zIndex) {\r\n\t\tthis.options.zIndex = zIndex;\r\n\t\tthis._updateZIndex();\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tsetUrl: function (url, noRedraw) {\r\n\t\tthis._url = url;\r\n\r\n\t\tif (!noRedraw) {\r\n\t\t\tthis.redraw();\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tredraw: function () {\r\n\t\tif (this._map) {\r\n\t\t\tthis._reset({hard: true});\r\n\t\t\tthis._update();\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\t_updateZIndex: function () {\r\n\t\tif (this._container && this.options.zIndex !== undefined) {\r\n\t\t\tthis._container.style.zIndex = this.options.zIndex;\r\n\t\t}\r\n\t},\r\n\r\n\t_setAutoZIndex: function (pane, compare) {\r\n\r\n\t\tvar layers = pane.children,\r\n\t\t    edgeZIndex = -compare(Infinity, -Infinity), // -Infinity for max, Infinity for min\r\n\t\t    zIndex, i, len;\r\n\r\n\t\tfor (i = 0, len = layers.length; i < len; i++) {\r\n\r\n\t\t\tif (layers[i] !== this._container) {\r\n\t\t\t\tzIndex = parseInt(layers[i].style.zIndex, 10);\r\n\r\n\t\t\t\tif (!isNaN(zIndex)) {\r\n\t\t\t\t\tedgeZIndex = compare(edgeZIndex, zIndex);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.options.zIndex = this._container.style.zIndex =\r\n\t\t        (isFinite(edgeZIndex) ? edgeZIndex : 0) + compare(1, -1);\r\n\t},\r\n\r\n\t_updateOpacity: function () {\r\n\t\tvar i,\r\n\t\t    tiles = this._tiles;\r\n\r\n\t\tif (L.Browser.ielt9) {\r\n\t\t\tfor (i in tiles) {\r\n\t\t\t\tL.DomUtil.setOpacity(tiles[i], this.options.opacity);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tL.DomUtil.setOpacity(this._container, this.options.opacity);\r\n\t\t}\r\n\t},\r\n\r\n\t_initContainer: function () {\r\n\t\tvar tilePane = this._map._panes.tilePane;\r\n\r\n\t\tif (!this._container) {\r\n\t\t\tthis._container = L.DomUtil.create('div', 'leaflet-layer');\r\n\r\n\t\t\tthis._updateZIndex();\r\n\r\n\t\t\tif (this._animated) {\r\n\t\t\t\tvar className = 'leaflet-tile-container';\r\n\r\n\t\t\t\tthis._bgBuffer = L.DomUtil.create('div', className, this._container);\r\n\t\t\t\tthis._tileContainer = L.DomUtil.create('div', className, this._container);\r\n\r\n\t\t\t} else {\r\n\t\t\t\tthis._tileContainer = this._container;\r\n\t\t\t}\r\n\r\n\t\t\ttilePane.appendChild(this._container);\r\n\r\n\t\t\tif (this.options.opacity < 1) {\r\n\t\t\t\tthis._updateOpacity();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t_reset: function (e) {\r\n\t\tfor (var key in this._tiles) {\r\n\t\t\tthis.fire('tileunload', {tile: this._tiles[key]});\r\n\t\t}\r\n\r\n\t\tthis._tiles = {};\r\n\t\tthis._tilesToLoad = 0;\r\n\r\n\t\tif (this.options.reuseTiles) {\r\n\t\t\tthis._unusedTiles = [];\r\n\t\t}\r\n\r\n\t\tthis._tileContainer.innerHTML = '';\r\n\r\n\t\tif (this._animated && e && e.hard) {\r\n\t\t\tthis._clearBgBuffer();\r\n\t\t}\r\n\r\n\t\tthis._initContainer();\r\n\t},\r\n\r\n\t_getTileSize: function () {\r\n\t\tvar map = this._map,\r\n\t\t    zoom = map.getZoom() + this.options.zoomOffset,\r\n\t\t    zoomN = this.options.maxNativeZoom,\r\n\t\t    tileSize = this.options.tileSize;\r\n\r\n\t\tif (zoomN && zoom > zoomN) {\r\n\t\t\ttileSize = Math.round(map.getZoomScale(zoom) / map.getZoomScale(zoomN) * tileSize);\r\n\t\t}\r\n\r\n\t\treturn tileSize;\r\n\t},\r\n\r\n\t_update: function () {\r\n\r\n\t\tif (!this._map) { return; }\r\n\r\n\t\tvar map = this._map,\r\n\t\t    bounds = map.getPixelBounds(),\r\n\t\t    zoom = map.getZoom(),\r\n\t\t    tileSize = this._getTileSize();\r\n\r\n\t\tif (zoom > this.options.maxZoom || zoom < this.options.minZoom) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar tileBounds = L.bounds(\r\n\t\t        bounds.min.divideBy(tileSize)._floor(),\r\n\t\t        bounds.max.divideBy(tileSize)._floor());\r\n\r\n\t\tthis._addTilesFromCenterOut(tileBounds);\r\n\r\n\t\tif (this.options.unloadInvisibleTiles || this.options.reuseTiles) {\r\n\t\t\tthis._removeOtherTiles(tileBounds);\r\n\t\t}\r\n\t},\r\n\r\n\t_addTilesFromCenterOut: function (bounds) {\r\n\t\tvar queue = [],\r\n\t\t    center = bounds.getCenter();\r\n\r\n\t\tvar j, i, point;\r\n\r\n\t\tfor (j = bounds.min.y; j <= bounds.max.y; j++) {\r\n\t\t\tfor (i = bounds.min.x; i <= bounds.max.x; i++) {\r\n\t\t\t\tpoint = new L.Point(i, j);\r\n\r\n\t\t\t\tif (this._tileShouldBeLoaded(point)) {\r\n\t\t\t\t\tqueue.push(point);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar tilesToLoad = queue.length;\r\n\r\n\t\tif (tilesToLoad === 0) { return; }\r\n\r\n\t\t// load tiles in order of their distance to center\r\n\t\tqueue.sort(function (a, b) {\r\n\t\t\treturn a.distanceTo(center) - b.distanceTo(center);\r\n\t\t});\r\n\r\n\t\tvar fragment = document.createDocumentFragment();\r\n\r\n\t\t// if its the first batch of tiles to load\r\n\t\tif (!this._tilesToLoad) {\r\n\t\t\tthis.fire('loading');\r\n\t\t}\r\n\r\n\t\tthis._tilesToLoad += tilesToLoad;\r\n\r\n\t\tfor (i = 0; i < tilesToLoad; i++) {\r\n\t\t\tthis._addTile(queue[i], fragment);\r\n\t\t}\r\n\r\n\t\tthis._tileContainer.appendChild(fragment);\r\n\t},\r\n\r\n\t_tileShouldBeLoaded: function (tilePoint) {\r\n\t\tif ((tilePoint.x + ':' + tilePoint.y) in this._tiles) {\r\n\t\t\treturn false; // already loaded\r\n\t\t}\r\n\r\n\t\tvar options = this.options;\r\n\r\n\t\tif (!options.continuousWorld) {\r\n\t\t\tvar limit = this._getWrapTileNum();\r\n\r\n\t\t\t// don't load if exceeds world bounds\r\n\t\t\tif ((options.noWrap && (tilePoint.x < 0 || tilePoint.x >= limit.x)) ||\r\n\t\t\t\ttilePoint.y < 0 || tilePoint.y >= limit.y) { return false; }\r\n\t\t}\r\n\r\n\t\tif (options.bounds) {\r\n\t\t\tvar tileSize = this._getTileSize(),\r\n\t\t\t    nwPoint = tilePoint.multiplyBy(tileSize),\r\n\t\t\t    sePoint = nwPoint.add([tileSize, tileSize]),\r\n\t\t\t    nw = this._map.unproject(nwPoint),\r\n\t\t\t    se = this._map.unproject(sePoint);\r\n\r\n\t\t\t// TODO temporary hack, will be removed after refactoring projections\r\n\t\t\t// https://github.com/Leaflet/Leaflet/issues/1618\r\n\t\t\tif (!options.continuousWorld && !options.noWrap) {\r\n\t\t\t\tnw = nw.wrap();\r\n\t\t\t\tse = se.wrap();\r\n\t\t\t}\r\n\r\n\t\t\tif (!options.bounds.intersects([nw, se])) { return false; }\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t},\r\n\r\n\t_removeOtherTiles: function (bounds) {\r\n\t\tvar kArr, x, y, key;\r\n\r\n\t\tfor (key in this._tiles) {\r\n\t\t\tkArr = key.split(':');\r\n\t\t\tx = parseInt(kArr[0], 10);\r\n\t\t\ty = parseInt(kArr[1], 10);\r\n\r\n\t\t\t// remove tile if it's out of bounds\r\n\t\t\tif (x < bounds.min.x || x > bounds.max.x || y < bounds.min.y || y > bounds.max.y) {\r\n\t\t\t\tthis._removeTile(key);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t_removeTile: function (key) {\r\n\t\tvar tile = this._tiles[key];\r\n\r\n\t\tthis.fire('tileunload', {tile: tile, url: tile.src});\r\n\r\n\t\tif (this.options.reuseTiles) {\r\n\t\t\tL.DomUtil.removeClass(tile, 'leaflet-tile-loaded');\r\n\t\t\tthis._unusedTiles.push(tile);\r\n\r\n\t\t} else if (tile.parentNode === this._tileContainer) {\r\n\t\t\tthis._tileContainer.removeChild(tile);\r\n\t\t}\r\n\r\n\t\t// for https://github.com/CloudMade/Leaflet/issues/137\r\n\t\tif (!L.Browser.android) {\r\n\t\t\ttile.onload = null;\r\n\t\t\ttile.src = L.Util.emptyImageUrl;\r\n\t\t}\r\n\r\n\t\tdelete this._tiles[key];\r\n\t},\r\n\r\n\t_addTile: function (tilePoint, container) {\r\n\t\tvar tilePos = this._getTilePos(tilePoint);\r\n\r\n\t\t// get unused tile - or create a new tile\r\n\t\tvar tile = this._getTile();\r\n\r\n\t\t/*\r\n\t\tChrome 20 layouts much faster with top/left (verify with timeline, frames)\r\n\t\tAndroid 4 browser has display issues with top/left and requires transform instead\r\n\t\t(other browsers don't currently care) - see debug/hacks/jitter.html for an example\r\n\t\t*/\r\n\t\tL.DomUtil.setPosition(tile, tilePos, L.Browser.chrome);\r\n\r\n\t\tthis._tiles[tilePoint.x + ':' + tilePoint.y] = tile;\r\n\r\n\t\tthis._loadTile(tile, tilePoint);\r\n\r\n\t\tif (tile.parentNode !== this._tileContainer) {\r\n\t\t\tcontainer.appendChild(tile);\r\n\t\t}\r\n\t},\r\n\r\n\t_getZoomForUrl: function () {\r\n\r\n\t\tvar options = this.options,\r\n\t\t    zoom = this._map.getZoom();\r\n\r\n\t\tif (options.zoomReverse) {\r\n\t\t\tzoom = options.maxZoom - zoom;\r\n\t\t}\r\n\r\n\t\tzoom += options.zoomOffset;\r\n\r\n\t\treturn options.maxNativeZoom ? Math.min(zoom, options.maxNativeZoom) : zoom;\r\n\t},\r\n\r\n\t_getTilePos: function (tilePoint) {\r\n\t\tvar origin = this._map.getPixelOrigin(),\r\n\t\t    tileSize = this._getTileSize();\r\n\r\n\t\treturn tilePoint.multiplyBy(tileSize).subtract(origin);\r\n\t},\r\n\r\n\t// image-specific code (override to implement e.g. Canvas or SVG tile layer)\r\n\r\n\tgetTileUrl: function (tilePoint) {\r\n\t\treturn L.Util.template(this._url, L.extend({\r\n\t\t\ts: this._getSubdomain(tilePoint),\r\n\t\t\tz: tilePoint.z,\r\n\t\t\tx: tilePoint.x,\r\n\t\t\ty: tilePoint.y\r\n\t\t}, this.options));\r\n\t},\r\n\r\n\t_getWrapTileNum: function () {\r\n\t\tvar crs = this._map.options.crs,\r\n\t\t    size = crs.getSize(this._map.getZoom());\r\n\t\treturn size.divideBy(this._getTileSize())._floor();\r\n\t},\r\n\r\n\t_adjustTilePoint: function (tilePoint) {\r\n\r\n\t\tvar limit = this._getWrapTileNum();\r\n\r\n\t\t// wrap tile coordinates\r\n\t\tif (!this.options.continuousWorld && !this.options.noWrap) {\r\n\t\t\ttilePoint.x = ((tilePoint.x % limit.x) + limit.x) % limit.x;\r\n\t\t}\r\n\r\n\t\tif (this.options.tms) {\r\n\t\t\ttilePoint.y = limit.y - tilePoint.y - 1;\r\n\t\t}\r\n\r\n\t\ttilePoint.z = this._getZoomForUrl();\r\n\t},\r\n\r\n\t_getSubdomain: function (tilePoint) {\r\n\t\tvar index = Math.abs(tilePoint.x + tilePoint.y) % this.options.subdomains.length;\r\n\t\treturn this.options.subdomains[index];\r\n\t},\r\n\r\n\t_getTile: function () {\r\n\t\tif (this.options.reuseTiles && this._unusedTiles.length > 0) {\r\n\t\t\tvar tile = this._unusedTiles.pop();\r\n\t\t\tthis._resetTile(tile);\r\n\t\t\treturn tile;\r\n\t\t}\r\n\t\treturn this._createTile();\r\n\t},\r\n\r\n\t// Override if data stored on a tile needs to be cleaned up before reuse\r\n\t_resetTile: function (/*tile*/) {},\r\n\r\n\t_createTile: function () {\r\n\t\tvar tile = L.DomUtil.create('img', 'leaflet-tile');\r\n\t\ttile.style.width = tile.style.height = this._getTileSize() + 'px';\r\n\t\ttile.galleryimg = 'no';\r\n\r\n\t\ttile.onselectstart = tile.onmousemove = L.Util.falseFn;\r\n\r\n\t\tif (L.Browser.ielt9 && this.options.opacity !== undefined) {\r\n\t\t\tL.DomUtil.setOpacity(tile, this.options.opacity);\r\n\t\t}\r\n\t\t// without this hack, tiles disappear after zoom on Chrome for Android\r\n\t\t// https://github.com/Leaflet/Leaflet/issues/2078\r\n\t\tif (L.Browser.mobileWebkit3d) {\r\n\t\t\ttile.style.WebkitBackfaceVisibility = 'hidden';\r\n\t\t}\r\n\t\treturn tile;\r\n\t},\r\n\r\n\t_loadTile: function (tile, tilePoint) {\r\n\t\ttile._layer  = this;\r\n\t\ttile.onload  = this._tileOnLoad;\r\n\t\ttile.onerror = this._tileOnError;\r\n\r\n\t\tthis._adjustTilePoint(tilePoint);\r\n\t\ttile.src     = this.getTileUrl(tilePoint);\r\n\r\n\t\tthis.fire('tileloadstart', {\r\n\t\t\ttile: tile,\r\n\t\t\turl: tile.src\r\n\t\t});\r\n\t},\r\n\r\n\t_tileLoaded: function () {\r\n\t\tthis._tilesToLoad--;\r\n\r\n\t\tif (this._animated) {\r\n\t\t\tL.DomUtil.addClass(this._tileContainer, 'leaflet-zoom-animated');\r\n\t\t}\r\n\r\n\t\tif (!this._tilesToLoad) {\r\n\t\t\tthis.fire('load');\r\n\r\n\t\t\tif (this._animated) {\r\n\t\t\t\t// clear scaled tiles after all new tiles are loaded (for performance)\r\n\t\t\t\tclearTimeout(this._clearBgBufferTimer);\r\n\t\t\t\tthis._clearBgBufferTimer = setTimeout(L.bind(this._clearBgBuffer, this), 500);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t_tileOnLoad: function () {\r\n\t\tvar layer = this._layer;\r\n\r\n\t\t//Only if we are loading an actual image\r\n\t\tif (this.src !== L.Util.emptyImageUrl) {\r\n\t\t\tL.DomUtil.addClass(this, 'leaflet-tile-loaded');\r\n\r\n\t\t\tlayer.fire('tileload', {\r\n\t\t\t\ttile: this,\r\n\t\t\t\turl: this.src\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tlayer._tileLoaded();\r\n\t},\r\n\r\n\t_tileOnError: function () {\r\n\t\tvar layer = this._layer;\r\n\r\n\t\tlayer.fire('tileerror', {\r\n\t\t\ttile: this,\r\n\t\t\turl: this.src\r\n\t\t});\r\n\r\n\t\tvar newUrl = layer.options.errorTileUrl;\r\n\t\tif (newUrl) {\r\n\t\t\tthis.src = newUrl;\r\n\t\t}\r\n\r\n\t\tlayer._tileLoaded();\r\n\t}\r\n});\r\n\r\nL.tileLayer = function (url, options) {\r\n\treturn new L.TileLayer(url, options);\r\n};\r\n\n\n/*\r\n * L.TileLayer.WMS is used for putting WMS tile layers on the map.\r\n */\r\n\r\nL.TileLayer.WMS = L.TileLayer.extend({\r\n\r\n\tdefaultWmsParams: {\r\n\t\tservice: 'WMS',\r\n\t\trequest: 'GetMap',\r\n\t\tversion: '1.1.1',\r\n\t\tlayers: '',\r\n\t\tstyles: '',\r\n\t\tformat: 'image/jpeg',\r\n\t\ttransparent: false\r\n\t},\r\n\r\n\tinitialize: function (url, options) { // (String, Object)\r\n\r\n\t\tthis._url = url;\r\n\r\n\t\tvar wmsParams = L.extend({}, this.defaultWmsParams),\r\n\t\t    tileSize = options.tileSize || this.options.tileSize;\r\n\r\n\t\tif (options.detectRetina && L.Browser.retina) {\r\n\t\t\twmsParams.width = wmsParams.height = tileSize * 2;\r\n\t\t} else {\r\n\t\t\twmsParams.width = wmsParams.height = tileSize;\r\n\t\t}\r\n\r\n\t\tfor (var i in options) {\r\n\t\t\t// all keys that are not TileLayer options go to WMS params\r\n\t\t\tif (!this.options.hasOwnProperty(i) && i !== 'crs') {\r\n\t\t\t\twmsParams[i] = options[i];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.wmsParams = wmsParams;\r\n\r\n\t\tL.setOptions(this, options);\r\n\t},\r\n\r\n\tonAdd: function (map) {\r\n\r\n\t\tthis._crs = this.options.crs || map.options.crs;\r\n\r\n\t\tthis._wmsVersion = parseFloat(this.wmsParams.version);\r\n\r\n\t\tvar projectionKey = this._wmsVersion >= 1.3 ? 'crs' : 'srs';\r\n\t\tthis.wmsParams[projectionKey] = this._crs.code;\r\n\r\n\t\tL.TileLayer.prototype.onAdd.call(this, map);\r\n\t},\r\n\r\n\tgetTileUrl: function (tilePoint) { // (Point, Number) -> String\r\n\r\n\t\tvar map = this._map,\r\n\t\t    tileSize = this.options.tileSize,\r\n\r\n\t\t    nwPoint = tilePoint.multiplyBy(tileSize),\r\n\t\t    sePoint = nwPoint.add([tileSize, tileSize]),\r\n\r\n\t\t    nw = this._crs.project(map.unproject(nwPoint, tilePoint.z)),\r\n\t\t    se = this._crs.project(map.unproject(sePoint, tilePoint.z)),\r\n\t\t    bbox = this._wmsVersion >= 1.3 && this._crs === L.CRS.EPSG4326 ?\r\n\t\t        [se.y, nw.x, nw.y, se.x].join(',') :\r\n\t\t        [nw.x, se.y, se.x, nw.y].join(','),\r\n\r\n\t\t    url = L.Util.template(this._url, {s: this._getSubdomain(tilePoint)});\r\n\r\n\t\treturn url + L.Util.getParamString(this.wmsParams, url, true) + '&BBOX=' + bbox;\r\n\t},\r\n\r\n\tsetParams: function (params, noRedraw) {\r\n\r\n\t\tL.extend(this.wmsParams, params);\r\n\r\n\t\tif (!noRedraw) {\r\n\t\t\tthis.redraw();\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t}\r\n});\r\n\r\nL.tileLayer.wms = function (url, options) {\r\n\treturn new L.TileLayer.WMS(url, options);\r\n};\r\n\n\n/*\r\n * L.TileLayer.Canvas is a class that you can use as a base for creating\r\n * dynamically drawn Canvas-based tile layers.\r\n */\r\n\r\nL.TileLayer.Canvas = L.TileLayer.extend({\r\n\toptions: {\r\n\t\tasync: false\r\n\t},\r\n\r\n\tinitialize: function (options) {\r\n\t\tL.setOptions(this, options);\r\n\t},\r\n\r\n\tredraw: function () {\r\n\t\tif (this._map) {\r\n\t\t\tthis._reset({hard: true});\r\n\t\t\tthis._update();\r\n\t\t}\r\n\r\n\t\tfor (var i in this._tiles) {\r\n\t\t\tthis._redrawTile(this._tiles[i]);\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\t_redrawTile: function (tile) {\r\n\t\tthis.drawTile(tile, tile._tilePoint, this._map._zoom);\r\n\t},\r\n\r\n\t_createTile: function () {\r\n\t\tvar tile = L.DomUtil.create('canvas', 'leaflet-tile');\r\n\t\ttile.width = tile.height = this.options.tileSize;\r\n\t\ttile.onselectstart = tile.onmousemove = L.Util.falseFn;\r\n\t\treturn tile;\r\n\t},\r\n\r\n\t_loadTile: function (tile, tilePoint) {\r\n\t\ttile._layer = this;\r\n\t\ttile._tilePoint = tilePoint;\r\n\r\n\t\tthis._redrawTile(tile);\r\n\r\n\t\tif (!this.options.async) {\r\n\t\t\tthis.tileDrawn(tile);\r\n\t\t}\r\n\t},\r\n\r\n\tdrawTile: function (/*tile, tilePoint*/) {\r\n\t\t// override with rendering code\r\n\t},\r\n\r\n\ttileDrawn: function (tile) {\r\n\t\tthis._tileOnLoad.call(tile);\r\n\t}\r\n});\r\n\r\n\r\nL.tileLayer.canvas = function (options) {\r\n\treturn new L.TileLayer.Canvas(options);\r\n};\r\n\n\n/*\r\n * L.ImageOverlay is used to overlay images over the map (to specific geographical bounds).\r\n */\r\n\r\nL.ImageOverlay = L.Class.extend({\r\n\tincludes: L.Mixin.Events,\r\n\r\n\toptions: {\r\n\t\topacity: 1\r\n\t},\r\n\r\n\tinitialize: function (url, bounds, options) { // (String, LatLngBounds, Object)\r\n\t\tthis._url = url;\r\n\t\tthis._bounds = L.latLngBounds(bounds);\r\n\r\n\t\tL.setOptions(this, options);\r\n\t},\r\n\r\n\tonAdd: function (map) {\r\n\t\tthis._map = map;\r\n\r\n\t\tif (!this._image) {\r\n\t\t\tthis._initImage();\r\n\t\t}\r\n\r\n\t\tmap._panes.overlayPane.appendChild(this._image);\r\n\r\n\t\tmap.on('viewreset', this._reset, this);\r\n\r\n\t\tif (map.options.zoomAnimation && L.Browser.any3d) {\r\n\t\t\tmap.on('zoomanim', this._animateZoom, this);\r\n\t\t}\r\n\r\n\t\tthis._reset();\r\n\t},\r\n\r\n\tonRemove: function (map) {\r\n\t\tmap.getPanes().overlayPane.removeChild(this._image);\r\n\r\n\t\tmap.off('viewreset', this._reset, this);\r\n\r\n\t\tif (map.options.zoomAnimation) {\r\n\t\t\tmap.off('zoomanim', this._animateZoom, this);\r\n\t\t}\r\n\t},\r\n\r\n\taddTo: function (map) {\r\n\t\tmap.addLayer(this);\r\n\t\treturn this;\r\n\t},\r\n\r\n\tsetOpacity: function (opacity) {\r\n\t\tthis.options.opacity = opacity;\r\n\t\tthis._updateOpacity();\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// TODO remove bringToFront/bringToBack duplication from TileLayer/Path\r\n\tbringToFront: function () {\r\n\t\tif (this._image) {\r\n\t\t\tthis._map._panes.overlayPane.appendChild(this._image);\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\tbringToBack: function () {\r\n\t\tvar pane = this._map._panes.overlayPane;\r\n\t\tif (this._image) {\r\n\t\t\tpane.insertBefore(this._image, pane.firstChild);\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\tsetUrl: function (url) {\r\n\t\tthis._url = url;\r\n\t\tthis._image.src = this._url;\r\n\t},\r\n\r\n\tgetAttribution: function () {\r\n\t\treturn this.options.attribution;\r\n\t},\r\n\r\n\t_initImage: function () {\r\n\t\tthis._image = L.DomUtil.create('img', 'leaflet-image-layer');\r\n\r\n\t\tif (this._map.options.zoomAnimation && L.Browser.any3d) {\r\n\t\t\tL.DomUtil.addClass(this._image, 'leaflet-zoom-animated');\r\n\t\t} else {\r\n\t\t\tL.DomUtil.addClass(this._image, 'leaflet-zoom-hide');\r\n\t\t}\r\n\r\n\t\tthis._updateOpacity();\r\n\r\n\t\t//TODO createImage util method to remove duplication\r\n\t\tL.extend(this._image, {\r\n\t\t\tgalleryimg: 'no',\r\n\t\t\tonselectstart: L.Util.falseFn,\r\n\t\t\tonmousemove: L.Util.falseFn,\r\n\t\t\tonload: L.bind(this._onImageLoad, this),\r\n\t\t\tsrc: this._url\r\n\t\t});\r\n\t},\r\n\r\n\t_animateZoom: function (e) {\r\n\t\tvar map = this._map,\r\n\t\t    image = this._image,\r\n\t\t    scale = map.getZoomScale(e.zoom),\r\n\t\t    nw = this._bounds.getNorthWest(),\r\n\t\t    se = this._bounds.getSouthEast(),\r\n\r\n\t\t    topLeft = map._latLngToNewLayerPoint(nw, e.zoom, e.center),\r\n\t\t    size = map._latLngToNewLayerPoint(se, e.zoom, e.center)._subtract(topLeft),\r\n\t\t    origin = topLeft._add(size._multiplyBy((1 / 2) * (1 - 1 / scale)));\r\n\r\n\t\timage.style[L.DomUtil.TRANSFORM] =\r\n\t\t        L.DomUtil.getTranslateString(origin) + ' scale(' + scale + ') ';\r\n\t},\r\n\r\n\t_reset: function () {\r\n\t\tvar image   = this._image,\r\n\t\t    topLeft = this._map.latLngToLayerPoint(this._bounds.getNorthWest()),\r\n\t\t    size = this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(topLeft);\r\n\r\n\t\tL.DomUtil.setPosition(image, topLeft);\r\n\r\n\t\timage.style.width  = size.x + 'px';\r\n\t\timage.style.height = size.y + 'px';\r\n\t},\r\n\r\n\t_onImageLoad: function () {\r\n\t\tthis.fire('load');\r\n\t},\r\n\r\n\t_updateOpacity: function () {\r\n\t\tL.DomUtil.setOpacity(this._image, this.options.opacity);\r\n\t}\r\n});\r\n\r\nL.imageOverlay = function (url, bounds, options) {\r\n\treturn new L.ImageOverlay(url, bounds, options);\r\n};\r\n\n\n/*\r\n * L.Icon is an image-based icon class that you can use with L.Marker for custom markers.\r\n */\r\n\r\nL.Icon = L.Class.extend({\r\n\toptions: {\r\n\t\t/*\r\n\t\ticonUrl: (String) (required)\r\n\t\ticonRetinaUrl: (String) (optional, used for retina devices if detected)\r\n\t\ticonSize: (Point) (can be set through CSS)\r\n\t\ticonAnchor: (Point) (centered by default, can be set in CSS with negative margins)\r\n\t\tpopupAnchor: (Point) (if not specified, popup opens in the anchor point)\r\n\t\tshadowUrl: (String) (no shadow by default)\r\n\t\tshadowRetinaUrl: (String) (optional, used for retina devices if detected)\r\n\t\tshadowSize: (Point)\r\n\t\tshadowAnchor: (Point)\r\n\t\t*/\r\n\t\tclassName: ''\r\n\t},\r\n\r\n\tinitialize: function (options) {\r\n\t\tL.setOptions(this, options);\r\n\t},\r\n\r\n\tcreateIcon: function (oldIcon) {\r\n\t\treturn this._createIcon('icon', oldIcon);\r\n\t},\r\n\r\n\tcreateShadow: function (oldIcon) {\r\n\t\treturn this._createIcon('shadow', oldIcon);\r\n\t},\r\n\r\n\t_createIcon: function (name, oldIcon) {\r\n\t\tvar src = this._getIconUrl(name);\r\n\r\n\t\tif (!src) {\r\n\t\t\tif (name === 'icon') {\r\n\t\t\t\tthrow new Error('iconUrl not set in Icon options (see the docs).');\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tvar img;\r\n\t\tif (!oldIcon || oldIcon.tagName !== 'IMG') {\r\n\t\t\timg = this._createImg(src);\r\n\t\t} else {\r\n\t\t\timg = this._createImg(src, oldIcon);\r\n\t\t}\r\n\t\tthis._setIconStyles(img, name);\r\n\r\n\t\treturn img;\r\n\t},\r\n\r\n\t_setIconStyles: function (img, name) {\r\n\t\tvar options = this.options,\r\n\t\t    size = L.point(options[name + 'Size']),\r\n\t\t    anchor;\r\n\r\n\t\tif (name === 'shadow') {\r\n\t\t\tanchor = L.point(options.shadowAnchor || options.iconAnchor);\r\n\t\t} else {\r\n\t\t\tanchor = L.point(options.iconAnchor);\r\n\t\t}\r\n\r\n\t\tif (!anchor && size) {\r\n\t\t\tanchor = size.divideBy(2, true);\r\n\t\t}\r\n\r\n\t\timg.className = 'leaflet-marker-' + name + ' ' + options.className;\r\n\r\n\t\tif (anchor) {\r\n\t\t\timg.style.marginLeft = (-anchor.x) + 'px';\r\n\t\t\timg.style.marginTop  = (-anchor.y) + 'px';\r\n\t\t}\r\n\r\n\t\tif (size) {\r\n\t\t\timg.style.width  = size.x + 'px';\r\n\t\t\timg.style.height = size.y + 'px';\r\n\t\t}\r\n\t},\r\n\r\n\t_createImg: function (src, el) {\r\n\t\tel = el || document.createElement('img');\r\n\t\tel.src = src;\r\n\t\treturn el;\r\n\t},\r\n\r\n\t_getIconUrl: function (name) {\r\n\t\tif (L.Browser.retina && this.options[name + 'RetinaUrl']) {\r\n\t\t\treturn this.options[name + 'RetinaUrl'];\r\n\t\t}\r\n\t\treturn this.options[name + 'Url'];\r\n\t}\r\n});\r\n\r\nL.icon = function (options) {\r\n\treturn new L.Icon(options);\r\n};\r\n\n\n/*\n * L.Icon.Default is the blue marker icon used by default in Leaflet.\n */\n\nL.Icon.Default = L.Icon.extend({\n\n\toptions: {\n\t\ticonSize: [25, 41],\n\t\ticonAnchor: [12, 41],\n\t\tpopupAnchor: [1, -34],\n\n\t\tshadowSize: [41, 41]\n\t},\n\n\t_getIconUrl: function (name) {\n\t\tvar key = name + 'Url';\n\n\t\tif (this.options[key]) {\n\t\t\treturn this.options[key];\n\t\t}\n\n\t\tif (L.Browser.retina && name === 'icon') {\n\t\t\tname += '-2x';\n\t\t}\n\n\t\tvar path = L.Icon.Default.imagePath;\n\n\t\tif (!path) {\n\t\t\tthrow new Error('Couldn\\'t autodetect L.Icon.Default.imagePath, set it manually.');\n\t\t}\n\n\t\treturn path + '/marker-' + name + '.png';\n\t}\n});\n\nL.Icon.Default.imagePath = (function () {\n\tvar scripts = document.getElementsByTagName('script'),\n\t    leafletRe = /[\\/^]leaflet[\\-\\._]?([\\w\\-\\._]*)\\.js\\??/;\n\n\tvar i, len, src, matches, path;\n\n\tfor (i = 0, len = scripts.length; i < len; i++) {\n\t\tsrc = scripts[i].src;\n\t\tmatches = src.match(leafletRe);\n\n\t\tif (matches) {\n\t\t\tpath = src.split(leafletRe)[0];\n\t\t\treturn (path ? path + '/' : '') + 'images';\n\t\t}\n\t}\n}());\n\n\n/*\r\n * L.Marker is used to display clickable/draggable icons on the map.\r\n */\r\n\r\nL.Marker = L.Class.extend({\r\n\r\n\tincludes: L.Mixin.Events,\r\n\r\n\toptions: {\r\n\t\ticon: new L.Icon.Default(),\r\n\t\ttitle: '',\r\n\t\talt: '',\r\n\t\tclickable: true,\r\n\t\tdraggable: false,\r\n\t\tkeyboard: true,\r\n\t\tzIndexOffset: 0,\r\n\t\topacity: 1,\r\n\t\triseOnHover: false,\r\n\t\triseOffset: 250\r\n\t},\r\n\r\n\tinitialize: function (latlng, options) {\r\n\t\tL.setOptions(this, options);\r\n\t\tthis._latlng = L.latLng(latlng);\r\n\t},\r\n\r\n\tonAdd: function (map) {\r\n\t\tthis._map = map;\r\n\r\n\t\tmap.on('viewreset', this.update, this);\r\n\r\n\t\tthis._initIcon();\r\n\t\tthis.update();\r\n\t\tthis.fire('add');\r\n\r\n\t\tif (map.options.zoomAnimation && map.options.markerZoomAnimation) {\r\n\t\t\tmap.on('zoomanim', this._animateZoom, this);\r\n\t\t}\r\n\t},\r\n\r\n\taddTo: function (map) {\r\n\t\tmap.addLayer(this);\r\n\t\treturn this;\r\n\t},\r\n\r\n\tonRemove: function (map) {\r\n\t\tif (this.dragging) {\r\n\t\t\tthis.dragging.disable();\r\n\t\t}\r\n\r\n\t\tthis._removeIcon();\r\n\t\tthis._removeShadow();\r\n\r\n\t\tthis.fire('remove');\r\n\r\n\t\tmap.off({\r\n\t\t\t'viewreset': this.update,\r\n\t\t\t'zoomanim': this._animateZoom\r\n\t\t}, this);\r\n\r\n\t\tthis._map = null;\r\n\t},\r\n\r\n\tgetLatLng: function () {\r\n\t\treturn this._latlng;\r\n\t},\r\n\r\n\tsetLatLng: function (latlng) {\r\n\t\tthis._latlng = L.latLng(latlng);\r\n\r\n\t\tthis.update();\r\n\r\n\t\treturn this.fire('move', { latlng: this._latlng });\r\n\t},\r\n\r\n\tsetZIndexOffset: function (offset) {\r\n\t\tthis.options.zIndexOffset = offset;\r\n\t\tthis.update();\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tsetIcon: function (icon) {\r\n\r\n\t\tthis.options.icon = icon;\r\n\r\n\t\tif (this._map) {\r\n\t\t\tthis._initIcon();\r\n\t\t\tthis.update();\r\n\t\t}\r\n\r\n\t\tif (this._popup) {\r\n\t\t\tthis.bindPopup(this._popup);\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tupdate: function () {\r\n\t\tif (this._icon) {\r\n\t\t\tthis._setPos(this._map.latLngToLayerPoint(this._latlng).round());\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\t_initIcon: function () {\r\n\t\tvar options = this.options,\r\n\t\t    map = this._map,\r\n\t\t    animation = (map.options.zoomAnimation && map.options.markerZoomAnimation),\r\n\t\t    classToAdd = animation ? 'leaflet-zoom-animated' : 'leaflet-zoom-hide';\r\n\r\n\t\tvar icon = options.icon.createIcon(this._icon),\r\n\t\t\taddIcon = false;\r\n\r\n\t\t// if we're not reusing the icon, remove the old one and init new one\r\n\t\tif (icon !== this._icon) {\r\n\t\t\tif (this._icon) {\r\n\t\t\t\tthis._removeIcon();\r\n\t\t\t}\r\n\t\t\taddIcon = true;\r\n\r\n\t\t\tif (options.title) {\r\n\t\t\t\ticon.title = options.title;\r\n\t\t\t}\r\n\r\n\t\t\tif (options.alt) {\r\n\t\t\t\ticon.alt = options.alt;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tL.DomUtil.addClass(icon, classToAdd);\r\n\r\n\t\tif (options.keyboard) {\r\n\t\t\ticon.tabIndex = '0';\r\n\t\t}\r\n\r\n\t\tthis._icon = icon;\r\n\r\n\t\tthis._initInteraction();\r\n\r\n\t\tif (options.riseOnHover) {\r\n\t\t\tL.DomEvent\r\n\t\t\t\t.on(icon, 'mouseover', this._bringToFront, this)\r\n\t\t\t\t.on(icon, 'mouseout', this._resetZIndex, this);\r\n\t\t}\r\n\r\n\t\tvar newShadow = options.icon.createShadow(this._shadow),\r\n\t\t\taddShadow = false;\r\n\r\n\t\tif (newShadow !== this._shadow) {\r\n\t\t\tthis._removeShadow();\r\n\t\t\taddShadow = true;\r\n\t\t}\r\n\r\n\t\tif (newShadow) {\r\n\t\t\tL.DomUtil.addClass(newShadow, classToAdd);\r\n\t\t}\r\n\t\tthis._shadow = newShadow;\r\n\r\n\r\n\t\tif (options.opacity < 1) {\r\n\t\t\tthis._updateOpacity();\r\n\t\t}\r\n\r\n\r\n\t\tvar panes = this._map._panes;\r\n\r\n\t\tif (addIcon) {\r\n\t\t\tpanes.markerPane.appendChild(this._icon);\r\n\t\t}\r\n\r\n\t\tif (newShadow && addShadow) {\r\n\t\t\tpanes.shadowPane.appendChild(this._shadow);\r\n\t\t}\r\n\t},\r\n\r\n\t_removeIcon: function () {\r\n\t\tif (this.options.riseOnHover) {\r\n\t\t\tL.DomEvent\r\n\t\t\t    .off(this._icon, 'mouseover', this._bringToFront)\r\n\t\t\t    .off(this._icon, 'mouseout', this._resetZIndex);\r\n\t\t}\r\n\r\n\t\tthis._map._panes.markerPane.removeChild(this._icon);\r\n\r\n\t\tthis._icon = null;\r\n\t},\r\n\r\n\t_removeShadow: function () {\r\n\t\tif (this._shadow) {\r\n\t\t\tthis._map._panes.shadowPane.removeChild(this._shadow);\r\n\t\t}\r\n\t\tthis._shadow = null;\r\n\t},\r\n\r\n\t_setPos: function (pos) {\r\n\t\tL.DomUtil.setPosition(this._icon, pos);\r\n\r\n\t\tif (this._shadow) {\r\n\t\t\tL.DomUtil.setPosition(this._shadow, pos);\r\n\t\t}\r\n\r\n\t\tthis._zIndex = pos.y + this.options.zIndexOffset;\r\n\r\n\t\tthis._resetZIndex();\r\n\t},\r\n\r\n\t_updateZIndex: function (offset) {\r\n\t\tthis._icon.style.zIndex = this._zIndex + offset;\r\n\t},\r\n\r\n\t_animateZoom: function (opt) {\r\n\t\tvar pos = this._map._latLngToNewLayerPoint(this._latlng, opt.zoom, opt.center).round();\r\n\r\n\t\tthis._setPos(pos);\r\n\t},\r\n\r\n\t_initInteraction: function () {\r\n\r\n\t\tif (!this.options.clickable) { return; }\r\n\r\n\t\t// TODO refactor into something shared with Map/Path/etc. to DRY it up\r\n\r\n\t\tvar icon = this._icon,\r\n\t\t    events = ['dblclick', 'mousedown', 'mouseover', 'mouseout', 'contextmenu'];\r\n\r\n\t\tL.DomUtil.addClass(icon, 'leaflet-clickable');\r\n\t\tL.DomEvent.on(icon, 'click', this._onMouseClick, this);\r\n\t\tL.DomEvent.on(icon, 'keypress', this._onKeyPress, this);\r\n\r\n\t\tfor (var i = 0; i < events.length; i++) {\r\n\t\t\tL.DomEvent.on(icon, events[i], this._fireMouseEvent, this);\r\n\t\t}\r\n\r\n\t\tif (L.Handler.MarkerDrag) {\r\n\t\t\tthis.dragging = new L.Handler.MarkerDrag(this);\r\n\r\n\t\t\tif (this.options.draggable) {\r\n\t\t\t\tthis.dragging.enable();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t_onMouseClick: function (e) {\r\n\t\tvar wasDragged = this.dragging && this.dragging.moved();\r\n\r\n\t\tif (this.hasEventListeners(e.type) || wasDragged) {\r\n\t\t\tL.DomEvent.stopPropagation(e);\r\n\t\t}\r\n\r\n\t\tif (wasDragged) { return; }\r\n\r\n\t\tif ((!this.dragging || !this.dragging._enabled) && this._map.dragging && this._map.dragging.moved()) { return; }\r\n\r\n\t\tthis.fire(e.type, {\r\n\t\t\toriginalEvent: e,\r\n\t\t\tlatlng: this._latlng\r\n\t\t});\r\n\t},\r\n\r\n\t_onKeyPress: function (e) {\r\n\t\tif (e.keyCode === 13) {\r\n\t\t\tthis.fire('click', {\r\n\t\t\t\toriginalEvent: e,\r\n\t\t\t\tlatlng: this._latlng\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\r\n\t_fireMouseEvent: function (e) {\r\n\r\n\t\tthis.fire(e.type, {\r\n\t\t\toriginalEvent: e,\r\n\t\t\tlatlng: this._latlng\r\n\t\t});\r\n\r\n\t\t// TODO proper custom event propagation\r\n\t\t// this line will always be called if marker is in a FeatureGroup\r\n\t\tif (e.type === 'contextmenu' && this.hasEventListeners(e.type)) {\r\n\t\t\tL.DomEvent.preventDefault(e);\r\n\t\t}\r\n\t\tif (e.type !== 'mousedown') {\r\n\t\t\tL.DomEvent.stopPropagation(e);\r\n\t\t} else {\r\n\t\t\tL.DomEvent.preventDefault(e);\r\n\t\t}\r\n\t},\r\n\r\n\tsetOpacity: function (opacity) {\r\n\t\tthis.options.opacity = opacity;\r\n\t\tif (this._map) {\r\n\t\t\tthis._updateOpacity();\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t_updateOpacity: function () {\r\n\t\tL.DomUtil.setOpacity(this._icon, this.options.opacity);\r\n\t\tif (this._shadow) {\r\n\t\t\tL.DomUtil.setOpacity(this._shadow, this.options.opacity);\r\n\t\t}\r\n\t},\r\n\r\n\t_bringToFront: function () {\r\n\t\tthis._updateZIndex(this.options.riseOffset);\r\n\t},\r\n\r\n\t_resetZIndex: function () {\r\n\t\tthis._updateZIndex(0);\r\n\t}\r\n});\r\n\r\nL.marker = function (latlng, options) {\r\n\treturn new L.Marker(latlng, options);\r\n};\r\n\n\n/*\n * L.DivIcon is a lightweight HTML-based icon class (as opposed to the image-based L.Icon)\n * to use with L.Marker.\n */\n\nL.DivIcon = L.Icon.extend({\n\toptions: {\n\t\ticonSize: [12, 12], // also can be set through CSS\n\t\t/*\n\t\ticonAnchor: (Point)\n\t\tpopupAnchor: (Point)\n\t\thtml: (String)\n\t\tbgPos: (Point)\n\t\t*/\n\t\tclassName: 'leaflet-div-icon',\n\t\thtml: false\n\t},\n\n\tcreateIcon: function (oldIcon) {\n\t\tvar div = (oldIcon && oldIcon.tagName === 'DIV') ? oldIcon : document.createElement('div'),\n\t\t    options = this.options;\n\n\t\tif (options.html !== false) {\n\t\t\tdiv.innerHTML = options.html;\n\t\t} else {\n\t\t\tdiv.innerHTML = '';\n\t\t}\n\n\t\tif (options.bgPos) {\n\t\t\tdiv.style.backgroundPosition =\n\t\t\t        (-options.bgPos.x) + 'px ' + (-options.bgPos.y) + 'px';\n\t\t}\n\n\t\tthis._setIconStyles(div, 'icon');\n\t\treturn div;\n\t},\n\n\tcreateShadow: function () {\n\t\treturn null;\n\t}\n});\n\nL.divIcon = function (options) {\n\treturn new L.DivIcon(options);\n};\n\n\n/*\r\n * L.Popup is used for displaying popups on the map.\r\n */\r\n\r\nL.Map.mergeOptions({\r\n\tclosePopupOnClick: true\r\n});\r\n\r\nL.Popup = L.Class.extend({\r\n\tincludes: L.Mixin.Events,\r\n\r\n\toptions: {\r\n\t\tminWidth: 50,\r\n\t\tmaxWidth: 300,\r\n\t\t// maxHeight: null,\r\n\t\tautoPan: true,\r\n\t\tcloseButton: true,\r\n\t\toffset: [0, 7],\r\n\t\tautoPanPadding: [5, 5],\r\n\t\t// autoPanPaddingTopLeft: null,\r\n\t\t// autoPanPaddingBottomRight: null,\r\n\t\tkeepInView: false,\r\n\t\tclassName: '',\r\n\t\tzoomAnimation: true\r\n\t},\r\n\r\n\tinitialize: function (options, source) {\r\n\t\tL.setOptions(this, options);\r\n\r\n\t\tthis._source = source;\r\n\t\tthis._animated = L.Browser.any3d && this.options.zoomAnimation;\r\n\t\tthis._isOpen = false;\r\n\t},\r\n\r\n\tonAdd: function (map) {\r\n\t\tthis._map = map;\r\n\r\n\t\tif (!this._container) {\r\n\t\t\tthis._initLayout();\r\n\t\t}\r\n\r\n\t\tvar animFade = map.options.fadeAnimation;\r\n\r\n\t\tif (animFade) {\r\n\t\t\tL.DomUtil.setOpacity(this._container, 0);\r\n\t\t}\r\n\t\tmap._panes.popupPane.appendChild(this._container);\r\n\r\n\t\tmap.on(this._getEvents(), this);\r\n\r\n\t\tthis.update();\r\n\r\n\t\tif (animFade) {\r\n\t\t\tL.DomUtil.setOpacity(this._container, 1);\r\n\t\t}\r\n\r\n\t\tthis.fire('open');\r\n\r\n\t\tmap.fire('popupopen', {popup: this});\r\n\r\n\t\tif (this._source) {\r\n\t\t\tthis._source.fire('popupopen', {popup: this});\r\n\t\t}\r\n\t},\r\n\r\n\taddTo: function (map) {\r\n\t\tmap.addLayer(this);\r\n\t\treturn this;\r\n\t},\r\n\r\n\topenOn: function (map) {\r\n\t\tmap.openPopup(this);\r\n\t\treturn this;\r\n\t},\r\n\r\n\tonRemove: function (map) {\r\n\t\tmap._panes.popupPane.removeChild(this._container);\r\n\r\n\t\tL.Util.falseFn(this._container.offsetWidth); // force reflow\r\n\r\n\t\tmap.off(this._getEvents(), this);\r\n\r\n\t\tif (map.options.fadeAnimation) {\r\n\t\t\tL.DomUtil.setOpacity(this._container, 0);\r\n\t\t}\r\n\r\n\t\tthis._map = null;\r\n\r\n\t\tthis.fire('close');\r\n\r\n\t\tmap.fire('popupclose', {popup: this});\r\n\r\n\t\tif (this._source) {\r\n\t\t\tthis._source.fire('popupclose', {popup: this});\r\n\t\t}\r\n\t},\r\n\r\n\tgetLatLng: function () {\r\n\t\treturn this._latlng;\r\n\t},\r\n\r\n\tsetLatLng: function (latlng) {\r\n\t\tthis._latlng = L.latLng(latlng);\r\n\t\tif (this._map) {\r\n\t\t\tthis._updatePosition();\r\n\t\t\tthis._adjustPan();\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\tgetContent: function () {\r\n\t\treturn this._content;\r\n\t},\r\n\r\n\tsetContent: function (content) {\r\n\t\tthis._content = content;\r\n\t\tthis.update();\r\n\t\treturn this;\r\n\t},\r\n\r\n\tupdate: function () {\r\n\t\tif (!this._map) { return; }\r\n\r\n\t\tthis._container.style.visibility = 'hidden';\r\n\r\n\t\tthis._updateContent();\r\n\t\tthis._updateLayout();\r\n\t\tthis._updatePosition();\r\n\r\n\t\tthis._container.style.visibility = '';\r\n\r\n\t\tthis._adjustPan();\r\n\t},\r\n\r\n\t_getEvents: function () {\r\n\t\tvar events = {\r\n\t\t\tviewreset: this._updatePosition\r\n\t\t};\r\n\r\n\t\tif (this._animated) {\r\n\t\t\tevents.zoomanim = this._zoomAnimation;\r\n\t\t}\r\n\t\tif ('closeOnClick' in this.options ? this.options.closeOnClick : this._map.options.closePopupOnClick) {\r\n\t\t\tevents.preclick = this._close;\r\n\t\t}\r\n\t\tif (this.options.keepInView) {\r\n\t\t\tevents.moveend = this._adjustPan;\r\n\t\t}\r\n\r\n\t\treturn events;\r\n\t},\r\n\r\n\t_close: function () {\r\n\t\tif (this._map) {\r\n\t\t\tthis._map.closePopup(this);\r\n\t\t}\r\n\t},\r\n\r\n\t_initLayout: function () {\r\n\t\tvar prefix = 'leaflet-popup',\r\n\t\t\tcontainerClass = prefix + ' ' + this.options.className + ' leaflet-zoom-' +\r\n\t\t\t        (this._animated ? 'animated' : 'hide'),\r\n\t\t\tcontainer = this._container = L.DomUtil.create('div', containerClass),\r\n\t\t\tcloseButton;\r\n\r\n\t\tif (this.options.closeButton) {\r\n\t\t\tcloseButton = this._closeButton =\r\n\t\t\t        L.DomUtil.create('a', prefix + '-close-button', container);\r\n\t\t\tcloseButton.href = '#close';\r\n\t\t\tcloseButton.innerHTML = '&#215;';\r\n\t\t\tL.DomEvent.disableClickPropagation(closeButton);\r\n\r\n\t\t\tL.DomEvent.on(closeButton, 'click', this._onCloseButtonClick, this);\r\n\t\t}\r\n\r\n\t\tvar wrapper = this._wrapper =\r\n\t\t        L.DomUtil.create('div', prefix + '-content-wrapper', container);\r\n\t\tL.DomEvent.disableClickPropagation(wrapper);\r\n\r\n\t\tthis._contentNode = L.DomUtil.create('div', prefix + '-content', wrapper);\r\n\r\n\t\tL.DomEvent.disableScrollPropagation(this._contentNode);\r\n\t\tL.DomEvent.on(wrapper, 'contextmenu', L.DomEvent.stopPropagation);\r\n\r\n\t\tthis._tipContainer = L.DomUtil.create('div', prefix + '-tip-container', container);\r\n\t\tthis._tip = L.DomUtil.create('div', prefix + '-tip', this._tipContainer);\r\n\t},\r\n\r\n\t_updateContent: function () {\r\n\t\tif (!this._content) { return; }\r\n\r\n\t\tif (typeof this._content === 'string') {\r\n\t\t\tthis._contentNode.innerHTML = this._content;\r\n\t\t} else {\r\n\t\t\twhile (this._contentNode.hasChildNodes()) {\r\n\t\t\t\tthis._contentNode.removeChild(this._contentNode.firstChild);\r\n\t\t\t}\r\n\t\t\tthis._contentNode.appendChild(this._content);\r\n\t\t}\r\n\t\tthis.fire('contentupdate');\r\n\t},\r\n\r\n\t_updateLayout: function () {\r\n\t\tvar container = this._contentNode,\r\n\t\t    style = container.style;\r\n\r\n\t\tstyle.width = '';\r\n\t\tstyle.whiteSpace = 'nowrap';\r\n\r\n\t\tvar width = container.offsetWidth;\r\n\t\twidth = Math.min(width, this.options.maxWidth);\r\n\t\twidth = Math.max(width, this.options.minWidth);\r\n\r\n\t\tstyle.width = (width + 1) + 'px';\r\n\t\tstyle.whiteSpace = '';\r\n\r\n\t\tstyle.height = '';\r\n\r\n\t\tvar height = container.offsetHeight,\r\n\t\t    maxHeight = this.options.maxHeight,\r\n\t\t    scrolledClass = 'leaflet-popup-scrolled';\r\n\r\n\t\tif (maxHeight && height > maxHeight) {\r\n\t\t\tstyle.height = maxHeight + 'px';\r\n\t\t\tL.DomUtil.addClass(container, scrolledClass);\r\n\t\t} else {\r\n\t\t\tL.DomUtil.removeClass(container, scrolledClass);\r\n\t\t}\r\n\r\n\t\tthis._containerWidth = this._container.offsetWidth;\r\n\t},\r\n\r\n\t_updatePosition: function () {\r\n\t\tif (!this._map) { return; }\r\n\r\n\t\tvar pos = this._map.latLngToLayerPoint(this._latlng),\r\n\t\t    animated = this._animated,\r\n\t\t    offset = L.point(this.options.offset);\r\n\r\n\t\tif (animated) {\r\n\t\t\tL.DomUtil.setPosition(this._container, pos);\r\n\t\t}\r\n\r\n\t\tthis._containerBottom = -offset.y - (animated ? 0 : pos.y);\r\n\t\tthis._containerLeft = -Math.round(this._containerWidth / 2) + offset.x + (animated ? 0 : pos.x);\r\n\r\n\t\t// bottom position the popup in case the height of the popup changes (images loading etc)\r\n\t\tthis._container.style.bottom = this._containerBottom + 'px';\r\n\t\tthis._container.style.left = this._containerLeft + 'px';\r\n\t},\r\n\r\n\t_zoomAnimation: function (opt) {\r\n\t\tvar pos = this._map._latLngToNewLayerPoint(this._latlng, opt.zoom, opt.center);\r\n\r\n\t\tL.DomUtil.setPosition(this._container, pos);\r\n\t},\r\n\r\n\t_adjustPan: function () {\r\n\t\tif (!this.options.autoPan) { return; }\r\n\r\n\t\tvar map = this._map,\r\n\t\t    containerHeight = this._container.offsetHeight,\r\n\t\t    containerWidth = this._containerWidth,\r\n\r\n\t\t    layerPos = new L.Point(this._containerLeft, -containerHeight - this._containerBottom);\r\n\r\n\t\tif (this._animated) {\r\n\t\t\tlayerPos._add(L.DomUtil.getPosition(this._container));\r\n\t\t}\r\n\r\n\t\tvar containerPos = map.layerPointToContainerPoint(layerPos),\r\n\t\t    padding = L.point(this.options.autoPanPadding),\r\n\t\t    paddingTL = L.point(this.options.autoPanPaddingTopLeft || padding),\r\n\t\t    paddingBR = L.point(this.options.autoPanPaddingBottomRight || padding),\r\n\t\t    size = map.getSize(),\r\n\t\t    dx = 0,\r\n\t\t    dy = 0;\r\n\r\n\t\tif (containerPos.x + containerWidth + paddingBR.x > size.x) { // right\r\n\t\t\tdx = containerPos.x + containerWidth - size.x + paddingBR.x;\r\n\t\t}\r\n\t\tif (containerPos.x - dx - paddingTL.x < 0) { // left\r\n\t\t\tdx = containerPos.x - paddingTL.x;\r\n\t\t}\r\n\t\tif (containerPos.y + containerHeight + paddingBR.y > size.y) { // bottom\r\n\t\t\tdy = containerPos.y + containerHeight - size.y + paddingBR.y;\r\n\t\t}\r\n\t\tif (containerPos.y - dy - paddingTL.y < 0) { // top\r\n\t\t\tdy = containerPos.y - paddingTL.y;\r\n\t\t}\r\n\r\n\t\tif (dx || dy) {\r\n\t\t\tmap\r\n\t\t\t    .fire('autopanstart')\r\n\t\t\t    .panBy([dx, dy]);\r\n\t\t}\r\n\t},\r\n\r\n\t_onCloseButtonClick: function (e) {\r\n\t\tthis._close();\r\n\t\tL.DomEvent.stop(e);\r\n\t}\r\n});\r\n\r\nL.popup = function (options, source) {\r\n\treturn new L.Popup(options, source);\r\n};\r\n\r\n\r\nL.Map.include({\r\n\topenPopup: function (popup, latlng, options) { // (Popup) or (String || HTMLElement, LatLng[, Object])\r\n\t\tthis.closePopup();\r\n\r\n\t\tif (!(popup instanceof L.Popup)) {\r\n\t\t\tvar content = popup;\r\n\r\n\t\t\tpopup = new L.Popup(options)\r\n\t\t\t    .setLatLng(latlng)\r\n\t\t\t    .setContent(content);\r\n\t\t}\r\n\t\tpopup._isOpen = true;\r\n\r\n\t\tthis._popup = popup;\r\n\t\treturn this.addLayer(popup);\r\n\t},\r\n\r\n\tclosePopup: function (popup) {\r\n\t\tif (!popup || popup === this._popup) {\r\n\t\t\tpopup = this._popup;\r\n\t\t\tthis._popup = null;\r\n\t\t}\r\n\t\tif (popup) {\r\n\t\t\tthis.removeLayer(popup);\r\n\t\t\tpopup._isOpen = false;\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n});\r\n\n\n/*\r\n * Popup extension to L.Marker, adding popup-related methods.\r\n */\r\n\r\nL.Marker.include({\r\n\topenPopup: function () {\r\n\t\tif (this._popup && this._map && !this._map.hasLayer(this._popup)) {\r\n\t\t\tthis._popup.setLatLng(this._latlng);\r\n\t\t\tthis._map.openPopup(this._popup);\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tclosePopup: function () {\r\n\t\tif (this._popup) {\r\n\t\t\tthis._popup._close();\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\ttogglePopup: function () {\r\n\t\tif (this._popup) {\r\n\t\t\tif (this._popup._isOpen) {\r\n\t\t\t\tthis.closePopup();\r\n\t\t\t} else {\r\n\t\t\t\tthis.openPopup();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\tbindPopup: function (content, options) {\r\n\t\tvar anchor = L.point(this.options.icon.options.popupAnchor || [0, 0]);\r\n\r\n\t\tanchor = anchor.add(L.Popup.prototype.options.offset);\r\n\r\n\t\tif (options && options.offset) {\r\n\t\t\tanchor = anchor.add(options.offset);\r\n\t\t}\r\n\r\n\t\toptions = L.extend({offset: anchor}, options);\r\n\r\n\t\tif (!this._popupHandlersAdded) {\r\n\t\t\tthis\r\n\t\t\t    .on('click', this.togglePopup, this)\r\n\t\t\t    .on('remove', this.closePopup, this)\r\n\t\t\t    .on('move', this._movePopup, this);\r\n\t\t\tthis._popupHandlersAdded = true;\r\n\t\t}\r\n\r\n\t\tif (content instanceof L.Popup) {\r\n\t\t\tL.setOptions(content, options);\r\n\t\t\tthis._popup = content;\r\n\t\t\tcontent._source = this;\r\n\t\t} else {\r\n\t\t\tthis._popup = new L.Popup(options, this)\r\n\t\t\t\t.setContent(content);\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tsetPopupContent: function (content) {\r\n\t\tif (this._popup) {\r\n\t\t\tthis._popup.setContent(content);\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\tunbindPopup: function () {\r\n\t\tif (this._popup) {\r\n\t\t\tthis._popup = null;\r\n\t\t\tthis\r\n\t\t\t    .off('click', this.togglePopup, this)\r\n\t\t\t    .off('remove', this.closePopup, this)\r\n\t\t\t    .off('move', this._movePopup, this);\r\n\t\t\tthis._popupHandlersAdded = false;\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\tgetPopup: function () {\r\n\t\treturn this._popup;\r\n\t},\r\n\r\n\t_movePopup: function (e) {\r\n\t\tthis._popup.setLatLng(e.latlng);\r\n\t}\r\n});\r\n\n\n/*\r\n * L.LayerGroup is a class to combine several layers into one so that\r\n * you can manipulate the group (e.g. add/remove it) as one layer.\r\n */\r\n\r\nL.LayerGroup = L.Class.extend({\r\n\tinitialize: function (layers) {\r\n\t\tthis._layers = {};\r\n\r\n\t\tvar i, len;\r\n\r\n\t\tif (layers) {\r\n\t\t\tfor (i = 0, len = layers.length; i < len; i++) {\r\n\t\t\t\tthis.addLayer(layers[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\taddLayer: function (layer) {\r\n\t\tvar id = this.getLayerId(layer);\r\n\r\n\t\tthis._layers[id] = layer;\r\n\r\n\t\tif (this._map) {\r\n\t\t\tthis._map.addLayer(layer);\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tremoveLayer: function (layer) {\r\n\t\tvar id = layer in this._layers ? layer : this.getLayerId(layer);\r\n\r\n\t\tif (this._map && this._layers[id]) {\r\n\t\t\tthis._map.removeLayer(this._layers[id]);\r\n\t\t}\r\n\r\n\t\tdelete this._layers[id];\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\thasLayer: function (layer) {\r\n\t\tif (!layer) { return false; }\r\n\r\n\t\treturn (layer in this._layers || this.getLayerId(layer) in this._layers);\r\n\t},\r\n\r\n\tclearLayers: function () {\r\n\t\tthis.eachLayer(this.removeLayer, this);\r\n\t\treturn this;\r\n\t},\r\n\r\n\tinvoke: function (methodName) {\r\n\t\tvar args = Array.prototype.slice.call(arguments, 1),\r\n\t\t    i, layer;\r\n\r\n\t\tfor (i in this._layers) {\r\n\t\t\tlayer = this._layers[i];\r\n\r\n\t\t\tif (layer[methodName]) {\r\n\t\t\t\tlayer[methodName].apply(layer, args);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tonAdd: function (map) {\r\n\t\tthis._map = map;\r\n\t\tthis.eachLayer(map.addLayer, map);\r\n\t},\r\n\r\n\tonRemove: function (map) {\r\n\t\tthis.eachLayer(map.removeLayer, map);\r\n\t\tthis._map = null;\r\n\t},\r\n\r\n\taddTo: function (map) {\r\n\t\tmap.addLayer(this);\r\n\t\treturn this;\r\n\t},\r\n\r\n\teachLayer: function (method, context) {\r\n\t\tfor (var i in this._layers) {\r\n\t\t\tmethod.call(context, this._layers[i]);\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\tgetLayer: function (id) {\r\n\t\treturn this._layers[id];\r\n\t},\r\n\r\n\tgetLayers: function () {\r\n\t\tvar layers = [];\r\n\r\n\t\tfor (var i in this._layers) {\r\n\t\t\tlayers.push(this._layers[i]);\r\n\t\t}\r\n\t\treturn layers;\r\n\t},\r\n\r\n\tsetZIndex: function (zIndex) {\r\n\t\treturn this.invoke('setZIndex', zIndex);\r\n\t},\r\n\r\n\tgetLayerId: function (layer) {\r\n\t\treturn L.stamp(layer);\r\n\t}\r\n});\r\n\r\nL.layerGroup = function (layers) {\r\n\treturn new L.LayerGroup(layers);\r\n};\r\n\n\n/*\r\n * L.FeatureGroup extends L.LayerGroup by introducing mouse events and additional methods\r\n * shared between a group of interactive layers (like vectors or markers).\r\n */\r\n\r\nL.FeatureGroup = L.LayerGroup.extend({\r\n\tincludes: L.Mixin.Events,\r\n\r\n\tstatics: {\r\n\t\tEVENTS: 'click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose'\r\n\t},\r\n\r\n\taddLayer: function (layer) {\r\n\t\tif (this.hasLayer(layer)) {\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tif ('on' in layer) {\r\n\t\t\tlayer.on(L.FeatureGroup.EVENTS, this._propagateEvent, this);\r\n\t\t}\r\n\r\n\t\tL.LayerGroup.prototype.addLayer.call(this, layer);\r\n\r\n\t\tif (this._popupContent && layer.bindPopup) {\r\n\t\t\tlayer.bindPopup(this._popupContent, this._popupOptions);\r\n\t\t}\r\n\r\n\t\treturn this.fire('layeradd', {layer: layer});\r\n\t},\r\n\r\n\tremoveLayer: function (layer) {\r\n\t\tif (!this.hasLayer(layer)) {\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\tif (layer in this._layers) {\r\n\t\t\tlayer = this._layers[layer];\r\n\t\t}\r\n\r\n\t\tif ('off' in layer) {\r\n\t\t\tlayer.off(L.FeatureGroup.EVENTS, this._propagateEvent, this);\r\n\t\t}\r\n\r\n\t\tL.LayerGroup.prototype.removeLayer.call(this, layer);\r\n\r\n\t\tif (this._popupContent) {\r\n\t\t\tthis.invoke('unbindPopup');\r\n\t\t}\r\n\r\n\t\treturn this.fire('layerremove', {layer: layer});\r\n\t},\r\n\r\n\tbindPopup: function (content, options) {\r\n\t\tthis._popupContent = content;\r\n\t\tthis._popupOptions = options;\r\n\t\treturn this.invoke('bindPopup', content, options);\r\n\t},\r\n\r\n\topenPopup: function (latlng) {\r\n\t\t// open popup on the first layer\r\n\t\tfor (var id in this._layers) {\r\n\t\t\tthis._layers[id].openPopup(latlng);\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\tsetStyle: function (style) {\r\n\t\treturn this.invoke('setStyle', style);\r\n\t},\r\n\r\n\tbringToFront: function () {\r\n\t\treturn this.invoke('bringToFront');\r\n\t},\r\n\r\n\tbringToBack: function () {\r\n\t\treturn this.invoke('bringToBack');\r\n\t},\r\n\r\n\tgetBounds: function () {\r\n\t\tvar bounds = new L.LatLngBounds();\r\n\r\n\t\tthis.eachLayer(function (layer) {\r\n\t\t\tbounds.extend(layer instanceof L.Marker ? layer.getLatLng() : layer.getBounds());\r\n\t\t});\r\n\r\n\t\treturn bounds;\r\n\t},\r\n\r\n\t_propagateEvent: function (e) {\r\n\t\te = L.extend({\r\n\t\t\tlayer: e.target,\r\n\t\t\ttarget: this\r\n\t\t}, e);\r\n\t\tthis.fire(e.type, e);\r\n\t}\r\n});\r\n\r\nL.featureGroup = function (layers) {\r\n\treturn new L.FeatureGroup(layers);\r\n};\r\n\n\n/*\r\n * L.Path is a base class for rendering vector paths on a map. Inherited by Polyline, Circle, etc.\r\n */\r\n\r\nL.Path = L.Class.extend({\r\n\tincludes: [L.Mixin.Events],\r\n\r\n\tstatics: {\r\n\t\t// how much to extend the clip area around the map view\r\n\t\t// (relative to its size, e.g. 0.5 is half the screen in each direction)\r\n\t\t// set it so that SVG element doesn't exceed 1280px (vectors flicker on dragend if it is)\r\n\t\tCLIP_PADDING: (function () {\r\n\t\t\tvar max = L.Browser.mobile ? 1280 : 2000,\r\n\t\t\t    target = (max / Math.max(window.outerWidth, window.outerHeight) - 1) / 2;\r\n\t\t\treturn Math.max(0, Math.min(0.5, target));\r\n\t\t})()\r\n\t},\r\n\r\n\toptions: {\r\n\t\tstroke: true,\r\n\t\tcolor: '#0033ff',\r\n\t\tdashArray: null,\r\n\t\tlineCap: null,\r\n\t\tlineJoin: null,\r\n\t\tweight: 5,\r\n\t\topacity: 0.5,\r\n\r\n\t\tfill: false,\r\n\t\tfillColor: null, //same as color by default\r\n\t\tfillOpacity: 0.2,\r\n\r\n\t\tclickable: true\r\n\t},\r\n\r\n\tinitialize: function (options) {\r\n\t\tL.setOptions(this, options);\r\n\t},\r\n\r\n\tonAdd: function (map) {\r\n\t\tthis._map = map;\r\n\r\n\t\tif (!this._container) {\r\n\t\t\tthis._initElements();\r\n\t\t\tthis._initEvents();\r\n\t\t}\r\n\r\n\t\tthis.projectLatlngs();\r\n\t\tthis._updatePath();\r\n\r\n\t\tif (this._container) {\r\n\t\t\tthis._map._pathRoot.appendChild(this._container);\r\n\t\t}\r\n\r\n\t\tthis.fire('add');\r\n\r\n\t\tmap.on({\r\n\t\t\t'viewreset': this.projectLatlngs,\r\n\t\t\t'moveend': this._updatePath\r\n\t\t}, this);\r\n\t},\r\n\r\n\taddTo: function (map) {\r\n\t\tmap.addLayer(this);\r\n\t\treturn this;\r\n\t},\r\n\r\n\tonRemove: function (map) {\r\n\t\tmap._pathRoot.removeChild(this._container);\r\n\r\n\t\t// Need to fire remove event before we set _map to null as the event hooks might need the object\r\n\t\tthis.fire('remove');\r\n\t\tthis._map = null;\r\n\r\n\t\tif (L.Browser.vml) {\r\n\t\t\tthis._container = null;\r\n\t\t\tthis._stroke = null;\r\n\t\t\tthis._fill = null;\r\n\t\t}\r\n\r\n\t\tmap.off({\r\n\t\t\t'viewreset': this.projectLatlngs,\r\n\t\t\t'moveend': this._updatePath\r\n\t\t}, this);\r\n\t},\r\n\r\n\tprojectLatlngs: function () {\r\n\t\t// do all projection stuff here\r\n\t},\r\n\r\n\tsetStyle: function (style) {\r\n\t\tL.setOptions(this, style);\r\n\r\n\t\tif (this._container) {\r\n\t\t\tthis._updateStyle();\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tredraw: function () {\r\n\t\tif (this._map) {\r\n\t\t\tthis.projectLatlngs();\r\n\t\t\tthis._updatePath();\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n});\r\n\r\nL.Map.include({\r\n\t_updatePathViewport: function () {\r\n\t\tvar p = L.Path.CLIP_PADDING,\r\n\t\t    size = this.getSize(),\r\n\t\t    panePos = L.DomUtil.getPosition(this._mapPane),\r\n\t\t    min = panePos.multiplyBy(-1)._subtract(size.multiplyBy(p)._round()),\r\n\t\t    max = min.add(size.multiplyBy(1 + p * 2)._round());\r\n\r\n\t\tthis._pathViewport = new L.Bounds(min, max);\r\n\t}\r\n});\r\n\n\n/*\r\n * Extends L.Path with SVG-specific rendering code.\r\n */\r\n\r\nL.Path.SVG_NS = 'http://www.w3.org/2000/svg';\r\n\r\nL.Browser.svg = !!(document.createElementNS && document.createElementNS(L.Path.SVG_NS, 'svg').createSVGRect);\r\n\r\nL.Path = L.Path.extend({\r\n\tstatics: {\r\n\t\tSVG: L.Browser.svg\r\n\t},\r\n\r\n\tbringToFront: function () {\r\n\t\tvar root = this._map._pathRoot,\r\n\t\t    path = this._container;\r\n\r\n\t\tif (path && root.lastChild !== path) {\r\n\t\t\troot.appendChild(path);\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\tbringToBack: function () {\r\n\t\tvar root = this._map._pathRoot,\r\n\t\t    path = this._container,\r\n\t\t    first = root.firstChild;\r\n\r\n\t\tif (path && first !== path) {\r\n\t\t\troot.insertBefore(path, first);\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\tgetPathString: function () {\r\n\t\t// form path string here\r\n\t},\r\n\r\n\t_createElement: function (name) {\r\n\t\treturn document.createElementNS(L.Path.SVG_NS, name);\r\n\t},\r\n\r\n\t_initElements: function () {\r\n\t\tthis._map._initPathRoot();\r\n\t\tthis._initPath();\r\n\t\tthis._initStyle();\r\n\t},\r\n\r\n\t_initPath: function () {\r\n\t\tthis._container = this._createElement('g');\r\n\r\n\t\tthis._path = this._createElement('path');\r\n\r\n\t\tif (this.options.className) {\r\n\t\t\tL.DomUtil.addClass(this._path, this.options.className);\r\n\t\t}\r\n\r\n\t\tthis._container.appendChild(this._path);\r\n\t},\r\n\r\n\t_initStyle: function () {\r\n\t\tif (this.options.stroke) {\r\n\t\t\tthis._path.setAttribute('stroke-linejoin', 'round');\r\n\t\t\tthis._path.setAttribute('stroke-linecap', 'round');\r\n\t\t}\r\n\t\tif (this.options.fill) {\r\n\t\t\tthis._path.setAttribute('fill-rule', 'evenodd');\r\n\t\t}\r\n\t\tif (this.options.pointerEvents) {\r\n\t\t\tthis._path.setAttribute('pointer-events', this.options.pointerEvents);\r\n\t\t}\r\n\t\tif (!this.options.clickable && !this.options.pointerEvents) {\r\n\t\t\tthis._path.setAttribute('pointer-events', 'none');\r\n\t\t}\r\n\t\tthis._updateStyle();\r\n\t},\r\n\r\n\t_updateStyle: function () {\r\n\t\tif (this.options.stroke) {\r\n\t\t\tthis._path.setAttribute('stroke', this.options.color);\r\n\t\t\tthis._path.setAttribute('stroke-opacity', this.options.opacity);\r\n\t\t\tthis._path.setAttribute('stroke-width', this.options.weight);\r\n\t\t\tif (this.options.dashArray) {\r\n\t\t\t\tthis._path.setAttribute('stroke-dasharray', this.options.dashArray);\r\n\t\t\t} else {\r\n\t\t\t\tthis._path.removeAttribute('stroke-dasharray');\r\n\t\t\t}\r\n\t\t\tif (this.options.lineCap) {\r\n\t\t\t\tthis._path.setAttribute('stroke-linecap', this.options.lineCap);\r\n\t\t\t}\r\n\t\t\tif (this.options.lineJoin) {\r\n\t\t\t\tthis._path.setAttribute('stroke-linejoin', this.options.lineJoin);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis._path.setAttribute('stroke', 'none');\r\n\t\t}\r\n\t\tif (this.options.fill) {\r\n\t\t\tthis._path.setAttribute('fill', this.options.fillColor || this.options.color);\r\n\t\t\tthis._path.setAttribute('fill-opacity', this.options.fillOpacity);\r\n\t\t} else {\r\n\t\t\tthis._path.setAttribute('fill', 'none');\r\n\t\t}\r\n\t},\r\n\r\n\t_updatePath: function () {\r\n\t\tvar str = this.getPathString();\r\n\t\tif (!str) {\r\n\t\t\t// fix webkit empty string parsing bug\r\n\t\t\tstr = 'M0 0';\r\n\t\t}\r\n\t\tthis._path.setAttribute('d', str);\r\n\t},\r\n\r\n\t// TODO remove duplication with L.Map\r\n\t_initEvents: function () {\r\n\t\tif (this.options.clickable) {\r\n\t\t\tif (L.Browser.svg || !L.Browser.vml) {\r\n\t\t\t\tL.DomUtil.addClass(this._path, 'leaflet-clickable');\r\n\t\t\t}\r\n\r\n\t\t\tL.DomEvent.on(this._container, 'click', this._onMouseClick, this);\r\n\r\n\t\t\tvar events = ['dblclick', 'mousedown', 'mouseover',\r\n\t\t\t              'mouseout', 'mousemove', 'contextmenu'];\r\n\t\t\tfor (var i = 0; i < events.length; i++) {\r\n\t\t\t\tL.DomEvent.on(this._container, events[i], this._fireMouseEvent, this);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t_onMouseClick: function (e) {\r\n\t\tif (this._map.dragging && this._map.dragging.moved()) { return; }\r\n\r\n\t\tthis._fireMouseEvent(e);\r\n\t},\r\n\r\n\t_fireMouseEvent: function (e) {\r\n\t\tif (!this._map || !this.hasEventListeners(e.type)) { return; }\r\n\r\n\t\tvar map = this._map,\r\n\t\t    containerPoint = map.mouseEventToContainerPoint(e),\r\n\t\t    layerPoint = map.containerPointToLayerPoint(containerPoint),\r\n\t\t    latlng = map.layerPointToLatLng(layerPoint);\r\n\r\n\t\tthis.fire(e.type, {\r\n\t\t\tlatlng: latlng,\r\n\t\t\tlayerPoint: layerPoint,\r\n\t\t\tcontainerPoint: containerPoint,\r\n\t\t\toriginalEvent: e\r\n\t\t});\r\n\r\n\t\tif (e.type === 'contextmenu') {\r\n\t\t\tL.DomEvent.preventDefault(e);\r\n\t\t}\r\n\t\tif (e.type !== 'mousemove') {\r\n\t\t\tL.DomEvent.stopPropagation(e);\r\n\t\t}\r\n\t}\r\n});\r\n\r\nL.Map.include({\r\n\t_initPathRoot: function () {\r\n\t\tif (!this._pathRoot) {\r\n\t\t\tthis._pathRoot = L.Path.prototype._createElement('svg');\r\n\t\t\tthis._panes.overlayPane.appendChild(this._pathRoot);\r\n\r\n\t\t\tif (this.options.zoomAnimation && L.Browser.any3d) {\r\n\t\t\t\tL.DomUtil.addClass(this._pathRoot, 'leaflet-zoom-animated');\r\n\r\n\t\t\t\tthis.on({\r\n\t\t\t\t\t'zoomanim': this._animatePathZoom,\r\n\t\t\t\t\t'zoomend': this._endPathZoom\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tL.DomUtil.addClass(this._pathRoot, 'leaflet-zoom-hide');\r\n\t\t\t}\r\n\r\n\t\t\tthis.on('moveend', this._updateSvgViewport);\r\n\t\t\tthis._updateSvgViewport();\r\n\t\t}\r\n\t},\r\n\r\n\t_animatePathZoom: function (e) {\r\n\t\tvar scale = this.getZoomScale(e.zoom),\r\n\t\t    offset = this._getCenterOffset(e.center)._multiplyBy(-scale)._add(this._pathViewport.min);\r\n\r\n\t\tthis._pathRoot.style[L.DomUtil.TRANSFORM] =\r\n\t\t        L.DomUtil.getTranslateString(offset) + ' scale(' + scale + ') ';\r\n\r\n\t\tthis._pathZooming = true;\r\n\t},\r\n\r\n\t_endPathZoom: function () {\r\n\t\tthis._pathZooming = false;\r\n\t},\r\n\r\n\t_updateSvgViewport: function () {\r\n\r\n\t\tif (this._pathZooming) {\r\n\t\t\t// Do not update SVGs while a zoom animation is going on otherwise the animation will break.\r\n\t\t\t// When the zoom animation ends we will be updated again anyway\r\n\t\t\t// This fixes the case where you do a momentum move and zoom while the move is still ongoing.\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._updatePathViewport();\r\n\r\n\t\tvar vp = this._pathViewport,\r\n\t\t    min = vp.min,\r\n\t\t    max = vp.max,\r\n\t\t    width = max.x - min.x,\r\n\t\t    height = max.y - min.y,\r\n\t\t    root = this._pathRoot,\r\n\t\t    pane = this._panes.overlayPane;\r\n\r\n\t\t// Hack to make flicker on drag end on mobile webkit less irritating\r\n\t\tif (L.Browser.mobileWebkit) {\r\n\t\t\tpane.removeChild(root);\r\n\t\t}\r\n\r\n\t\tL.DomUtil.setPosition(root, min);\r\n\t\troot.setAttribute('width', width);\r\n\t\troot.setAttribute('height', height);\r\n\t\troot.setAttribute('viewBox', [min.x, min.y, width, height].join(' '));\r\n\r\n\t\tif (L.Browser.mobileWebkit) {\r\n\t\t\tpane.appendChild(root);\r\n\t\t}\r\n\t}\r\n});\r\n\n\n/*\r\n * Popup extension to L.Path (polylines, polygons, circles), adding popup-related methods.\r\n */\r\n\r\nL.Path.include({\r\n\r\n\tbindPopup: function (content, options) {\r\n\r\n\t\tif (content instanceof L.Popup) {\r\n\t\t\tthis._popup = content;\r\n\t\t} else {\r\n\t\t\tif (!this._popup || options) {\r\n\t\t\t\tthis._popup = new L.Popup(options, this);\r\n\t\t\t}\r\n\t\t\tthis._popup.setContent(content);\r\n\t\t}\r\n\r\n\t\tif (!this._popupHandlersAdded) {\r\n\t\t\tthis\r\n\t\t\t    .on('click', this._openPopup, this)\r\n\t\t\t    .on('remove', this.closePopup, this);\r\n\r\n\t\t\tthis._popupHandlersAdded = true;\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tunbindPopup: function () {\r\n\t\tif (this._popup) {\r\n\t\t\tthis._popup = null;\r\n\t\t\tthis\r\n\t\t\t    .off('click', this._openPopup)\r\n\t\t\t    .off('remove', this.closePopup);\r\n\r\n\t\t\tthis._popupHandlersAdded = false;\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\topenPopup: function (latlng) {\r\n\r\n\t\tif (this._popup) {\r\n\t\t\t// open the popup from one of the path's points if not specified\r\n\t\t\tlatlng = latlng || this._latlng ||\r\n\t\t\t         this._latlngs[Math.floor(this._latlngs.length / 2)];\r\n\r\n\t\t\tthis._openPopup({latlng: latlng});\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tclosePopup: function () {\r\n\t\tif (this._popup) {\r\n\t\t\tthis._popup._close();\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\t_openPopup: function (e) {\r\n\t\tthis._popup.setLatLng(e.latlng);\r\n\t\tthis._map.openPopup(this._popup);\r\n\t}\r\n});\r\n\n\n/*\r\n * Vector rendering for IE6-8 through VML.\r\n * Thanks to Dmitry Baranovsky and his Raphael library for inspiration!\r\n */\r\n\r\nL.Browser.vml = !L.Browser.svg && (function () {\r\n\ttry {\r\n\t\tvar div = document.createElement('div');\r\n\t\tdiv.innerHTML = '<v:shape adj=\"1\"/>';\r\n\r\n\t\tvar shape = div.firstChild;\r\n\t\tshape.style.behavior = 'url(#default#VML)';\r\n\r\n\t\treturn shape && (typeof shape.adj === 'object');\r\n\r\n\t} catch (e) {\r\n\t\treturn false;\r\n\t}\r\n}());\r\n\r\nL.Path = L.Browser.svg || !L.Browser.vml ? L.Path : L.Path.extend({\r\n\tstatics: {\r\n\t\tVML: true,\r\n\t\tCLIP_PADDING: 0.02\r\n\t},\r\n\r\n\t_createElement: (function () {\r\n\t\ttry {\r\n\t\t\tdocument.namespaces.add('lvml', 'urn:schemas-microsoft-com:vml');\r\n\t\t\treturn function (name) {\r\n\t\t\t\treturn document.createElement('<lvml:' + name + ' class=\"lvml\">');\r\n\t\t\t};\r\n\t\t} catch (e) {\r\n\t\t\treturn function (name) {\r\n\t\t\t\treturn document.createElement(\r\n\t\t\t\t        '<' + name + ' xmlns=\"urn:schemas-microsoft.com:vml\" class=\"lvml\">');\r\n\t\t\t};\r\n\t\t}\r\n\t}()),\r\n\r\n\t_initPath: function () {\r\n\t\tvar container = this._container = this._createElement('shape');\r\n\r\n\t\tL.DomUtil.addClass(container, 'leaflet-vml-shape' +\r\n\t\t\t(this.options.className ? ' ' + this.options.className : ''));\r\n\r\n\t\tif (this.options.clickable) {\r\n\t\t\tL.DomUtil.addClass(container, 'leaflet-clickable');\r\n\t\t}\r\n\r\n\t\tcontainer.coordsize = '1 1';\r\n\r\n\t\tthis._path = this._createElement('path');\r\n\t\tcontainer.appendChild(this._path);\r\n\r\n\t\tthis._map._pathRoot.appendChild(container);\r\n\t},\r\n\r\n\t_initStyle: function () {\r\n\t\tthis._updateStyle();\r\n\t},\r\n\r\n\t_updateStyle: function () {\r\n\t\tvar stroke = this._stroke,\r\n\t\t    fill = this._fill,\r\n\t\t    options = this.options,\r\n\t\t    container = this._container;\r\n\r\n\t\tcontainer.stroked = options.stroke;\r\n\t\tcontainer.filled = options.fill;\r\n\r\n\t\tif (options.stroke) {\r\n\t\t\tif (!stroke) {\r\n\t\t\t\tstroke = this._stroke = this._createElement('stroke');\r\n\t\t\t\tstroke.endcap = 'round';\r\n\t\t\t\tcontainer.appendChild(stroke);\r\n\t\t\t}\r\n\t\t\tstroke.weight = options.weight + 'px';\r\n\t\t\tstroke.color = options.color;\r\n\t\t\tstroke.opacity = options.opacity;\r\n\r\n\t\t\tif (options.dashArray) {\r\n\t\t\t\tstroke.dashStyle = L.Util.isArray(options.dashArray) ?\r\n\t\t\t\t    options.dashArray.join(' ') :\r\n\t\t\t\t    options.dashArray.replace(/( *, *)/g, ' ');\r\n\t\t\t} else {\r\n\t\t\t\tstroke.dashStyle = '';\r\n\t\t\t}\r\n\t\t\tif (options.lineCap) {\r\n\t\t\t\tstroke.endcap = options.lineCap.replace('butt', 'flat');\r\n\t\t\t}\r\n\t\t\tif (options.lineJoin) {\r\n\t\t\t\tstroke.joinstyle = options.lineJoin;\r\n\t\t\t}\r\n\r\n\t\t} else if (stroke) {\r\n\t\t\tcontainer.removeChild(stroke);\r\n\t\t\tthis._stroke = null;\r\n\t\t}\r\n\r\n\t\tif (options.fill) {\r\n\t\t\tif (!fill) {\r\n\t\t\t\tfill = this._fill = this._createElement('fill');\r\n\t\t\t\tcontainer.appendChild(fill);\r\n\t\t\t}\r\n\t\t\tfill.color = options.fillColor || options.color;\r\n\t\t\tfill.opacity = options.fillOpacity;\r\n\r\n\t\t} else if (fill) {\r\n\t\t\tcontainer.removeChild(fill);\r\n\t\t\tthis._fill = null;\r\n\t\t}\r\n\t},\r\n\r\n\t_updatePath: function () {\r\n\t\tvar style = this._container.style;\r\n\r\n\t\tstyle.display = 'none';\r\n\t\tthis._path.v = this.getPathString() + ' '; // the space fixes IE empty path string bug\r\n\t\tstyle.display = '';\r\n\t}\r\n});\r\n\r\nL.Map.include(L.Browser.svg || !L.Browser.vml ? {} : {\r\n\t_initPathRoot: function () {\r\n\t\tif (this._pathRoot) { return; }\r\n\r\n\t\tvar root = this._pathRoot = document.createElement('div');\r\n\t\troot.className = 'leaflet-vml-container';\r\n\t\tthis._panes.overlayPane.appendChild(root);\r\n\r\n\t\tthis.on('moveend', this._updatePathViewport);\r\n\t\tthis._updatePathViewport();\r\n\t}\r\n});\r\n\n\n/*\r\n * Vector rendering for all browsers that support canvas.\r\n */\r\n\r\nL.Browser.canvas = (function () {\r\n\treturn !!document.createElement('canvas').getContext;\r\n}());\r\n\r\nL.Path = (L.Path.SVG && !window.L_PREFER_CANVAS) || !L.Browser.canvas ? L.Path : L.Path.extend({\r\n\tstatics: {\r\n\t\t//CLIP_PADDING: 0.02, // not sure if there's a need to set it to a small value\r\n\t\tCANVAS: true,\r\n\t\tSVG: false\r\n\t},\r\n\r\n\tredraw: function () {\r\n\t\tif (this._map) {\r\n\t\t\tthis.projectLatlngs();\r\n\t\t\tthis._requestUpdate();\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\tsetStyle: function (style) {\r\n\t\tL.setOptions(this, style);\r\n\r\n\t\tif (this._map) {\r\n\t\t\tthis._updateStyle();\r\n\t\t\tthis._requestUpdate();\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\tonRemove: function (map) {\r\n\t\tmap\r\n\t\t    .off('viewreset', this.projectLatlngs, this)\r\n\t\t    .off('moveend', this._updatePath, this);\r\n\r\n\t\tif (this.options.clickable) {\r\n\t\t\tthis._map.off('click', this._onClick, this);\r\n\t\t\tthis._map.off('mousemove', this._onMouseMove, this);\r\n\t\t}\r\n\r\n\t\tthis._requestUpdate();\r\n\t\t\r\n\t\tthis.fire('remove');\r\n\t\tthis._map = null;\r\n\t},\r\n\r\n\t_requestUpdate: function () {\r\n\t\tif (this._map && !L.Path._updateRequest) {\r\n\t\t\tL.Path._updateRequest = L.Util.requestAnimFrame(this._fireMapMoveEnd, this._map);\r\n\t\t}\r\n\t},\r\n\r\n\t_fireMapMoveEnd: function () {\r\n\t\tL.Path._updateRequest = null;\r\n\t\tthis.fire('moveend');\r\n\t},\r\n\r\n\t_initElements: function () {\r\n\t\tthis._map._initPathRoot();\r\n\t\tthis._ctx = this._map._canvasCtx;\r\n\t},\r\n\r\n\t_updateStyle: function () {\r\n\t\tvar options = this.options;\r\n\r\n\t\tif (options.stroke) {\r\n\t\t\tthis._ctx.lineWidth = options.weight;\r\n\t\t\tthis._ctx.strokeStyle = options.color;\r\n\t\t}\r\n\t\tif (options.fill) {\r\n\t\t\tthis._ctx.fillStyle = options.fillColor || options.color;\r\n\t\t}\r\n\r\n\t\tif (options.lineCap) {\r\n\t\t\tthis._ctx.lineCap = options.lineCap;\r\n\t\t}\r\n\t\tif (options.lineJoin) {\r\n\t\t\tthis._ctx.lineJoin = options.lineJoin;\r\n\t\t}\r\n\t},\r\n\r\n\t_drawPath: function () {\r\n\t\tvar i, j, len, len2, point, drawMethod;\r\n\r\n\t\tthis._ctx.beginPath();\r\n\r\n\t\tfor (i = 0, len = this._parts.length; i < len; i++) {\r\n\t\t\tfor (j = 0, len2 = this._parts[i].length; j < len2; j++) {\r\n\t\t\t\tpoint = this._parts[i][j];\r\n\t\t\t\tdrawMethod = (j === 0 ? 'move' : 'line') + 'To';\r\n\r\n\t\t\t\tthis._ctx[drawMethod](point.x, point.y);\r\n\t\t\t}\r\n\t\t\t// TODO refactor ugly hack\r\n\t\t\tif (this instanceof L.Polygon) {\r\n\t\t\t\tthis._ctx.closePath();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t_checkIfEmpty: function () {\r\n\t\treturn !this._parts.length;\r\n\t},\r\n\r\n\t_updatePath: function () {\r\n\t\tif (this._checkIfEmpty()) { return; }\r\n\r\n\t\tvar ctx = this._ctx,\r\n\t\t    options = this.options;\r\n\r\n\t\tthis._drawPath();\r\n\t\tctx.save();\r\n\t\tthis._updateStyle();\r\n\r\n\t\tif (options.fill) {\r\n\t\t\tctx.globalAlpha = options.fillOpacity;\r\n\t\t\tctx.fill(options.fillRule || 'evenodd');\r\n\t\t}\r\n\r\n\t\tif (options.stroke) {\r\n\t\t\tctx.globalAlpha = options.opacity;\r\n\t\t\tctx.stroke();\r\n\t\t}\r\n\r\n\t\tctx.restore();\r\n\r\n\t\t// TODO optimization: 1 fill/stroke for all features with equal style instead of 1 for each feature\r\n\t},\r\n\r\n\t_initEvents: function () {\r\n\t\tif (this.options.clickable) {\r\n\t\t\tthis._map.on('mousemove', this._onMouseMove, this);\r\n\t\t\tthis._map.on('click dblclick contextmenu', this._fireMouseEvent, this);\r\n\t\t}\r\n\t},\r\n\r\n\t_fireMouseEvent: function (e) {\r\n\t\tif (this._containsPoint(e.layerPoint)) {\r\n\t\t\tthis.fire(e.type, e);\r\n\t\t}\r\n\t},\r\n\r\n\t_onMouseMove: function (e) {\r\n\t\tif (!this._map || this._map._animatingZoom) { return; }\r\n\r\n\t\t// TODO don't do on each move\r\n\t\tif (this._containsPoint(e.layerPoint)) {\r\n\t\t\tthis._ctx.canvas.style.cursor = 'pointer';\r\n\t\t\tthis._mouseInside = true;\r\n\t\t\tthis.fire('mouseover', e);\r\n\r\n\t\t} else if (this._mouseInside) {\r\n\t\t\tthis._ctx.canvas.style.cursor = '';\r\n\t\t\tthis._mouseInside = false;\r\n\t\t\tthis.fire('mouseout', e);\r\n\t\t}\r\n\t}\r\n});\r\n\r\nL.Map.include((L.Path.SVG && !window.L_PREFER_CANVAS) || !L.Browser.canvas ? {} : {\r\n\t_initPathRoot: function () {\r\n\t\tvar root = this._pathRoot,\r\n\t\t    ctx;\r\n\r\n\t\tif (!root) {\r\n\t\t\troot = this._pathRoot = document.createElement('canvas');\r\n\t\t\troot.style.position = 'absolute';\r\n\t\t\tctx = this._canvasCtx = root.getContext('2d');\r\n\r\n\t\t\tctx.lineCap = 'round';\r\n\t\t\tctx.lineJoin = 'round';\r\n\r\n\t\t\tthis._panes.overlayPane.appendChild(root);\r\n\r\n\t\t\tif (this.options.zoomAnimation) {\r\n\t\t\t\tthis._pathRoot.className = 'leaflet-zoom-animated';\r\n\t\t\t\tthis.on('zoomanim', this._animatePathZoom);\r\n\t\t\t\tthis.on('zoomend', this._endPathZoom);\r\n\t\t\t}\r\n\t\t\tthis.on('moveend', this._updateCanvasViewport);\r\n\t\t\tthis._updateCanvasViewport();\r\n\t\t}\r\n\t},\r\n\r\n\t_updateCanvasViewport: function () {\r\n\t\t// don't redraw while zooming. See _updateSvgViewport for more details\r\n\t\tif (this._pathZooming) { return; }\r\n\t\tthis._updatePathViewport();\r\n\r\n\t\tvar vp = this._pathViewport,\r\n\t\t    min = vp.min,\r\n\t\t    size = vp.max.subtract(min),\r\n\t\t    root = this._pathRoot;\r\n\r\n\t\t//TODO check if this works properly on mobile webkit\r\n\t\tL.DomUtil.setPosition(root, min);\r\n\t\troot.width = size.x;\r\n\t\troot.height = size.y;\r\n\t\troot.getContext('2d').translate(-min.x, -min.y);\r\n\t}\r\n});\r\n\n\n/*\r\n * L.LineUtil contains different utility functions for line segments\r\n * and polylines (clipping, simplification, distances, etc.)\r\n */\r\n\r\n/*jshint bitwise:false */ // allow bitwise operations for this file\r\n\r\nL.LineUtil = {\r\n\r\n\t// Simplify polyline with vertex reduction and Douglas-Peucker simplification.\r\n\t// Improves rendering performance dramatically by lessening the number of points to draw.\r\n\r\n\tsimplify: function (/*Point[]*/ points, /*Number*/ tolerance) {\r\n\t\tif (!tolerance || !points.length) {\r\n\t\t\treturn points.slice();\r\n\t\t}\r\n\r\n\t\tvar sqTolerance = tolerance * tolerance;\r\n\r\n\t\t// stage 1: vertex reduction\r\n\t\tpoints = this._reducePoints(points, sqTolerance);\r\n\r\n\t\t// stage 2: Douglas-Peucker simplification\r\n\t\tpoints = this._simplifyDP(points, sqTolerance);\r\n\r\n\t\treturn points;\r\n\t},\r\n\r\n\t// distance from a point to a segment between two points\r\n\tpointToSegmentDistance:  function (/*Point*/ p, /*Point*/ p1, /*Point*/ p2) {\r\n\t\treturn Math.sqrt(this._sqClosestPointOnSegment(p, p1, p2, true));\r\n\t},\r\n\r\n\tclosestPointOnSegment: function (/*Point*/ p, /*Point*/ p1, /*Point*/ p2) {\r\n\t\treturn this._sqClosestPointOnSegment(p, p1, p2);\r\n\t},\r\n\r\n\t// Douglas-Peucker simplification, see http://en.wikipedia.org/wiki/Douglas-Peucker_algorithm\r\n\t_simplifyDP: function (points, sqTolerance) {\r\n\r\n\t\tvar len = points.length,\r\n\t\t    ArrayConstructor = typeof Uint8Array !== undefined + '' ? Uint8Array : Array,\r\n\t\t    markers = new ArrayConstructor(len);\r\n\r\n\t\tmarkers[0] = markers[len - 1] = 1;\r\n\r\n\t\tthis._simplifyDPStep(points, markers, sqTolerance, 0, len - 1);\r\n\r\n\t\tvar i,\r\n\t\t    newPoints = [];\r\n\r\n\t\tfor (i = 0; i < len; i++) {\r\n\t\t\tif (markers[i]) {\r\n\t\t\t\tnewPoints.push(points[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn newPoints;\r\n\t},\r\n\r\n\t_simplifyDPStep: function (points, markers, sqTolerance, first, last) {\r\n\r\n\t\tvar maxSqDist = 0,\r\n\t\t    index, i, sqDist;\r\n\r\n\t\tfor (i = first + 1; i <= last - 1; i++) {\r\n\t\t\tsqDist = this._sqClosestPointOnSegment(points[i], points[first], points[last], true);\r\n\r\n\t\t\tif (sqDist > maxSqDist) {\r\n\t\t\t\tindex = i;\r\n\t\t\t\tmaxSqDist = sqDist;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (maxSqDist > sqTolerance) {\r\n\t\t\tmarkers[index] = 1;\r\n\r\n\t\t\tthis._simplifyDPStep(points, markers, sqTolerance, first, index);\r\n\t\t\tthis._simplifyDPStep(points, markers, sqTolerance, index, last);\r\n\t\t}\r\n\t},\r\n\r\n\t// reduce points that are too close to each other to a single point\r\n\t_reducePoints: function (points, sqTolerance) {\r\n\t\tvar reducedPoints = [points[0]];\r\n\r\n\t\tfor (var i = 1, prev = 0, len = points.length; i < len; i++) {\r\n\t\t\tif (this._sqDist(points[i], points[prev]) > sqTolerance) {\r\n\t\t\t\treducedPoints.push(points[i]);\r\n\t\t\t\tprev = i;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (prev < len - 1) {\r\n\t\t\treducedPoints.push(points[len - 1]);\r\n\t\t}\r\n\t\treturn reducedPoints;\r\n\t},\r\n\r\n\t// Cohen-Sutherland line clipping algorithm.\r\n\t// Used to avoid rendering parts of a polyline that are not currently visible.\r\n\r\n\tclipSegment: function (a, b, bounds, useLastCode) {\r\n\t\tvar codeA = useLastCode ? this._lastCode : this._getBitCode(a, bounds),\r\n\t\t    codeB = this._getBitCode(b, bounds),\r\n\r\n\t\t    codeOut, p, newCode;\r\n\r\n\t\t// save 2nd code to avoid calculating it on the next segment\r\n\t\tthis._lastCode = codeB;\r\n\r\n\t\twhile (true) {\r\n\t\t\t// if a,b is inside the clip window (trivial accept)\r\n\t\t\tif (!(codeA | codeB)) {\r\n\t\t\t\treturn [a, b];\r\n\t\t\t// if a,b is outside the clip window (trivial reject)\r\n\t\t\t} else if (codeA & codeB) {\r\n\t\t\t\treturn false;\r\n\t\t\t// other cases\r\n\t\t\t} else {\r\n\t\t\t\tcodeOut = codeA || codeB;\r\n\t\t\t\tp = this._getEdgeIntersection(a, b, codeOut, bounds);\r\n\t\t\t\tnewCode = this._getBitCode(p, bounds);\r\n\r\n\t\t\t\tif (codeOut === codeA) {\r\n\t\t\t\t\ta = p;\r\n\t\t\t\t\tcodeA = newCode;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tb = p;\r\n\t\t\t\t\tcodeB = newCode;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t_getEdgeIntersection: function (a, b, code, bounds) {\r\n\t\tvar dx = b.x - a.x,\r\n\t\t    dy = b.y - a.y,\r\n\t\t    min = bounds.min,\r\n\t\t    max = bounds.max;\r\n\r\n\t\tif (code & 8) { // top\r\n\t\t\treturn new L.Point(a.x + dx * (max.y - a.y) / dy, max.y);\r\n\t\t} else if (code & 4) { // bottom\r\n\t\t\treturn new L.Point(a.x + dx * (min.y - a.y) / dy, min.y);\r\n\t\t} else if (code & 2) { // right\r\n\t\t\treturn new L.Point(max.x, a.y + dy * (max.x - a.x) / dx);\r\n\t\t} else if (code & 1) { // left\r\n\t\t\treturn new L.Point(min.x, a.y + dy * (min.x - a.x) / dx);\r\n\t\t}\r\n\t},\r\n\r\n\t_getBitCode: function (/*Point*/ p, bounds) {\r\n\t\tvar code = 0;\r\n\r\n\t\tif (p.x < bounds.min.x) { // left\r\n\t\t\tcode |= 1;\r\n\t\t} else if (p.x > bounds.max.x) { // right\r\n\t\t\tcode |= 2;\r\n\t\t}\r\n\t\tif (p.y < bounds.min.y) { // bottom\r\n\t\t\tcode |= 4;\r\n\t\t} else if (p.y > bounds.max.y) { // top\r\n\t\t\tcode |= 8;\r\n\t\t}\r\n\r\n\t\treturn code;\r\n\t},\r\n\r\n\t// square distance (to avoid unnecessary Math.sqrt calls)\r\n\t_sqDist: function (p1, p2) {\r\n\t\tvar dx = p2.x - p1.x,\r\n\t\t    dy = p2.y - p1.y;\r\n\t\treturn dx * dx + dy * dy;\r\n\t},\r\n\r\n\t// return closest point on segment or distance to that point\r\n\t_sqClosestPointOnSegment: function (p, p1, p2, sqDist) {\r\n\t\tvar x = p1.x,\r\n\t\t    y = p1.y,\r\n\t\t    dx = p2.x - x,\r\n\t\t    dy = p2.y - y,\r\n\t\t    dot = dx * dx + dy * dy,\r\n\t\t    t;\r\n\r\n\t\tif (dot > 0) {\r\n\t\t\tt = ((p.x - x) * dx + (p.y - y) * dy) / dot;\r\n\r\n\t\t\tif (t > 1) {\r\n\t\t\t\tx = p2.x;\r\n\t\t\t\ty = p2.y;\r\n\t\t\t} else if (t > 0) {\r\n\t\t\t\tx += dx * t;\r\n\t\t\t\ty += dy * t;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tdx = p.x - x;\r\n\t\tdy = p.y - y;\r\n\r\n\t\treturn sqDist ? dx * dx + dy * dy : new L.Point(x, y);\r\n\t}\r\n};\r\n\n\n/*\r\n * L.Polyline is used to display polylines on a map.\r\n */\r\n\r\nL.Polyline = L.Path.extend({\r\n\tinitialize: function (latlngs, options) {\r\n\t\tL.Path.prototype.initialize.call(this, options);\r\n\r\n\t\tthis._latlngs = this._convertLatLngs(latlngs);\r\n\t},\r\n\r\n\toptions: {\r\n\t\t// how much to simplify the polyline on each zoom level\r\n\t\t// more = better performance and smoother look, less = more accurate\r\n\t\tsmoothFactor: 1.0,\r\n\t\tnoClip: false\r\n\t},\r\n\r\n\tprojectLatlngs: function () {\r\n\t\tthis._originalPoints = [];\r\n\r\n\t\tfor (var i = 0, len = this._latlngs.length; i < len; i++) {\r\n\t\t\tthis._originalPoints[i] = this._map.latLngToLayerPoint(this._latlngs[i]);\r\n\t\t}\r\n\t},\r\n\r\n\tgetPathString: function () {\r\n\t\tfor (var i = 0, len = this._parts.length, str = ''; i < len; i++) {\r\n\t\t\tstr += this._getPathPartStr(this._parts[i]);\r\n\t\t}\r\n\t\treturn str;\r\n\t},\r\n\r\n\tgetLatLngs: function () {\r\n\t\treturn this._latlngs;\r\n\t},\r\n\r\n\tsetLatLngs: function (latlngs) {\r\n\t\tthis._latlngs = this._convertLatLngs(latlngs);\r\n\t\treturn this.redraw();\r\n\t},\r\n\r\n\taddLatLng: function (latlng) {\r\n\t\tthis._latlngs.push(L.latLng(latlng));\r\n\t\treturn this.redraw();\r\n\t},\r\n\r\n\tspliceLatLngs: function () { // (Number index, Number howMany)\r\n\t\tvar removed = [].splice.apply(this._latlngs, arguments);\r\n\t\tthis._convertLatLngs(this._latlngs, true);\r\n\t\tthis.redraw();\r\n\t\treturn removed;\r\n\t},\r\n\r\n\tclosestLayerPoint: function (p) {\r\n\t\tvar minDistance = Infinity, parts = this._parts, p1, p2, minPoint = null;\r\n\r\n\t\tfor (var j = 0, jLen = parts.length; j < jLen; j++) {\r\n\t\t\tvar points = parts[j];\r\n\t\t\tfor (var i = 1, len = points.length; i < len; i++) {\r\n\t\t\t\tp1 = points[i - 1];\r\n\t\t\t\tp2 = points[i];\r\n\t\t\t\tvar sqDist = L.LineUtil._sqClosestPointOnSegment(p, p1, p2, true);\r\n\t\t\t\tif (sqDist < minDistance) {\r\n\t\t\t\t\tminDistance = sqDist;\r\n\t\t\t\t\tminPoint = L.LineUtil._sqClosestPointOnSegment(p, p1, p2);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (minPoint) {\r\n\t\t\tminPoint.distance = Math.sqrt(minDistance);\r\n\t\t}\r\n\t\treturn minPoint;\r\n\t},\r\n\r\n\tgetBounds: function () {\r\n\t\treturn new L.LatLngBounds(this.getLatLngs());\r\n\t},\r\n\r\n\t_convertLatLngs: function (latlngs, overwrite) {\r\n\t\tvar i, len, target = overwrite ? latlngs : [];\r\n\r\n\t\tfor (i = 0, len = latlngs.length; i < len; i++) {\r\n\t\t\tif (L.Util.isArray(latlngs[i]) && typeof latlngs[i][0] !== 'number') {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\ttarget[i] = L.latLng(latlngs[i]);\r\n\t\t}\r\n\t\treturn target;\r\n\t},\r\n\r\n\t_initEvents: function () {\r\n\t\tL.Path.prototype._initEvents.call(this);\r\n\t},\r\n\r\n\t_getPathPartStr: function (points) {\r\n\t\tvar round = L.Path.VML;\r\n\r\n\t\tfor (var j = 0, len2 = points.length, str = '', p; j < len2; j++) {\r\n\t\t\tp = points[j];\r\n\t\t\tif (round) {\r\n\t\t\t\tp._round();\r\n\t\t\t}\r\n\t\t\tstr += (j ? 'L' : 'M') + p.x + ' ' + p.y;\r\n\t\t}\r\n\t\treturn str;\r\n\t},\r\n\r\n\t_clipPoints: function () {\r\n\t\tvar points = this._originalPoints,\r\n\t\t    len = points.length,\r\n\t\t    i, k, segment;\r\n\r\n\t\tif (this.options.noClip) {\r\n\t\t\tthis._parts = [points];\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._parts = [];\r\n\r\n\t\tvar parts = this._parts,\r\n\t\t    vp = this._map._pathViewport,\r\n\t\t    lu = L.LineUtil;\r\n\r\n\t\tfor (i = 0, k = 0; i < len - 1; i++) {\r\n\t\t\tsegment = lu.clipSegment(points[i], points[i + 1], vp, i);\r\n\t\t\tif (!segment) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tparts[k] = parts[k] || [];\r\n\t\t\tparts[k].push(segment[0]);\r\n\r\n\t\t\t// if segment goes out of screen, or it's the last one, it's the end of the line part\r\n\t\t\tif ((segment[1] !== points[i + 1]) || (i === len - 2)) {\r\n\t\t\t\tparts[k].push(segment[1]);\r\n\t\t\t\tk++;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t// simplify each clipped part of the polyline\r\n\t_simplifyPoints: function () {\r\n\t\tvar parts = this._parts,\r\n\t\t    lu = L.LineUtil;\r\n\r\n\t\tfor (var i = 0, len = parts.length; i < len; i++) {\r\n\t\t\tparts[i] = lu.simplify(parts[i], this.options.smoothFactor);\r\n\t\t}\r\n\t},\r\n\r\n\t_updatePath: function () {\r\n\t\tif (!this._map) { return; }\r\n\r\n\t\tthis._clipPoints();\r\n\t\tthis._simplifyPoints();\r\n\r\n\t\tL.Path.prototype._updatePath.call(this);\r\n\t}\r\n});\r\n\r\nL.polyline = function (latlngs, options) {\r\n\treturn new L.Polyline(latlngs, options);\r\n};\r\n\n\n/*\r\n * L.PolyUtil contains utility functions for polygons (clipping, etc.).\r\n */\r\n\r\n/*jshint bitwise:false */ // allow bitwise operations here\r\n\r\nL.PolyUtil = {};\r\n\r\n/*\r\n * Sutherland-Hodgeman polygon clipping algorithm.\r\n * Used to avoid rendering parts of a polygon that are not currently visible.\r\n */\r\nL.PolyUtil.clipPolygon = function (points, bounds) {\r\n\tvar clippedPoints,\r\n\t    edges = [1, 4, 2, 8],\r\n\t    i, j, k,\r\n\t    a, b,\r\n\t    len, edge, p,\r\n\t    lu = L.LineUtil;\r\n\r\n\tfor (i = 0, len = points.length; i < len; i++) {\r\n\t\tpoints[i]._code = lu._getBitCode(points[i], bounds);\r\n\t}\r\n\r\n\t// for each edge (left, bottom, right, top)\r\n\tfor (k = 0; k < 4; k++) {\r\n\t\tedge = edges[k];\r\n\t\tclippedPoints = [];\r\n\r\n\t\tfor (i = 0, len = points.length, j = len - 1; i < len; j = i++) {\r\n\t\t\ta = points[i];\r\n\t\t\tb = points[j];\r\n\r\n\t\t\t// if a is inside the clip window\r\n\t\t\tif (!(a._code & edge)) {\r\n\t\t\t\t// if b is outside the clip window (a->b goes out of screen)\r\n\t\t\t\tif (b._code & edge) {\r\n\t\t\t\t\tp = lu._getEdgeIntersection(b, a, edge, bounds);\r\n\t\t\t\t\tp._code = lu._getBitCode(p, bounds);\r\n\t\t\t\t\tclippedPoints.push(p);\r\n\t\t\t\t}\r\n\t\t\t\tclippedPoints.push(a);\r\n\r\n\t\t\t// else if b is inside the clip window (a->b enters the screen)\r\n\t\t\t} else if (!(b._code & edge)) {\r\n\t\t\t\tp = lu._getEdgeIntersection(b, a, edge, bounds);\r\n\t\t\t\tp._code = lu._getBitCode(p, bounds);\r\n\t\t\t\tclippedPoints.push(p);\r\n\t\t\t}\r\n\t\t}\r\n\t\tpoints = clippedPoints;\r\n\t}\r\n\r\n\treturn points;\r\n};\r\n\n\n/*\r\n * L.Polygon is used to display polygons on a map.\r\n */\r\n\r\nL.Polygon = L.Polyline.extend({\r\n\toptions: {\r\n\t\tfill: true\r\n\t},\r\n\r\n\tinitialize: function (latlngs, options) {\r\n\t\tL.Polyline.prototype.initialize.call(this, latlngs, options);\r\n\t\tthis._initWithHoles(latlngs);\r\n\t},\r\n\r\n\t_initWithHoles: function (latlngs) {\r\n\t\tvar i, len, hole;\r\n\t\tif (latlngs && L.Util.isArray(latlngs[0]) && (typeof latlngs[0][0] !== 'number')) {\r\n\t\t\tthis._latlngs = this._convertLatLngs(latlngs[0]);\r\n\t\t\tthis._holes = latlngs.slice(1);\r\n\r\n\t\t\tfor (i = 0, len = this._holes.length; i < len; i++) {\r\n\t\t\t\thole = this._holes[i] = this._convertLatLngs(this._holes[i]);\r\n\t\t\t\tif (hole[0].equals(hole[hole.length - 1])) {\r\n\t\t\t\t\thole.pop();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// filter out last point if its equal to the first one\r\n\t\tlatlngs = this._latlngs;\r\n\r\n\t\tif (latlngs.length >= 2 && latlngs[0].equals(latlngs[latlngs.length - 1])) {\r\n\t\t\tlatlngs.pop();\r\n\t\t}\r\n\t},\r\n\r\n\tprojectLatlngs: function () {\r\n\t\tL.Polyline.prototype.projectLatlngs.call(this);\r\n\r\n\t\t// project polygon holes points\r\n\t\t// TODO move this logic to Polyline to get rid of duplication\r\n\t\tthis._holePoints = [];\r\n\r\n\t\tif (!this._holes) { return; }\r\n\r\n\t\tvar i, j, len, len2;\r\n\r\n\t\tfor (i = 0, len = this._holes.length; i < len; i++) {\r\n\t\t\tthis._holePoints[i] = [];\r\n\r\n\t\t\tfor (j = 0, len2 = this._holes[i].length; j < len2; j++) {\r\n\t\t\t\tthis._holePoints[i][j] = this._map.latLngToLayerPoint(this._holes[i][j]);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tsetLatLngs: function (latlngs) {\r\n\t\tif (latlngs && L.Util.isArray(latlngs[0]) && (typeof latlngs[0][0] !== 'number')) {\r\n\t\t\tthis._initWithHoles(latlngs);\r\n\t\t\treturn this.redraw();\r\n\t\t} else {\r\n\t\t\treturn L.Polyline.prototype.setLatLngs.call(this, latlngs);\r\n\t\t}\r\n\t},\r\n\r\n\t_clipPoints: function () {\r\n\t\tvar points = this._originalPoints,\r\n\t\t    newParts = [];\r\n\r\n\t\tthis._parts = [points].concat(this._holePoints);\r\n\r\n\t\tif (this.options.noClip) { return; }\r\n\r\n\t\tfor (var i = 0, len = this._parts.length; i < len; i++) {\r\n\t\t\tvar clipped = L.PolyUtil.clipPolygon(this._parts[i], this._map._pathViewport);\r\n\t\t\tif (clipped.length) {\r\n\t\t\t\tnewParts.push(clipped);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._parts = newParts;\r\n\t},\r\n\r\n\t_getPathPartStr: function (points) {\r\n\t\tvar str = L.Polyline.prototype._getPathPartStr.call(this, points);\r\n\t\treturn str + (L.Browser.svg ? 'z' : 'x');\r\n\t}\r\n});\r\n\r\nL.polygon = function (latlngs, options) {\r\n\treturn new L.Polygon(latlngs, options);\r\n};\r\n\n\n/*\r\n * Contains L.MultiPolyline and L.MultiPolygon layers.\r\n */\r\n\r\n(function () {\r\n\tfunction createMulti(Klass) {\r\n\r\n\t\treturn L.FeatureGroup.extend({\r\n\r\n\t\t\tinitialize: function (latlngs, options) {\r\n\t\t\t\tthis._layers = {};\r\n\t\t\t\tthis._options = options;\r\n\t\t\t\tthis.setLatLngs(latlngs);\r\n\t\t\t},\r\n\r\n\t\t\tsetLatLngs: function (latlngs) {\r\n\t\t\t\tvar i = 0,\r\n\t\t\t\t    len = latlngs.length;\r\n\r\n\t\t\t\tthis.eachLayer(function (layer) {\r\n\t\t\t\t\tif (i < len) {\r\n\t\t\t\t\t\tlayer.setLatLngs(latlngs[i++]);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.removeLayer(layer);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, this);\r\n\r\n\t\t\t\twhile (i < len) {\r\n\t\t\t\t\tthis.addLayer(new Klass(latlngs[i++], this._options));\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn this;\r\n\t\t\t},\r\n\r\n\t\t\tgetLatLngs: function () {\r\n\t\t\t\tvar latlngs = [];\r\n\r\n\t\t\t\tthis.eachLayer(function (layer) {\r\n\t\t\t\t\tlatlngs.push(layer.getLatLngs());\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn latlngs;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tL.MultiPolyline = createMulti(L.Polyline);\r\n\tL.MultiPolygon = createMulti(L.Polygon);\r\n\r\n\tL.multiPolyline = function (latlngs, options) {\r\n\t\treturn new L.MultiPolyline(latlngs, options);\r\n\t};\r\n\r\n\tL.multiPolygon = function (latlngs, options) {\r\n\t\treturn new L.MultiPolygon(latlngs, options);\r\n\t};\r\n}());\r\n\n\n/*\r\n * L.Rectangle extends Polygon and creates a rectangle when passed a LatLngBounds object.\r\n */\r\n\r\nL.Rectangle = L.Polygon.extend({\r\n\tinitialize: function (latLngBounds, options) {\r\n\t\tL.Polygon.prototype.initialize.call(this, this._boundsToLatLngs(latLngBounds), options);\r\n\t},\r\n\r\n\tsetBounds: function (latLngBounds) {\r\n\t\tthis.setLatLngs(this._boundsToLatLngs(latLngBounds));\r\n\t},\r\n\r\n\t_boundsToLatLngs: function (latLngBounds) {\r\n\t\tlatLngBounds = L.latLngBounds(latLngBounds);\r\n\t\treturn [\r\n\t\t\tlatLngBounds.getSouthWest(),\r\n\t\t\tlatLngBounds.getNorthWest(),\r\n\t\t\tlatLngBounds.getNorthEast(),\r\n\t\t\tlatLngBounds.getSouthEast()\r\n\t\t];\r\n\t}\r\n});\r\n\r\nL.rectangle = function (latLngBounds, options) {\r\n\treturn new L.Rectangle(latLngBounds, options);\r\n};\r\n\n\n/*\r\n * L.Circle is a circle overlay (with a certain radius in meters).\r\n */\r\n\r\nL.Circle = L.Path.extend({\r\n\tinitialize: function (latlng, radius, options) {\r\n\t\tL.Path.prototype.initialize.call(this, options);\r\n\r\n\t\tthis._latlng = L.latLng(latlng);\r\n\t\tthis._mRadius = radius;\r\n\t},\r\n\r\n\toptions: {\r\n\t\tfill: true\r\n\t},\r\n\r\n\tsetLatLng: function (latlng) {\r\n\t\tthis._latlng = L.latLng(latlng);\r\n\t\treturn this.redraw();\r\n\t},\r\n\r\n\tsetRadius: function (radius) {\r\n\t\tthis._mRadius = radius;\r\n\t\treturn this.redraw();\r\n\t},\r\n\r\n\tprojectLatlngs: function () {\r\n\t\tvar lngRadius = this._getLngRadius(),\r\n\t\t    latlng = this._latlng,\r\n\t\t    pointLeft = this._map.latLngToLayerPoint([latlng.lat, latlng.lng - lngRadius]);\r\n\r\n\t\tthis._point = this._map.latLngToLayerPoint(latlng);\r\n\t\tthis._radius = Math.max(this._point.x - pointLeft.x, 1);\r\n\t},\r\n\r\n\tgetBounds: function () {\r\n\t\tvar lngRadius = this._getLngRadius(),\r\n\t\t    latRadius = (this._mRadius / 40075017) * 360,\r\n\t\t    latlng = this._latlng;\r\n\r\n\t\treturn new L.LatLngBounds(\r\n\t\t        [latlng.lat - latRadius, latlng.lng - lngRadius],\r\n\t\t        [latlng.lat + latRadius, latlng.lng + lngRadius]);\r\n\t},\r\n\r\n\tgetLatLng: function () {\r\n\t\treturn this._latlng;\r\n\t},\r\n\r\n\tgetPathString: function () {\r\n\t\tvar p = this._point,\r\n\t\t    r = this._radius;\r\n\r\n\t\tif (this._checkIfEmpty()) {\r\n\t\t\treturn '';\r\n\t\t}\r\n\r\n\t\tif (L.Browser.svg) {\r\n\t\t\treturn 'M' + p.x + ',' + (p.y - r) +\r\n\t\t\t       'A' + r + ',' + r + ',0,1,1,' +\r\n\t\t\t       (p.x - 0.1) + ',' + (p.y - r) + ' z';\r\n\t\t} else {\r\n\t\t\tp._round();\r\n\t\t\tr = Math.round(r);\r\n\t\t\treturn 'AL ' + p.x + ',' + p.y + ' ' + r + ',' + r + ' 0,' + (65535 * 360);\r\n\t\t}\r\n\t},\r\n\r\n\tgetRadius: function () {\r\n\t\treturn this._mRadius;\r\n\t},\r\n\r\n\t// TODO Earth hardcoded, move into projection code!\r\n\r\n\t_getLatRadius: function () {\r\n\t\treturn (this._mRadius / 40075017) * 360;\r\n\t},\r\n\r\n\t_getLngRadius: function () {\r\n\t\treturn this._getLatRadius() / Math.cos(L.LatLng.DEG_TO_RAD * this._latlng.lat);\r\n\t},\r\n\r\n\t_checkIfEmpty: function () {\r\n\t\tif (!this._map) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tvar vp = this._map._pathViewport,\r\n\t\t    r = this._radius,\r\n\t\t    p = this._point;\r\n\r\n\t\treturn p.x - r > vp.max.x || p.y - r > vp.max.y ||\r\n\t\t       p.x + r < vp.min.x || p.y + r < vp.min.y;\r\n\t}\r\n});\r\n\r\nL.circle = function (latlng, radius, options) {\r\n\treturn new L.Circle(latlng, radius, options);\r\n};\r\n\n\n/*\r\n * L.CircleMarker is a circle overlay with a permanent pixel radius.\r\n */\r\n\r\nL.CircleMarker = L.Circle.extend({\r\n\toptions: {\r\n\t\tradius: 10,\r\n\t\tweight: 2\r\n\t},\r\n\r\n\tinitialize: function (latlng, options) {\r\n\t\tL.Circle.prototype.initialize.call(this, latlng, null, options);\r\n\t\tthis._radius = this.options.radius;\r\n\t},\r\n\r\n\tprojectLatlngs: function () {\r\n\t\tthis._point = this._map.latLngToLayerPoint(this._latlng);\r\n\t},\r\n\r\n\t_updateStyle : function () {\r\n\t\tL.Circle.prototype._updateStyle.call(this);\r\n\t\tthis.setRadius(this.options.radius);\r\n\t},\r\n\r\n\tsetLatLng: function (latlng) {\r\n\t\tL.Circle.prototype.setLatLng.call(this, latlng);\r\n\t\tif (this._popup && this._popup._isOpen) {\r\n\t\t\tthis._popup.setLatLng(latlng);\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\tsetRadius: function (radius) {\r\n\t\tthis.options.radius = this._radius = radius;\r\n\t\treturn this.redraw();\r\n\t},\r\n\r\n\tgetRadius: function () {\r\n\t\treturn this._radius;\r\n\t}\r\n});\r\n\r\nL.circleMarker = function (latlng, options) {\r\n\treturn new L.CircleMarker(latlng, options);\r\n};\r\n\n\n/*\r\n * Extends L.Polyline to be able to manually detect clicks on Canvas-rendered polylines.\r\n */\r\n\r\nL.Polyline.include(!L.Path.CANVAS ? {} : {\r\n\t_containsPoint: function (p, closed) {\r\n\t\tvar i, j, k, len, len2, dist, part,\r\n\t\t    w = this.options.weight / 2;\r\n\r\n\t\tif (L.Browser.touch) {\r\n\t\t\tw += 10; // polyline click tolerance on touch devices\r\n\t\t}\r\n\r\n\t\tfor (i = 0, len = this._parts.length; i < len; i++) {\r\n\t\t\tpart = this._parts[i];\r\n\t\t\tfor (j = 0, len2 = part.length, k = len2 - 1; j < len2; k = j++) {\r\n\t\t\t\tif (!closed && (j === 0)) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdist = L.LineUtil.pointToSegmentDistance(p, part[k], part[j]);\r\n\r\n\t\t\t\tif (dist <= w) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n});\r\n\n\n/*\r\n * Extends L.Polygon to be able to manually detect clicks on Canvas-rendered polygons.\r\n */\r\n\r\nL.Polygon.include(!L.Path.CANVAS ? {} : {\r\n\t_containsPoint: function (p) {\r\n\t\tvar inside = false,\r\n\t\t    part, p1, p2,\r\n\t\t    i, j, k,\r\n\t\t    len, len2;\r\n\r\n\t\t// TODO optimization: check if within bounds first\r\n\r\n\t\tif (L.Polyline.prototype._containsPoint.call(this, p, true)) {\r\n\t\t\t// click on polygon border\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\t// ray casting algorithm for detecting if point is in polygon\r\n\r\n\t\tfor (i = 0, len = this._parts.length; i < len; i++) {\r\n\t\t\tpart = this._parts[i];\r\n\r\n\t\t\tfor (j = 0, len2 = part.length, k = len2 - 1; j < len2; k = j++) {\r\n\t\t\t\tp1 = part[j];\r\n\t\t\t\tp2 = part[k];\r\n\r\n\t\t\t\tif (((p1.y > p.y) !== (p2.y > p.y)) &&\r\n\t\t\t\t\t\t(p.x < (p2.x - p1.x) * (p.y - p1.y) / (p2.y - p1.y) + p1.x)) {\r\n\t\t\t\t\tinside = !inside;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn inside;\r\n\t}\r\n});\r\n\n\n/*\r\n * Extends L.Circle with Canvas-specific code.\r\n */\r\n\r\nL.Circle.include(!L.Path.CANVAS ? {} : {\r\n\t_drawPath: function () {\r\n\t\tvar p = this._point;\r\n\t\tthis._ctx.beginPath();\r\n\t\tthis._ctx.arc(p.x, p.y, this._radius, 0, Math.PI * 2, false);\r\n\t},\r\n\r\n\t_containsPoint: function (p) {\r\n\t\tvar center = this._point,\r\n\t\t    w2 = this.options.stroke ? this.options.weight / 2 : 0;\r\n\r\n\t\treturn (p.distanceTo(center) <= this._radius + w2);\r\n\t}\r\n});\r\n\n\n/*\n * CircleMarker canvas specific drawing parts.\n */\n\nL.CircleMarker.include(!L.Path.CANVAS ? {} : {\n\t_updateStyle: function () {\n\t\tL.Path.prototype._updateStyle.call(this);\n\t}\n});\n\n\n/*\r\n * L.GeoJSON turns any GeoJSON data into a Leaflet layer.\r\n */\r\n\r\nL.GeoJSON = L.FeatureGroup.extend({\r\n\r\n\tinitialize: function (geojson, options) {\r\n\t\tL.setOptions(this, options);\r\n\r\n\t\tthis._layers = {};\r\n\r\n\t\tif (geojson) {\r\n\t\t\tthis.addData(geojson);\r\n\t\t}\r\n\t},\r\n\r\n\taddData: function (geojson) {\r\n\t\tvar features = L.Util.isArray(geojson) ? geojson : geojson.features,\r\n\t\t    i, len, feature;\r\n\r\n\t\tif (features) {\r\n\t\t\tfor (i = 0, len = features.length; i < len; i++) {\r\n\t\t\t\t// Only add this if geometry or geometries are set and not null\r\n\t\t\t\tfeature = features[i];\r\n\t\t\t\tif (feature.geometries || feature.geometry || feature.features || feature.coordinates) {\r\n\t\t\t\t\tthis.addData(features[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tvar options = this.options;\r\n\r\n\t\tif (options.filter && !options.filter(geojson)) { return; }\r\n\r\n\t\tvar layer = L.GeoJSON.geometryToLayer(geojson, options.pointToLayer, options.coordsToLatLng, options);\r\n\t\tlayer.feature = L.GeoJSON.asFeature(geojson);\r\n\r\n\t\tlayer.defaultOptions = layer.options;\r\n\t\tthis.resetStyle(layer);\r\n\r\n\t\tif (options.onEachFeature) {\r\n\t\t\toptions.onEachFeature(geojson, layer);\r\n\t\t}\r\n\r\n\t\treturn this.addLayer(layer);\r\n\t},\r\n\r\n\tresetStyle: function (layer) {\r\n\t\tvar style = this.options.style;\r\n\t\tif (style) {\r\n\t\t\t// reset any custom styles\r\n\t\t\tL.Util.extend(layer.options, layer.defaultOptions);\r\n\r\n\t\t\tthis._setLayerStyle(layer, style);\r\n\t\t}\r\n\t},\r\n\r\n\tsetStyle: function (style) {\r\n\t\tthis.eachLayer(function (layer) {\r\n\t\t\tthis._setLayerStyle(layer, style);\r\n\t\t}, this);\r\n\t},\r\n\r\n\t_setLayerStyle: function (layer, style) {\r\n\t\tif (typeof style === 'function') {\r\n\t\t\tstyle = style(layer.feature);\r\n\t\t}\r\n\t\tif (layer.setStyle) {\r\n\t\t\tlayer.setStyle(style);\r\n\t\t}\r\n\t}\r\n});\r\n\r\nL.extend(L.GeoJSON, {\r\n\tgeometryToLayer: function (geojson, pointToLayer, coordsToLatLng, vectorOptions) {\r\n\t\tvar geometry = geojson.type === 'Feature' ? geojson.geometry : geojson,\r\n\t\t    coords = geometry.coordinates,\r\n\t\t    layers = [],\r\n\t\t    latlng, latlngs, i, len;\r\n\r\n\t\tcoordsToLatLng = coordsToLatLng || this.coordsToLatLng;\r\n\r\n\t\tswitch (geometry.type) {\r\n\t\tcase 'Point':\r\n\t\t\tlatlng = coordsToLatLng(coords);\r\n\t\t\treturn pointToLayer ? pointToLayer(geojson, latlng) : new L.Marker(latlng);\r\n\r\n\t\tcase 'MultiPoint':\r\n\t\t\tfor (i = 0, len = coords.length; i < len; i++) {\r\n\t\t\t\tlatlng = coordsToLatLng(coords[i]);\r\n\t\t\t\tlayers.push(pointToLayer ? pointToLayer(geojson, latlng) : new L.Marker(latlng));\r\n\t\t\t}\r\n\t\t\treturn new L.FeatureGroup(layers);\r\n\r\n\t\tcase 'LineString':\r\n\t\t\tlatlngs = this.coordsToLatLngs(coords, 0, coordsToLatLng);\r\n\t\t\treturn new L.Polyline(latlngs, vectorOptions);\r\n\r\n\t\tcase 'Polygon':\r\n\t\t\tif (coords.length === 2 && !coords[1].length) {\r\n\t\t\t\tthrow new Error('Invalid GeoJSON object.');\r\n\t\t\t}\r\n\t\t\tlatlngs = this.coordsToLatLngs(coords, 1, coordsToLatLng);\r\n\t\t\treturn new L.Polygon(latlngs, vectorOptions);\r\n\r\n\t\tcase 'MultiLineString':\r\n\t\t\tlatlngs = this.coordsToLatLngs(coords, 1, coordsToLatLng);\r\n\t\t\treturn new L.MultiPolyline(latlngs, vectorOptions);\r\n\r\n\t\tcase 'MultiPolygon':\r\n\t\t\tlatlngs = this.coordsToLatLngs(coords, 2, coordsToLatLng);\r\n\t\t\treturn new L.MultiPolygon(latlngs, vectorOptions);\r\n\r\n\t\tcase 'GeometryCollection':\r\n\t\t\tfor (i = 0, len = geometry.geometries.length; i < len; i++) {\r\n\r\n\t\t\t\tlayers.push(this.geometryToLayer({\r\n\t\t\t\t\tgeometry: geometry.geometries[i],\r\n\t\t\t\t\ttype: 'Feature',\r\n\t\t\t\t\tproperties: geojson.properties\r\n\t\t\t\t}, pointToLayer, coordsToLatLng, vectorOptions));\r\n\t\t\t}\r\n\t\t\treturn new L.FeatureGroup(layers);\r\n\r\n\t\tdefault:\r\n\t\t\tthrow new Error('Invalid GeoJSON object.');\r\n\t\t}\r\n\t},\r\n\r\n\tcoordsToLatLng: function (coords) { // (Array[, Boolean]) -> LatLng\r\n\t\treturn new L.LatLng(coords[1], coords[0], coords[2]);\r\n\t},\r\n\r\n\tcoordsToLatLngs: function (coords, levelsDeep, coordsToLatLng) { // (Array[, Number, Function]) -> Array\r\n\t\tvar latlng, i, len,\r\n\t\t    latlngs = [];\r\n\r\n\t\tfor (i = 0, len = coords.length; i < len; i++) {\r\n\t\t\tlatlng = levelsDeep ?\r\n\t\t\t        this.coordsToLatLngs(coords[i], levelsDeep - 1, coordsToLatLng) :\r\n\t\t\t        (coordsToLatLng || this.coordsToLatLng)(coords[i]);\r\n\r\n\t\t\tlatlngs.push(latlng);\r\n\t\t}\r\n\r\n\t\treturn latlngs;\r\n\t},\r\n\r\n\tlatLngToCoords: function (latlng) {\r\n\t\tvar coords = [latlng.lng, latlng.lat];\r\n\r\n\t\tif (latlng.alt !== undefined) {\r\n\t\t\tcoords.push(latlng.alt);\r\n\t\t}\r\n\t\treturn coords;\r\n\t},\r\n\r\n\tlatLngsToCoords: function (latLngs) {\r\n\t\tvar coords = [];\r\n\r\n\t\tfor (var i = 0, len = latLngs.length; i < len; i++) {\r\n\t\t\tcoords.push(L.GeoJSON.latLngToCoords(latLngs[i]));\r\n\t\t}\r\n\r\n\t\treturn coords;\r\n\t},\r\n\r\n\tgetFeature: function (layer, newGeometry) {\r\n\t\treturn layer.feature ? L.extend({}, layer.feature, {geometry: newGeometry}) : L.GeoJSON.asFeature(newGeometry);\r\n\t},\r\n\r\n\tasFeature: function (geoJSON) {\r\n\t\tif (geoJSON.type === 'Feature') {\r\n\t\t\treturn geoJSON;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\ttype: 'Feature',\r\n\t\t\tproperties: {},\r\n\t\t\tgeometry: geoJSON\r\n\t\t};\r\n\t}\r\n});\r\n\r\nvar PointToGeoJSON = {\r\n\ttoGeoJSON: function () {\r\n\t\treturn L.GeoJSON.getFeature(this, {\r\n\t\t\ttype: 'Point',\r\n\t\t\tcoordinates: L.GeoJSON.latLngToCoords(this.getLatLng())\r\n\t\t});\r\n\t}\r\n};\r\n\r\nL.Marker.include(PointToGeoJSON);\r\nL.Circle.include(PointToGeoJSON);\r\nL.CircleMarker.include(PointToGeoJSON);\r\n\r\nL.Polyline.include({\r\n\ttoGeoJSON: function () {\r\n\t\treturn L.GeoJSON.getFeature(this, {\r\n\t\t\ttype: 'LineString',\r\n\t\t\tcoordinates: L.GeoJSON.latLngsToCoords(this.getLatLngs())\r\n\t\t});\r\n\t}\r\n});\r\n\r\nL.Polygon.include({\r\n\ttoGeoJSON: function () {\r\n\t\tvar coords = [L.GeoJSON.latLngsToCoords(this.getLatLngs())],\r\n\t\t    i, len, hole;\r\n\r\n\t\tcoords[0].push(coords[0][0]);\r\n\r\n\t\tif (this._holes) {\r\n\t\t\tfor (i = 0, len = this._holes.length; i < len; i++) {\r\n\t\t\t\thole = L.GeoJSON.latLngsToCoords(this._holes[i]);\r\n\t\t\t\thole.push(hole[0]);\r\n\t\t\t\tcoords.push(hole);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn L.GeoJSON.getFeature(this, {\r\n\t\t\ttype: 'Polygon',\r\n\t\t\tcoordinates: coords\r\n\t\t});\r\n\t}\r\n});\r\n\r\n(function () {\r\n\tfunction multiToGeoJSON(type) {\r\n\t\treturn function () {\r\n\t\t\tvar coords = [];\r\n\r\n\t\t\tthis.eachLayer(function (layer) {\r\n\t\t\t\tcoords.push(layer.toGeoJSON().geometry.coordinates);\r\n\t\t\t});\r\n\r\n\t\t\treturn L.GeoJSON.getFeature(this, {\r\n\t\t\t\ttype: type,\r\n\t\t\t\tcoordinates: coords\r\n\t\t\t});\r\n\t\t};\r\n\t}\r\n\r\n\tL.MultiPolyline.include({toGeoJSON: multiToGeoJSON('MultiLineString')});\r\n\tL.MultiPolygon.include({toGeoJSON: multiToGeoJSON('MultiPolygon')});\r\n\r\n\tL.LayerGroup.include({\r\n\t\ttoGeoJSON: function () {\r\n\r\n\t\t\tvar geometry = this.feature && this.feature.geometry,\r\n\t\t\t\tjsons = [],\r\n\t\t\t\tjson;\r\n\r\n\t\t\tif (geometry && geometry.type === 'MultiPoint') {\r\n\t\t\t\treturn multiToGeoJSON('MultiPoint').call(this);\r\n\t\t\t}\r\n\r\n\t\t\tvar isGeometryCollection = geometry && geometry.type === 'GeometryCollection';\r\n\r\n\t\t\tthis.eachLayer(function (layer) {\r\n\t\t\t\tif (layer.toGeoJSON) {\r\n\t\t\t\t\tjson = layer.toGeoJSON();\r\n\t\t\t\t\tjsons.push(isGeometryCollection ? json.geometry : L.GeoJSON.asFeature(json));\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif (isGeometryCollection) {\r\n\t\t\t\treturn L.GeoJSON.getFeature(this, {\r\n\t\t\t\t\tgeometries: jsons,\r\n\t\t\t\t\ttype: 'GeometryCollection'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\ttype: 'FeatureCollection',\r\n\t\t\t\tfeatures: jsons\r\n\t\t\t};\r\n\t\t}\r\n\t});\r\n}());\r\n\r\nL.geoJson = function (geojson, options) {\r\n\treturn new L.GeoJSON(geojson, options);\r\n};\r\n\n\n/*\r\n * L.DomEvent contains functions for working with DOM events.\r\n */\r\n\r\nL.DomEvent = {\r\n\t/* inspired by John Resig, Dean Edwards and YUI addEvent implementations */\r\n\taddListener: function (obj, type, fn, context) { // (HTMLElement, String, Function[, Object])\r\n\r\n\t\tvar id = L.stamp(fn),\r\n\t\t    key = '_leaflet_' + type + id,\r\n\t\t    handler, originalHandler, newType;\r\n\r\n\t\tif (obj[key]) { return this; }\r\n\r\n\t\thandler = function (e) {\r\n\t\t\treturn fn.call(context || obj, e || L.DomEvent._getEvent());\r\n\t\t};\r\n\r\n\t\tif (L.Browser.pointer && type.indexOf('touch') === 0) {\r\n\t\t\treturn this.addPointerListener(obj, type, handler, id);\r\n\t\t}\r\n\t\tif (L.Browser.touch && (type === 'dblclick') && this.addDoubleTapListener) {\r\n\t\t\tthis.addDoubleTapListener(obj, handler, id);\r\n\t\t}\r\n\r\n\t\tif ('addEventListener' in obj) {\r\n\r\n\t\t\tif (type === 'mousewheel') {\r\n\t\t\t\tobj.addEventListener('DOMMouseScroll', handler, false);\r\n\t\t\t\tobj.addEventListener(type, handler, false);\r\n\r\n\t\t\t} else if ((type === 'mouseenter') || (type === 'mouseleave')) {\r\n\r\n\t\t\t\toriginalHandler = handler;\r\n\t\t\t\tnewType = (type === 'mouseenter' ? 'mouseover' : 'mouseout');\r\n\r\n\t\t\t\thandler = function (e) {\r\n\t\t\t\t\tif (!L.DomEvent._checkMouse(obj, e)) { return; }\r\n\t\t\t\t\treturn originalHandler(e);\r\n\t\t\t\t};\r\n\r\n\t\t\t\tobj.addEventListener(newType, handler, false);\r\n\r\n\t\t\t} else if (type === 'click' && L.Browser.android) {\r\n\t\t\t\toriginalHandler = handler;\r\n\t\t\t\thandler = function (e) {\r\n\t\t\t\t\treturn L.DomEvent._filterClick(e, originalHandler);\r\n\t\t\t\t};\r\n\r\n\t\t\t\tobj.addEventListener(type, handler, false);\r\n\t\t\t} else {\r\n\t\t\t\tobj.addEventListener(type, handler, false);\r\n\t\t\t}\r\n\r\n\t\t} else if ('attachEvent' in obj) {\r\n\t\t\tobj.attachEvent('on' + type, handler);\r\n\t\t}\r\n\r\n\t\tobj[key] = handler;\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tremoveListener: function (obj, type, fn) {  // (HTMLElement, String, Function)\r\n\r\n\t\tvar id = L.stamp(fn),\r\n\t\t    key = '_leaflet_' + type + id,\r\n\t\t    handler = obj[key];\r\n\r\n\t\tif (!handler) { return this; }\r\n\r\n\t\tif (L.Browser.pointer && type.indexOf('touch') === 0) {\r\n\t\t\tthis.removePointerListener(obj, type, id);\r\n\t\t} else if (L.Browser.touch && (type === 'dblclick') && this.removeDoubleTapListener) {\r\n\t\t\tthis.removeDoubleTapListener(obj, id);\r\n\r\n\t\t} else if ('removeEventListener' in obj) {\r\n\r\n\t\t\tif (type === 'mousewheel') {\r\n\t\t\t\tobj.removeEventListener('DOMMouseScroll', handler, false);\r\n\t\t\t\tobj.removeEventListener(type, handler, false);\r\n\r\n\t\t\t} else if ((type === 'mouseenter') || (type === 'mouseleave')) {\r\n\t\t\t\tobj.removeEventListener((type === 'mouseenter' ? 'mouseover' : 'mouseout'), handler, false);\r\n\t\t\t} else {\r\n\t\t\t\tobj.removeEventListener(type, handler, false);\r\n\t\t\t}\r\n\t\t} else if ('detachEvent' in obj) {\r\n\t\t\tobj.detachEvent('on' + type, handler);\r\n\t\t}\r\n\r\n\t\tobj[key] = null;\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tstopPropagation: function (e) {\r\n\r\n\t\tif (e.stopPropagation) {\r\n\t\t\te.stopPropagation();\r\n\t\t} else {\r\n\t\t\te.cancelBubble = true;\r\n\t\t}\r\n\t\tL.DomEvent._skipped(e);\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tdisableScrollPropagation: function (el) {\r\n\t\tvar stop = L.DomEvent.stopPropagation;\r\n\r\n\t\treturn L.DomEvent\r\n\t\t\t.on(el, 'mousewheel', stop)\r\n\t\t\t.on(el, 'MozMousePixelScroll', stop);\r\n\t},\r\n\r\n\tdisableClickPropagation: function (el) {\r\n\t\tvar stop = L.DomEvent.stopPropagation;\r\n\r\n\t\tfor (var i = L.Draggable.START.length - 1; i >= 0; i--) {\r\n\t\t\tL.DomEvent.on(el, L.Draggable.START[i], stop);\r\n\t\t}\r\n\r\n\t\treturn L.DomEvent\r\n\t\t\t.on(el, 'click', L.DomEvent._fakeStop)\r\n\t\t\t.on(el, 'dblclick', stop);\r\n\t},\r\n\r\n\tpreventDefault: function (e) {\r\n\r\n\t\tif (e.preventDefault) {\r\n\t\t\te.preventDefault();\r\n\t\t} else {\r\n\t\t\te.returnValue = false;\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\tstop: function (e) {\r\n\t\treturn L.DomEvent\r\n\t\t\t.preventDefault(e)\r\n\t\t\t.stopPropagation(e);\r\n\t},\r\n\r\n\tgetMousePosition: function (e, container) {\r\n\t\tif (!container) {\r\n\t\t\treturn new L.Point(e.clientX, e.clientY);\r\n\t\t}\r\n\r\n\t\tvar rect = container.getBoundingClientRect();\r\n\r\n\t\treturn new L.Point(\r\n\t\t\te.clientX - rect.left - container.clientLeft,\r\n\t\t\te.clientY - rect.top - container.clientTop);\r\n\t},\r\n\r\n\tgetWheelDelta: function (e) {\r\n\r\n\t\tvar delta = 0;\r\n\r\n\t\tif (e.wheelDelta) {\r\n\t\t\tdelta = e.wheelDelta / 120;\r\n\t\t}\r\n\t\tif (e.detail) {\r\n\t\t\tdelta = -e.detail / 3;\r\n\t\t}\r\n\t\treturn delta;\r\n\t},\r\n\r\n\t_skipEvents: {},\r\n\r\n\t_fakeStop: function (e) {\r\n\t\t// fakes stopPropagation by setting a special event flag, checked/reset with L.DomEvent._skipped(e)\r\n\t\tL.DomEvent._skipEvents[e.type] = true;\r\n\t},\r\n\r\n\t_skipped: function (e) {\r\n\t\tvar skipped = this._skipEvents[e.type];\r\n\t\t// reset when checking, as it's only used in map container and propagates outside of the map\r\n\t\tthis._skipEvents[e.type] = false;\r\n\t\treturn skipped;\r\n\t},\r\n\r\n\t// check if element really left/entered the event target (for mouseenter/mouseleave)\r\n\t_checkMouse: function (el, e) {\r\n\r\n\t\tvar related = e.relatedTarget;\r\n\r\n\t\tif (!related) { return true; }\r\n\r\n\t\ttry {\r\n\t\t\twhile (related && (related !== el)) {\r\n\t\t\t\trelated = related.parentNode;\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn (related !== el);\r\n\t},\r\n\r\n\t_getEvent: function () { // evil magic for IE\r\n\t\t/*jshint noarg:false */\r\n\t\tvar e = window.event;\r\n\t\tif (!e) {\r\n\t\t\tvar caller = arguments.callee.caller;\r\n\t\t\twhile (caller) {\r\n\t\t\t\te = caller['arguments'][0];\r\n\t\t\t\tif (e && window.Event === e.constructor) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcaller = caller.caller;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn e;\r\n\t},\r\n\r\n\t// this is a horrible workaround for a bug in Android where a single touch triggers two click events\r\n\t_filterClick: function (e, handler) {\r\n\t\tvar timeStamp = (e.timeStamp || e.originalEvent.timeStamp),\r\n\t\t\telapsed = L.DomEvent._lastClick && (timeStamp - L.DomEvent._lastClick);\r\n\r\n\t\t// are they closer together than 500ms yet more than 100ms?\r\n\t\t// Android typically triggers them ~300ms apart while multiple listeners\r\n\t\t// on the same event should be triggered far faster;\r\n\t\t// or check if click is simulated on the element, and if it is, reject any non-simulated events\r\n\r\n\t\tif ((elapsed && elapsed > 100 && elapsed < 500) || (e.target._simulatedClick && !e._simulated)) {\r\n\t\t\tL.DomEvent.stop(e);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tL.DomEvent._lastClick = timeStamp;\r\n\r\n\t\treturn handler(e);\r\n\t}\r\n};\r\n\r\nL.DomEvent.on = L.DomEvent.addListener;\r\nL.DomEvent.off = L.DomEvent.removeListener;\r\n\n\n/*\r\n * L.Draggable allows you to add dragging capabilities to any element. Supports mobile devices too.\r\n */\r\n\r\nL.Draggable = L.Class.extend({\r\n\tincludes: L.Mixin.Events,\r\n\r\n\tstatics: {\r\n\t\tSTART: L.Browser.touch ? ['touchstart', 'mousedown'] : ['mousedown'],\r\n\t\tEND: {\r\n\t\t\tmousedown: 'mouseup',\r\n\t\t\ttouchstart: 'touchend',\r\n\t\t\tpointerdown: 'touchend',\r\n\t\t\tMSPointerDown: 'touchend'\r\n\t\t},\r\n\t\tMOVE: {\r\n\t\t\tmousedown: 'mousemove',\r\n\t\t\ttouchstart: 'touchmove',\r\n\t\t\tpointerdown: 'touchmove',\r\n\t\t\tMSPointerDown: 'touchmove'\r\n\t\t}\r\n\t},\r\n\r\n\tinitialize: function (element, dragStartTarget) {\r\n\t\tthis._element = element;\r\n\t\tthis._dragStartTarget = dragStartTarget || element;\r\n\t},\r\n\r\n\tenable: function () {\r\n\t\tif (this._enabled) { return; }\r\n\r\n\t\tfor (var i = L.Draggable.START.length - 1; i >= 0; i--) {\r\n\t\t\tL.DomEvent.on(this._dragStartTarget, L.Draggable.START[i], this._onDown, this);\r\n\t\t}\r\n\r\n\t\tthis._enabled = true;\r\n\t},\r\n\r\n\tdisable: function () {\r\n\t\tif (!this._enabled) { return; }\r\n\r\n\t\tfor (var i = L.Draggable.START.length - 1; i >= 0; i--) {\r\n\t\t\tL.DomEvent.off(this._dragStartTarget, L.Draggable.START[i], this._onDown, this);\r\n\t\t}\r\n\r\n\t\tthis._enabled = false;\r\n\t\tthis._moved = false;\r\n\t},\r\n\r\n\t_onDown: function (e) {\r\n\t\tthis._moved = false;\r\n\r\n\t\tif (e.shiftKey || ((e.which !== 1) && (e.button !== 1) && !e.touches)) { return; }\r\n\r\n\t\tL.DomEvent.stopPropagation(e);\r\n\r\n\t\tif (L.Draggable._disabled) { return; }\r\n\r\n\t\tL.DomUtil.disableImageDrag();\r\n\t\tL.DomUtil.disableTextSelection();\r\n\r\n\t\tif (this._moving) { return; }\r\n\r\n\t\tvar first = e.touches ? e.touches[0] : e;\r\n\r\n\t\tthis._startPoint = new L.Point(first.clientX, first.clientY);\r\n\t\tthis._startPos = this._newPos = L.DomUtil.getPosition(this._element);\r\n\r\n\t\tL.DomEvent\r\n\t\t    .on(document, L.Draggable.MOVE[e.type], this._onMove, this)\r\n\t\t    .on(document, L.Draggable.END[e.type], this._onUp, this);\r\n\t},\r\n\r\n\t_onMove: function (e) {\r\n\t\tif (e.touches && e.touches.length > 1) {\r\n\t\t\tthis._moved = true;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar first = (e.touches && e.touches.length === 1 ? e.touches[0] : e),\r\n\t\t    newPoint = new L.Point(first.clientX, first.clientY),\r\n\t\t    offset = newPoint.subtract(this._startPoint);\r\n\r\n\t\tif (!offset.x && !offset.y) { return; }\r\n\t\tif (L.Browser.touch && Math.abs(offset.x) + Math.abs(offset.y) < 3) { return; }\r\n\r\n\t\tL.DomEvent.preventDefault(e);\r\n\r\n\t\tif (!this._moved) {\r\n\t\t\tthis.fire('dragstart');\r\n\r\n\t\t\tthis._moved = true;\r\n\t\t\tthis._startPos = L.DomUtil.getPosition(this._element).subtract(offset);\r\n\r\n\t\t\tL.DomUtil.addClass(document.body, 'leaflet-dragging');\r\n\t\t\tthis._lastTarget = e.target || e.srcElement;\r\n\t\t\tL.DomUtil.addClass(this._lastTarget, 'leaflet-drag-target');\r\n\t\t}\r\n\r\n\t\tthis._newPos = this._startPos.add(offset);\r\n\t\tthis._moving = true;\r\n\r\n\t\tL.Util.cancelAnimFrame(this._animRequest);\r\n\t\tthis._animRequest = L.Util.requestAnimFrame(this._updatePosition, this, true, this._dragStartTarget);\r\n\t},\r\n\r\n\t_updatePosition: function () {\r\n\t\tthis.fire('predrag');\r\n\t\tL.DomUtil.setPosition(this._element, this._newPos);\r\n\t\tthis.fire('drag');\r\n\t},\r\n\r\n\t_onUp: function () {\r\n\t\tL.DomUtil.removeClass(document.body, 'leaflet-dragging');\r\n\r\n\t\tif (this._lastTarget) {\r\n\t\t\tL.DomUtil.removeClass(this._lastTarget, 'leaflet-drag-target');\r\n\t\t\tthis._lastTarget = null;\r\n\t\t}\r\n\r\n\t\tfor (var i in L.Draggable.MOVE) {\r\n\t\t\tL.DomEvent\r\n\t\t\t    .off(document, L.Draggable.MOVE[i], this._onMove)\r\n\t\t\t    .off(document, L.Draggable.END[i], this._onUp);\r\n\t\t}\r\n\r\n\t\tL.DomUtil.enableImageDrag();\r\n\t\tL.DomUtil.enableTextSelection();\r\n\r\n\t\tif (this._moved && this._moving) {\r\n\t\t\t// ensure drag is not fired after dragend\r\n\t\t\tL.Util.cancelAnimFrame(this._animRequest);\r\n\r\n\t\t\tthis.fire('dragend', {\r\n\t\t\t\tdistance: this._newPos.distanceTo(this._startPos)\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis._moving = false;\r\n\t}\r\n});\r\n\n\n/*\n\tL.Handler is a base class for handler classes that are used internally to inject\n\tinteraction features like dragging to classes like Map and Marker.\n*/\n\nL.Handler = L.Class.extend({\n\tinitialize: function (map) {\n\t\tthis._map = map;\n\t},\n\n\tenable: function () {\n\t\tif (this._enabled) { return; }\n\n\t\tthis._enabled = true;\n\t\tthis.addHooks();\n\t},\n\n\tdisable: function () {\n\t\tif (!this._enabled) { return; }\n\n\t\tthis._enabled = false;\n\t\tthis.removeHooks();\n\t},\n\n\tenabled: function () {\n\t\treturn !!this._enabled;\n\t}\n});\n\n\n/*\n * L.Handler.MapDrag is used to make the map draggable (with panning inertia), enabled by default.\n */\n\nL.Map.mergeOptions({\n\tdragging: true,\n\n\tinertia: !L.Browser.android23,\n\tinertiaDeceleration: 3400, // px/s^2\n\tinertiaMaxSpeed: Infinity, // px/s\n\tinertiaThreshold: L.Browser.touch ? 32 : 18, // ms\n\teaseLinearity: 0.25,\n\n\t// TODO refactor, move to CRS\n\tworldCopyJump: false\n});\n\nL.Map.Drag = L.Handler.extend({\n\taddHooks: function () {\n\t\tif (!this._draggable) {\n\t\t\tvar map = this._map;\n\n\t\t\tthis._draggable = new L.Draggable(map._mapPane, map._container);\n\n\t\t\tthis._draggable.on({\n\t\t\t\t'dragstart': this._onDragStart,\n\t\t\t\t'drag': this._onDrag,\n\t\t\t\t'dragend': this._onDragEnd\n\t\t\t}, this);\n\n\t\t\tif (map.options.worldCopyJump) {\n\t\t\t\tthis._draggable.on('predrag', this._onPreDrag, this);\n\t\t\t\tmap.on('viewreset', this._onViewReset, this);\n\n\t\t\t\tmap.whenReady(this._onViewReset, this);\n\t\t\t}\n\t\t}\n\t\tthis._draggable.enable();\n\t},\n\n\tremoveHooks: function () {\n\t\tthis._draggable.disable();\n\t},\n\n\tmoved: function () {\n\t\treturn this._draggable && this._draggable._moved;\n\t},\n\n\t_onDragStart: function () {\n\t\tvar map = this._map;\n\n\t\tif (map._panAnim) {\n\t\t\tmap._panAnim.stop();\n\t\t}\n\n\t\tmap\n\t\t    .fire('movestart')\n\t\t    .fire('dragstart');\n\n\t\tif (map.options.inertia) {\n\t\t\tthis._positions = [];\n\t\t\tthis._times = [];\n\t\t}\n\t},\n\n\t_onDrag: function () {\n\t\tif (this._map.options.inertia) {\n\t\t\tvar time = this._lastTime = +new Date(),\n\t\t\t    pos = this._lastPos = this._draggable._newPos;\n\n\t\t\tthis._positions.push(pos);\n\t\t\tthis._times.push(time);\n\n\t\t\tif (time - this._times[0] > 200) {\n\t\t\t\tthis._positions.shift();\n\t\t\t\tthis._times.shift();\n\t\t\t}\n\t\t}\n\n\t\tthis._map\n\t\t    .fire('move')\n\t\t    .fire('drag');\n\t},\n\n\t_onViewReset: function () {\n\t\t// TODO fix hardcoded Earth values\n\t\tvar pxCenter = this._map.getSize()._divideBy(2),\n\t\t    pxWorldCenter = this._map.latLngToLayerPoint([0, 0]);\n\n\t\tthis._initialWorldOffset = pxWorldCenter.subtract(pxCenter).x;\n\t\tthis._worldWidth = this._map.project([0, 180]).x;\n\t},\n\n\t_onPreDrag: function () {\n\t\t// TODO refactor to be able to adjust map pane position after zoom\n\t\tvar worldWidth = this._worldWidth,\n\t\t    halfWidth = Math.round(worldWidth / 2),\n\t\t    dx = this._initialWorldOffset,\n\t\t    x = this._draggable._newPos.x,\n\t\t    newX1 = (x - halfWidth + dx) % worldWidth + halfWidth - dx,\n\t\t    newX2 = (x + halfWidth + dx) % worldWidth - halfWidth - dx,\n\t\t    newX = Math.abs(newX1 + dx) < Math.abs(newX2 + dx) ? newX1 : newX2;\n\n\t\tthis._draggable._newPos.x = newX;\n\t},\n\n\t_onDragEnd: function (e) {\n\t\tvar map = this._map,\n\t\t    options = map.options,\n\t\t    delay = +new Date() - this._lastTime,\n\n\t\t    noInertia = !options.inertia || delay > options.inertiaThreshold || !this._positions[0];\n\n\t\tmap.fire('dragend', e);\n\n\t\tif (noInertia) {\n\t\t\tmap.fire('moveend');\n\n\t\t} else {\n\n\t\t\tvar direction = this._lastPos.subtract(this._positions[0]),\n\t\t\t    duration = (this._lastTime + delay - this._times[0]) / 1000,\n\t\t\t    ease = options.easeLinearity,\n\n\t\t\t    speedVector = direction.multiplyBy(ease / duration),\n\t\t\t    speed = speedVector.distanceTo([0, 0]),\n\n\t\t\t    limitedSpeed = Math.min(options.inertiaMaxSpeed, speed),\n\t\t\t    limitedSpeedVector = speedVector.multiplyBy(limitedSpeed / speed),\n\n\t\t\t    decelerationDuration = limitedSpeed / (options.inertiaDeceleration * ease),\n\t\t\t    offset = limitedSpeedVector.multiplyBy(-decelerationDuration / 2).round();\n\n\t\t\tif (!offset.x || !offset.y) {\n\t\t\t\tmap.fire('moveend');\n\n\t\t\t} else {\n\t\t\t\toffset = map._limitOffset(offset, map.options.maxBounds);\n\n\t\t\t\tL.Util.requestAnimFrame(function () {\n\t\t\t\t\tmap.panBy(offset, {\n\t\t\t\t\t\tduration: decelerationDuration,\n\t\t\t\t\t\teaseLinearity: ease,\n\t\t\t\t\t\tnoMoveStart: true\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n});\n\nL.Map.addInitHook('addHandler', 'dragging', L.Map.Drag);\n\n\n/*\n * L.Handler.DoubleClickZoom is used to handle double-click zoom on the map, enabled by default.\n */\n\nL.Map.mergeOptions({\n\tdoubleClickZoom: true\n});\n\nL.Map.DoubleClickZoom = L.Handler.extend({\n\taddHooks: function () {\n\t\tthis._map.on('dblclick', this._onDoubleClick, this);\n\t},\n\n\tremoveHooks: function () {\n\t\tthis._map.off('dblclick', this._onDoubleClick, this);\n\t},\n\n\t_onDoubleClick: function (e) {\n\t\tvar map = this._map,\n\t\t    zoom = map.getZoom() + (e.originalEvent.shiftKey ? -1 : 1);\n\n\t\tif (map.options.doubleClickZoom === 'center') {\n\t\t\tmap.setZoom(zoom);\n\t\t} else {\n\t\t\tmap.setZoomAround(e.containerPoint, zoom);\n\t\t}\n\t}\n});\n\nL.Map.addInitHook('addHandler', 'doubleClickZoom', L.Map.DoubleClickZoom);\n\n\n/*\n * L.Handler.ScrollWheelZoom is used by L.Map to enable mouse scroll wheel zoom on the map.\n */\n\nL.Map.mergeOptions({\n\tscrollWheelZoom: true\n});\n\nL.Map.ScrollWheelZoom = L.Handler.extend({\n\taddHooks: function () {\n\t\tL.DomEvent.on(this._map._container, 'mousewheel', this._onWheelScroll, this);\n\t\tL.DomEvent.on(this._map._container, 'MozMousePixelScroll', L.DomEvent.preventDefault);\n\t\tthis._delta = 0;\n\t},\n\n\tremoveHooks: function () {\n\t\tL.DomEvent.off(this._map._container, 'mousewheel', this._onWheelScroll);\n\t\tL.DomEvent.off(this._map._container, 'MozMousePixelScroll', L.DomEvent.preventDefault);\n\t},\n\n\t_onWheelScroll: function (e) {\n\t\tvar delta = L.DomEvent.getWheelDelta(e);\n\n\t\tthis._delta += delta;\n\t\tthis._lastMousePos = this._map.mouseEventToContainerPoint(e);\n\n\t\tif (!this._startTime) {\n\t\t\tthis._startTime = +new Date();\n\t\t}\n\n\t\tvar left = Math.max(40 - (+new Date() - this._startTime), 0);\n\n\t\tclearTimeout(this._timer);\n\t\tthis._timer = setTimeout(L.bind(this._performZoom, this), left);\n\n\t\tL.DomEvent.preventDefault(e);\n\t\tL.DomEvent.stopPropagation(e);\n\t},\n\n\t_performZoom: function () {\n\t\tvar map = this._map,\n\t\t    delta = this._delta,\n\t\t    zoom = map.getZoom();\n\n\t\tdelta = delta > 0 ? Math.ceil(delta) : Math.floor(delta);\n\t\tdelta = Math.max(Math.min(delta, 4), -4);\n\t\tdelta = map._limitZoom(zoom + delta) - zoom;\n\n\t\tthis._delta = 0;\n\t\tthis._startTime = null;\n\n\t\tif (!delta) { return; }\n\n\t\tif (map.options.scrollWheelZoom === 'center') {\n\t\t\tmap.setZoom(zoom + delta);\n\t\t} else {\n\t\t\tmap.setZoomAround(this._lastMousePos, zoom + delta);\n\t\t}\n\t}\n});\n\nL.Map.addInitHook('addHandler', 'scrollWheelZoom', L.Map.ScrollWheelZoom);\n\n\n/*\r\n * Extends the event handling code with double tap support for mobile browsers.\r\n */\r\n\r\nL.extend(L.DomEvent, {\r\n\r\n\t_touchstart: L.Browser.msPointer ? 'MSPointerDown' : L.Browser.pointer ? 'pointerdown' : 'touchstart',\r\n\t_touchend: L.Browser.msPointer ? 'MSPointerUp' : L.Browser.pointer ? 'pointerup' : 'touchend',\r\n\r\n\t// inspired by Zepto touch code by Thomas Fuchs\r\n\taddDoubleTapListener: function (obj, handler, id) {\r\n\t\tvar last,\r\n\t\t    doubleTap = false,\r\n\t\t    delay = 250,\r\n\t\t    touch,\r\n\t\t    pre = '_leaflet_',\r\n\t\t    touchstart = this._touchstart,\r\n\t\t    touchend = this._touchend,\r\n\t\t    trackedTouches = [];\r\n\r\n\t\tfunction onTouchStart(e) {\r\n\t\t\tvar count;\r\n\r\n\t\t\tif (L.Browser.pointer) {\r\n\t\t\t\ttrackedTouches.push(e.pointerId);\r\n\t\t\t\tcount = trackedTouches.length;\r\n\t\t\t} else {\r\n\t\t\t\tcount = e.touches.length;\r\n\t\t\t}\r\n\t\t\tif (count > 1) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar now = Date.now(),\r\n\t\t\t\tdelta = now - (last || now);\r\n\r\n\t\t\ttouch = e.touches ? e.touches[0] : e;\r\n\t\t\tdoubleTap = (delta > 0 && delta <= delay);\r\n\t\t\tlast = now;\r\n\t\t}\r\n\r\n\t\tfunction onTouchEnd(e) {\r\n\t\t\tif (L.Browser.pointer) {\r\n\t\t\t\tvar idx = trackedTouches.indexOf(e.pointerId);\r\n\t\t\t\tif (idx === -1) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\ttrackedTouches.splice(idx, 1);\r\n\t\t\t}\r\n\r\n\t\t\tif (doubleTap) {\r\n\t\t\t\tif (L.Browser.pointer) {\r\n\t\t\t\t\t// work around .type being readonly with MSPointer* events\r\n\t\t\t\t\tvar newTouch = { },\r\n\t\t\t\t\t\tprop;\r\n\r\n\t\t\t\t\t// jshint forin:false\r\n\t\t\t\t\tfor (var i in touch) {\r\n\t\t\t\t\t\tprop = touch[i];\r\n\t\t\t\t\t\tif (typeof prop === 'function') {\r\n\t\t\t\t\t\t\tnewTouch[i] = prop.bind(touch);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tnewTouch[i] = prop;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttouch = newTouch;\r\n\t\t\t\t}\r\n\t\t\t\ttouch.type = 'dblclick';\r\n\t\t\t\thandler(touch);\r\n\t\t\t\tlast = null;\r\n\t\t\t}\r\n\t\t}\r\n\t\tobj[pre + touchstart + id] = onTouchStart;\r\n\t\tobj[pre + touchend + id] = onTouchEnd;\r\n\r\n\t\t// on pointer we need to listen on the document, otherwise a drag starting on the map and moving off screen\r\n\t\t// will not come through to us, so we will lose track of how many touches are ongoing\r\n\t\tvar endElement = L.Browser.pointer ? document.documentElement : obj;\r\n\r\n\t\tobj.addEventListener(touchstart, onTouchStart, false);\r\n\t\tendElement.addEventListener(touchend, onTouchEnd, false);\r\n\r\n\t\tif (L.Browser.pointer) {\r\n\t\t\tendElement.addEventListener(L.DomEvent.POINTER_CANCEL, onTouchEnd, false);\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tremoveDoubleTapListener: function (obj, id) {\r\n\t\tvar pre = '_leaflet_';\r\n\r\n\t\tobj.removeEventListener(this._touchstart, obj[pre + this._touchstart + id], false);\r\n\t\t(L.Browser.pointer ? document.documentElement : obj).removeEventListener(\r\n\t\t        this._touchend, obj[pre + this._touchend + id], false);\r\n\r\n\t\tif (L.Browser.pointer) {\r\n\t\t\tdocument.documentElement.removeEventListener(L.DomEvent.POINTER_CANCEL, obj[pre + this._touchend + id],\r\n\t\t\t\tfalse);\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t}\r\n});\r\n\n\n/*\n * Extends L.DomEvent to provide touch support for Internet Explorer and Windows-based devices.\n */\n\nL.extend(L.DomEvent, {\n\n\t//static\n\tPOINTER_DOWN: L.Browser.msPointer ? 'MSPointerDown' : 'pointerdown',\n\tPOINTER_MOVE: L.Browser.msPointer ? 'MSPointerMove' : 'pointermove',\n\tPOINTER_UP: L.Browser.msPointer ? 'MSPointerUp' : 'pointerup',\n\tPOINTER_CANCEL: L.Browser.msPointer ? 'MSPointerCancel' : 'pointercancel',\n\n\t_pointers: [],\n\t_pointerDocumentListener: false,\n\n\t// Provides a touch events wrapper for (ms)pointer events.\n\t// Based on changes by veproza https://github.com/CloudMade/Leaflet/pull/1019\n\t//ref http://www.w3.org/TR/pointerevents/ https://www.w3.org/Bugs/Public/show_bug.cgi?id=22890\n\n\taddPointerListener: function (obj, type, handler, id) {\n\n\t\tswitch (type) {\n\t\tcase 'touchstart':\n\t\t\treturn this.addPointerListenerStart(obj, type, handler, id);\n\t\tcase 'touchend':\n\t\t\treturn this.addPointerListenerEnd(obj, type, handler, id);\n\t\tcase 'touchmove':\n\t\t\treturn this.addPointerListenerMove(obj, type, handler, id);\n\t\tdefault:\n\t\t\tthrow 'Unknown touch event type';\n\t\t}\n\t},\n\n\taddPointerListenerStart: function (obj, type, handler, id) {\n\t\tvar pre = '_leaflet_',\n\t\t    pointers = this._pointers;\n\n\t\tvar cb = function (e) {\n\t\t\tif (e.pointerType !== 'mouse' && e.pointerType !== e.MSPOINTER_TYPE_MOUSE) {\n\t\t\t\tL.DomEvent.preventDefault(e);\n\t\t\t}\n\n\t\t\tvar alreadyInArray = false;\n\t\t\tfor (var i = 0; i < pointers.length; i++) {\n\t\t\t\tif (pointers[i].pointerId === e.pointerId) {\n\t\t\t\t\talreadyInArray = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!alreadyInArray) {\n\t\t\t\tpointers.push(e);\n\t\t\t}\n\n\t\t\te.touches = pointers.slice();\n\t\t\te.changedTouches = [e];\n\n\t\t\thandler(e);\n\t\t};\n\n\t\tobj[pre + 'touchstart' + id] = cb;\n\t\tobj.addEventListener(this.POINTER_DOWN, cb, false);\n\n\t\t// need to also listen for end events to keep the _pointers list accurate\n\t\t// this needs to be on the body and never go away\n\t\tif (!this._pointerDocumentListener) {\n\t\t\tvar internalCb = function (e) {\n\t\t\t\tfor (var i = 0; i < pointers.length; i++) {\n\t\t\t\t\tif (pointers[i].pointerId === e.pointerId) {\n\t\t\t\t\t\tpointers.splice(i, 1);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\t//We listen on the documentElement as any drags that end by moving the touch off the screen get fired there\n\t\t\tdocument.documentElement.addEventListener(this.POINTER_UP, internalCb, false);\n\t\t\tdocument.documentElement.addEventListener(this.POINTER_CANCEL, internalCb, false);\n\n\t\t\tthis._pointerDocumentListener = true;\n\t\t}\n\n\t\treturn this;\n\t},\n\n\taddPointerListenerMove: function (obj, type, handler, id) {\n\t\tvar pre = '_leaflet_',\n\t\t    touches = this._pointers;\n\n\t\tfunction cb(e) {\n\n\t\t\t// don't fire touch moves when mouse isn't down\n\t\t\tif ((e.pointerType === e.MSPOINTER_TYPE_MOUSE || e.pointerType === 'mouse') && e.buttons === 0) { return; }\n\n\t\t\tfor (var i = 0; i < touches.length; i++) {\n\t\t\t\tif (touches[i].pointerId === e.pointerId) {\n\t\t\t\t\ttouches[i] = e;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\te.touches = touches.slice();\n\t\t\te.changedTouches = [e];\n\n\t\t\thandler(e);\n\t\t}\n\n\t\tobj[pre + 'touchmove' + id] = cb;\n\t\tobj.addEventListener(this.POINTER_MOVE, cb, false);\n\n\t\treturn this;\n\t},\n\n\taddPointerListenerEnd: function (obj, type, handler, id) {\n\t\tvar pre = '_leaflet_',\n\t\t    touches = this._pointers;\n\n\t\tvar cb = function (e) {\n\t\t\tfor (var i = 0; i < touches.length; i++) {\n\t\t\t\tif (touches[i].pointerId === e.pointerId) {\n\t\t\t\t\ttouches.splice(i, 1);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\te.touches = touches.slice();\n\t\t\te.changedTouches = [e];\n\n\t\t\thandler(e);\n\t\t};\n\n\t\tobj[pre + 'touchend' + id] = cb;\n\t\tobj.addEventListener(this.POINTER_UP, cb, false);\n\t\tobj.addEventListener(this.POINTER_CANCEL, cb, false);\n\n\t\treturn this;\n\t},\n\n\tremovePointerListener: function (obj, type, id) {\n\t\tvar pre = '_leaflet_',\n\t\t    cb = obj[pre + type + id];\n\n\t\tswitch (type) {\n\t\tcase 'touchstart':\n\t\t\tobj.removeEventListener(this.POINTER_DOWN, cb, false);\n\t\t\tbreak;\n\t\tcase 'touchmove':\n\t\t\tobj.removeEventListener(this.POINTER_MOVE, cb, false);\n\t\t\tbreak;\n\t\tcase 'touchend':\n\t\t\tobj.removeEventListener(this.POINTER_UP, cb, false);\n\t\t\tobj.removeEventListener(this.POINTER_CANCEL, cb, false);\n\t\t\tbreak;\n\t\t}\n\n\t\treturn this;\n\t}\n});\n\n\n/*\n * L.Handler.TouchZoom is used by L.Map to add pinch zoom on supported mobile browsers.\n */\n\nL.Map.mergeOptions({\n\ttouchZoom: L.Browser.touch && !L.Browser.android23,\n\tbounceAtZoomLimits: true\n});\n\nL.Map.TouchZoom = L.Handler.extend({\n\taddHooks: function () {\n\t\tL.DomEvent.on(this._map._container, 'touchstart', this._onTouchStart, this);\n\t},\n\n\tremoveHooks: function () {\n\t\tL.DomEvent.off(this._map._container, 'touchstart', this._onTouchStart, this);\n\t},\n\n\t_onTouchStart: function (e) {\n\t\tvar map = this._map;\n\n\t\tif (!e.touches || e.touches.length !== 2 || map._animatingZoom || this._zooming) { return; }\n\n\t\tvar p1 = map.mouseEventToLayerPoint(e.touches[0]),\n\t\t    p2 = map.mouseEventToLayerPoint(e.touches[1]),\n\t\t    viewCenter = map._getCenterLayerPoint();\n\n\t\tthis._startCenter = p1.add(p2)._divideBy(2);\n\t\tthis._startDist = p1.distanceTo(p2);\n\n\t\tthis._moved = false;\n\t\tthis._zooming = true;\n\n\t\tthis._centerOffset = viewCenter.subtract(this._startCenter);\n\n\t\tif (map._panAnim) {\n\t\t\tmap._panAnim.stop();\n\t\t}\n\n\t\tL.DomEvent\n\t\t    .on(document, 'touchmove', this._onTouchMove, this)\n\t\t    .on(document, 'touchend', this._onTouchEnd, this);\n\n\t\tL.DomEvent.preventDefault(e);\n\t},\n\n\t_onTouchMove: function (e) {\n\t\tvar map = this._map;\n\n\t\tif (!e.touches || e.touches.length !== 2 || !this._zooming) { return; }\n\n\t\tvar p1 = map.mouseEventToLayerPoint(e.touches[0]),\n\t\t    p2 = map.mouseEventToLayerPoint(e.touches[1]);\n\n\t\tthis._scale = p1.distanceTo(p2) / this._startDist;\n\t\tthis._delta = p1._add(p2)._divideBy(2)._subtract(this._startCenter);\n\n\t\tif (this._scale === 1) { return; }\n\n\t\tif (!map.options.bounceAtZoomLimits) {\n\t\t\tif ((map.getZoom() === map.getMinZoom() && this._scale < 1) ||\n\t\t\t    (map.getZoom() === map.getMaxZoom() && this._scale > 1)) { return; }\n\t\t}\n\n\t\tif (!this._moved) {\n\t\t\tL.DomUtil.addClass(map._mapPane, 'leaflet-touching');\n\n\t\t\tmap\n\t\t\t    .fire('movestart')\n\t\t\t    .fire('zoomstart');\n\n\t\t\tthis._moved = true;\n\t\t}\n\n\t\tL.Util.cancelAnimFrame(this._animRequest);\n\t\tthis._animRequest = L.Util.requestAnimFrame(\n\t\t        this._updateOnMove, this, true, this._map._container);\n\n\t\tL.DomEvent.preventDefault(e);\n\t},\n\n\t_updateOnMove: function () {\n\t\tvar map = this._map,\n\t\t    origin = this._getScaleOrigin(),\n\t\t    center = map.layerPointToLatLng(origin),\n\t\t    zoom = map.getScaleZoom(this._scale);\n\n\t\tmap._animateZoom(center, zoom, this._startCenter, this._scale, this._delta, false, true);\n\t},\n\n\t_onTouchEnd: function () {\n\t\tif (!this._moved || !this._zooming) {\n\t\t\tthis._zooming = false;\n\t\t\treturn;\n\t\t}\n\n\t\tvar map = this._map;\n\n\t\tthis._zooming = false;\n\t\tL.DomUtil.removeClass(map._mapPane, 'leaflet-touching');\n\t\tL.Util.cancelAnimFrame(this._animRequest);\n\n\t\tL.DomEvent\n\t\t    .off(document, 'touchmove', this._onTouchMove)\n\t\t    .off(document, 'touchend', this._onTouchEnd);\n\n\t\tvar origin = this._getScaleOrigin(),\n\t\t    center = map.layerPointToLatLng(origin),\n\n\t\t    oldZoom = map.getZoom(),\n\t\t    floatZoomDelta = map.getScaleZoom(this._scale) - oldZoom,\n\t\t    roundZoomDelta = (floatZoomDelta > 0 ?\n\t\t            Math.ceil(floatZoomDelta) : Math.floor(floatZoomDelta)),\n\n\t\t    zoom = map._limitZoom(oldZoom + roundZoomDelta),\n\t\t    scale = map.getZoomScale(zoom) / this._scale;\n\n\t\tmap._animateZoom(center, zoom, origin, scale);\n\t},\n\n\t_getScaleOrigin: function () {\n\t\tvar centerOffset = this._centerOffset.subtract(this._delta).divideBy(this._scale);\n\t\treturn this._startCenter.add(centerOffset);\n\t}\n});\n\nL.Map.addInitHook('addHandler', 'touchZoom', L.Map.TouchZoom);\n\n\n/*\n * L.Map.Tap is used to enable mobile hacks like quick taps and long hold.\n */\n\nL.Map.mergeOptions({\n\ttap: true,\n\ttapTolerance: 15\n});\n\nL.Map.Tap = L.Handler.extend({\n\taddHooks: function () {\n\t\tL.DomEvent.on(this._map._container, 'touchstart', this._onDown, this);\n\t},\n\n\tremoveHooks: function () {\n\t\tL.DomEvent.off(this._map._container, 'touchstart', this._onDown, this);\n\t},\n\n\t_onDown: function (e) {\n\t\tif (!e.touches) { return; }\n\n\t\tL.DomEvent.preventDefault(e);\n\n\t\tthis._fireClick = true;\n\n\t\t// don't simulate click or track longpress if more than 1 touch\n\t\tif (e.touches.length > 1) {\n\t\t\tthis._fireClick = false;\n\t\t\tclearTimeout(this._holdTimeout);\n\t\t\treturn;\n\t\t}\n\n\t\tvar first = e.touches[0],\n\t\t    el = first.target;\n\n\t\tthis._startPos = this._newPos = new L.Point(first.clientX, first.clientY);\n\n\t\t// if touching a link, highlight it\n\t\tif (el.tagName && el.tagName.toLowerCase() === 'a') {\n\t\t\tL.DomUtil.addClass(el, 'leaflet-active');\n\t\t}\n\n\t\t// simulate long hold but setting a timeout\n\t\tthis._holdTimeout = setTimeout(L.bind(function () {\n\t\t\tif (this._isTapValid()) {\n\t\t\t\tthis._fireClick = false;\n\t\t\t\tthis._onUp();\n\t\t\t\tthis._simulateEvent('contextmenu', first);\n\t\t\t}\n\t\t}, this), 1000);\n\n\t\tL.DomEvent\n\t\t\t.on(document, 'touchmove', this._onMove, this)\n\t\t\t.on(document, 'touchend', this._onUp, this);\n\t},\n\n\t_onUp: function (e) {\n\t\tclearTimeout(this._holdTimeout);\n\n\t\tL.DomEvent\n\t\t\t.off(document, 'touchmove', this._onMove, this)\n\t\t\t.off(document, 'touchend', this._onUp, this);\n\n\t\tif (this._fireClick && e && e.changedTouches) {\n\n\t\t\tvar first = e.changedTouches[0],\n\t\t\t    el = first.target;\n\n\t\t\tif (el && el.tagName && el.tagName.toLowerCase() === 'a') {\n\t\t\t\tL.DomUtil.removeClass(el, 'leaflet-active');\n\t\t\t}\n\n\t\t\t// simulate click if the touch didn't move too much\n\t\t\tif (this._isTapValid()) {\n\t\t\t\tthis._simulateEvent('click', first);\n\t\t\t}\n\t\t}\n\t},\n\n\t_isTapValid: function () {\n\t\treturn this._newPos.distanceTo(this._startPos) <= this._map.options.tapTolerance;\n\t},\n\n\t_onMove: function (e) {\n\t\tvar first = e.touches[0];\n\t\tthis._newPos = new L.Point(first.clientX, first.clientY);\n\t},\n\n\t_simulateEvent: function (type, e) {\n\t\tvar simulatedEvent = document.createEvent('MouseEvents');\n\n\t\tsimulatedEvent._simulated = true;\n\t\te.target._simulatedClick = true;\n\n\t\tsimulatedEvent.initMouseEvent(\n\t\t        type, true, true, window, 1,\n\t\t        e.screenX, e.screenY,\n\t\t        e.clientX, e.clientY,\n\t\t        false, false, false, false, 0, null);\n\n\t\te.target.dispatchEvent(simulatedEvent);\n\t}\n});\n\nif (L.Browser.touch && !L.Browser.pointer) {\n\tL.Map.addInitHook('addHandler', 'tap', L.Map.Tap);\n}\n\n\n/*\n * L.Handler.ShiftDragZoom is used to add shift-drag zoom interaction to the map\n  * (zoom to a selected bounding box), enabled by default.\n */\n\nL.Map.mergeOptions({\n\tboxZoom: true\n});\n\nL.Map.BoxZoom = L.Handler.extend({\n\tinitialize: function (map) {\n\t\tthis._map = map;\n\t\tthis._container = map._container;\n\t\tthis._pane = map._panes.overlayPane;\n\t\tthis._moved = false;\n\t},\n\n\taddHooks: function () {\n\t\tL.DomEvent.on(this._container, 'mousedown', this._onMouseDown, this);\n\t},\n\n\tremoveHooks: function () {\n\t\tL.DomEvent.off(this._container, 'mousedown', this._onMouseDown);\n\t\tthis._moved = false;\n\t},\n\n\tmoved: function () {\n\t\treturn this._moved;\n\t},\n\n\t_onMouseDown: function (e) {\n\t\tthis._moved = false;\n\n\t\tif (!e.shiftKey || ((e.which !== 1) && (e.button !== 1))) { return false; }\n\n\t\tL.DomUtil.disableTextSelection();\n\t\tL.DomUtil.disableImageDrag();\n\n\t\tthis._startLayerPoint = this._map.mouseEventToLayerPoint(e);\n\n\t\tL.DomEvent\n\t\t    .on(document, 'mousemove', this._onMouseMove, this)\n\t\t    .on(document, 'mouseup', this._onMouseUp, this)\n\t\t    .on(document, 'keydown', this._onKeyDown, this);\n\t},\n\n\t_onMouseMove: function (e) {\n\t\tif (!this._moved) {\n\t\t\tthis._box = L.DomUtil.create('div', 'leaflet-zoom-box', this._pane);\n\t\t\tL.DomUtil.setPosition(this._box, this._startLayerPoint);\n\n\t\t\t//TODO refactor: move cursor to styles\n\t\t\tthis._container.style.cursor = 'crosshair';\n\t\t\tthis._map.fire('boxzoomstart');\n\t\t}\n\n\t\tvar startPoint = this._startLayerPoint,\n\t\t    box = this._box,\n\n\t\t    layerPoint = this._map.mouseEventToLayerPoint(e),\n\t\t    offset = layerPoint.subtract(startPoint),\n\n\t\t    newPos = new L.Point(\n\t\t        Math.min(layerPoint.x, startPoint.x),\n\t\t        Math.min(layerPoint.y, startPoint.y));\n\n\t\tL.DomUtil.setPosition(box, newPos);\n\n\t\tthis._moved = true;\n\n\t\t// TODO refactor: remove hardcoded 4 pixels\n\t\tbox.style.width  = (Math.max(0, Math.abs(offset.x) - 4)) + 'px';\n\t\tbox.style.height = (Math.max(0, Math.abs(offset.y) - 4)) + 'px';\n\t},\n\n\t_finish: function () {\n\t\tif (this._moved) {\n\t\t\tthis._pane.removeChild(this._box);\n\t\t\tthis._container.style.cursor = '';\n\t\t}\n\n\t\tL.DomUtil.enableTextSelection();\n\t\tL.DomUtil.enableImageDrag();\n\n\t\tL.DomEvent\n\t\t    .off(document, 'mousemove', this._onMouseMove)\n\t\t    .off(document, 'mouseup', this._onMouseUp)\n\t\t    .off(document, 'keydown', this._onKeyDown);\n\t},\n\n\t_onMouseUp: function (e) {\n\n\t\tthis._finish();\n\n\t\tvar map = this._map,\n\t\t    layerPoint = map.mouseEventToLayerPoint(e);\n\n\t\tif (this._startLayerPoint.equals(layerPoint)) { return; }\n\n\t\tvar bounds = new L.LatLngBounds(\n\t\t        map.layerPointToLatLng(this._startLayerPoint),\n\t\t        map.layerPointToLatLng(layerPoint));\n\n\t\tmap.fitBounds(bounds);\n\n\t\tmap.fire('boxzoomend', {\n\t\t\tboxZoomBounds: bounds\n\t\t});\n\t},\n\n\t_onKeyDown: function (e) {\n\t\tif (e.keyCode === 27) {\n\t\t\tthis._finish();\n\t\t}\n\t}\n});\n\nL.Map.addInitHook('addHandler', 'boxZoom', L.Map.BoxZoom);\n\n\n/*\n * L.Map.Keyboard is handling keyboard interaction with the map, enabled by default.\n */\n\nL.Map.mergeOptions({\n\tkeyboard: true,\n\tkeyboardPanOffset: 80,\n\tkeyboardZoomOffset: 1\n});\n\nL.Map.Keyboard = L.Handler.extend({\n\n\tkeyCodes: {\n\t\tleft:    [37],\n\t\tright:   [39],\n\t\tdown:    [40],\n\t\tup:      [38],\n\t\tzoomIn:  [187, 107, 61, 171],\n\t\tzoomOut: [189, 109, 173]\n\t},\n\n\tinitialize: function (map) {\n\t\tthis._map = map;\n\n\t\tthis._setPanOffset(map.options.keyboardPanOffset);\n\t\tthis._setZoomOffset(map.options.keyboardZoomOffset);\n\t},\n\n\taddHooks: function () {\n\t\tvar container = this._map._container;\n\n\t\t// make the container focusable by tabbing\n\t\tif (container.tabIndex === -1) {\n\t\t\tcontainer.tabIndex = '0';\n\t\t}\n\n\t\tL.DomEvent\n\t\t    .on(container, 'focus', this._onFocus, this)\n\t\t    .on(container, 'blur', this._onBlur, this)\n\t\t    .on(container, 'mousedown', this._onMouseDown, this);\n\n\t\tthis._map\n\t\t    .on('focus', this._addHooks, this)\n\t\t    .on('blur', this._removeHooks, this);\n\t},\n\n\tremoveHooks: function () {\n\t\tthis._removeHooks();\n\n\t\tvar container = this._map._container;\n\n\t\tL.DomEvent\n\t\t    .off(container, 'focus', this._onFocus, this)\n\t\t    .off(container, 'blur', this._onBlur, this)\n\t\t    .off(container, 'mousedown', this._onMouseDown, this);\n\n\t\tthis._map\n\t\t    .off('focus', this._addHooks, this)\n\t\t    .off('blur', this._removeHooks, this);\n\t},\n\n\t_onMouseDown: function () {\n\t\tif (this._focused) { return; }\n\n\t\tvar body = document.body,\n\t\t    docEl = document.documentElement,\n\t\t    top = body.scrollTop || docEl.scrollTop,\n\t\t    left = body.scrollLeft || docEl.scrollLeft;\n\n\t\tthis._map._container.focus();\n\n\t\twindow.scrollTo(left, top);\n\t},\n\n\t_onFocus: function () {\n\t\tthis._focused = true;\n\t\tthis._map.fire('focus');\n\t},\n\n\t_onBlur: function () {\n\t\tthis._focused = false;\n\t\tthis._map.fire('blur');\n\t},\n\n\t_setPanOffset: function (pan) {\n\t\tvar keys = this._panKeys = {},\n\t\t    codes = this.keyCodes,\n\t\t    i, len;\n\n\t\tfor (i = 0, len = codes.left.length; i < len; i++) {\n\t\t\tkeys[codes.left[i]] = [-1 * pan, 0];\n\t\t}\n\t\tfor (i = 0, len = codes.right.length; i < len; i++) {\n\t\t\tkeys[codes.right[i]] = [pan, 0];\n\t\t}\n\t\tfor (i = 0, len = codes.down.length; i < len; i++) {\n\t\t\tkeys[codes.down[i]] = [0, pan];\n\t\t}\n\t\tfor (i = 0, len = codes.up.length; i < len; i++) {\n\t\t\tkeys[codes.up[i]] = [0, -1 * pan];\n\t\t}\n\t},\n\n\t_setZoomOffset: function (zoom) {\n\t\tvar keys = this._zoomKeys = {},\n\t\t    codes = this.keyCodes,\n\t\t    i, len;\n\n\t\tfor (i = 0, len = codes.zoomIn.length; i < len; i++) {\n\t\t\tkeys[codes.zoomIn[i]] = zoom;\n\t\t}\n\t\tfor (i = 0, len = codes.zoomOut.length; i < len; i++) {\n\t\t\tkeys[codes.zoomOut[i]] = -zoom;\n\t\t}\n\t},\n\n\t_addHooks: function () {\n\t\tL.DomEvent.on(document, 'keydown', this._onKeyDown, this);\n\t},\n\n\t_removeHooks: function () {\n\t\tL.DomEvent.off(document, 'keydown', this._onKeyDown, this);\n\t},\n\n\t_onKeyDown: function (e) {\n\t\tvar key = e.keyCode,\n\t\t    map = this._map;\n\n\t\tif (key in this._panKeys) {\n\n\t\t\tif (map._panAnim && map._panAnim._inProgress) { return; }\n\n\t\t\tmap.panBy(this._panKeys[key]);\n\n\t\t\tif (map.options.maxBounds) {\n\t\t\t\tmap.panInsideBounds(map.options.maxBounds);\n\t\t\t}\n\n\t\t} else if (key in this._zoomKeys) {\n\t\t\tmap.setZoom(map.getZoom() + this._zoomKeys[key]);\n\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\n\t\tL.DomEvent.stop(e);\n\t}\n});\n\nL.Map.addInitHook('addHandler', 'keyboard', L.Map.Keyboard);\n\n\n/*\n * L.Handler.MarkerDrag is used internally by L.Marker to make the markers draggable.\n */\n\nL.Handler.MarkerDrag = L.Handler.extend({\n\tinitialize: function (marker) {\n\t\tthis._marker = marker;\n\t},\n\n\taddHooks: function () {\n\t\tvar icon = this._marker._icon;\n\t\tif (!this._draggable) {\n\t\t\tthis._draggable = new L.Draggable(icon, icon);\n\t\t}\n\n\t\tthis._draggable\n\t\t\t.on('dragstart', this._onDragStart, this)\n\t\t\t.on('drag', this._onDrag, this)\n\t\t\t.on('dragend', this._onDragEnd, this);\n\t\tthis._draggable.enable();\n\t\tL.DomUtil.addClass(this._marker._icon, 'leaflet-marker-draggable');\n\t},\n\n\tremoveHooks: function () {\n\t\tthis._draggable\n\t\t\t.off('dragstart', this._onDragStart, this)\n\t\t\t.off('drag', this._onDrag, this)\n\t\t\t.off('dragend', this._onDragEnd, this);\n\n\t\tthis._draggable.disable();\n\t\tL.DomUtil.removeClass(this._marker._icon, 'leaflet-marker-draggable');\n\t},\n\n\tmoved: function () {\n\t\treturn this._draggable && this._draggable._moved;\n\t},\n\n\t_onDragStart: function () {\n\t\tthis._marker\n\t\t    .closePopup()\n\t\t    .fire('movestart')\n\t\t    .fire('dragstart');\n\t},\n\n\t_onDrag: function () {\n\t\tvar marker = this._marker,\n\t\t    shadow = marker._shadow,\n\t\t    iconPos = L.DomUtil.getPosition(marker._icon),\n\t\t    latlng = marker._map.layerPointToLatLng(iconPos);\n\n\t\t// update shadow position\n\t\tif (shadow) {\n\t\t\tL.DomUtil.setPosition(shadow, iconPos);\n\t\t}\n\n\t\tmarker._latlng = latlng;\n\n\t\tmarker\n\t\t    .fire('move', {latlng: latlng})\n\t\t    .fire('drag');\n\t},\n\n\t_onDragEnd: function (e) {\n\t\tthis._marker\n\t\t    .fire('moveend')\n\t\t    .fire('dragend', e);\n\t}\n});\n\n\n/*\r\n * L.Control is a base class for implementing map controls. Handles positioning.\r\n * All other controls extend from this class.\r\n */\r\n\r\nL.Control = L.Class.extend({\r\n\toptions: {\r\n\t\tposition: 'topright'\r\n\t},\r\n\r\n\tinitialize: function (options) {\r\n\t\tL.setOptions(this, options);\r\n\t},\r\n\r\n\tgetPosition: function () {\r\n\t\treturn this.options.position;\r\n\t},\r\n\r\n\tsetPosition: function (position) {\r\n\t\tvar map = this._map;\r\n\r\n\t\tif (map) {\r\n\t\t\tmap.removeControl(this);\r\n\t\t}\r\n\r\n\t\tthis.options.position = position;\r\n\r\n\t\tif (map) {\r\n\t\t\tmap.addControl(this);\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tgetContainer: function () {\r\n\t\treturn this._container;\r\n\t},\r\n\r\n\taddTo: function (map) {\r\n\t\tthis._map = map;\r\n\r\n\t\tvar container = this._container = this.onAdd(map),\r\n\t\t    pos = this.getPosition(),\r\n\t\t    corner = map._controlCorners[pos];\r\n\r\n\t\tL.DomUtil.addClass(container, 'leaflet-control');\r\n\r\n\t\tif (pos.indexOf('bottom') !== -1) {\r\n\t\t\tcorner.insertBefore(container, corner.firstChild);\r\n\t\t} else {\r\n\t\t\tcorner.appendChild(container);\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tremoveFrom: function (map) {\r\n\t\tvar pos = this.getPosition(),\r\n\t\t    corner = map._controlCorners[pos];\r\n\r\n\t\tcorner.removeChild(this._container);\r\n\t\tthis._map = null;\r\n\r\n\t\tif (this.onRemove) {\r\n\t\t\tthis.onRemove(map);\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t_refocusOnMap: function () {\r\n\t\tif (this._map) {\r\n\t\t\tthis._map.getContainer().focus();\r\n\t\t}\r\n\t}\r\n});\r\n\r\nL.control = function (options) {\r\n\treturn new L.Control(options);\r\n};\r\n\r\n\r\n// adds control-related methods to L.Map\r\n\r\nL.Map.include({\r\n\taddControl: function (control) {\r\n\t\tcontrol.addTo(this);\r\n\t\treturn this;\r\n\t},\r\n\r\n\tremoveControl: function (control) {\r\n\t\tcontrol.removeFrom(this);\r\n\t\treturn this;\r\n\t},\r\n\r\n\t_initControlPos: function () {\r\n\t\tvar corners = this._controlCorners = {},\r\n\t\t    l = 'leaflet-',\r\n\t\t    container = this._controlContainer =\r\n\t\t            L.DomUtil.create('div', l + 'control-container', this._container);\r\n\r\n\t\tfunction createCorner(vSide, hSide) {\r\n\t\t\tvar className = l + vSide + ' ' + l + hSide;\r\n\r\n\t\t\tcorners[vSide + hSide] = L.DomUtil.create('div', className, container);\r\n\t\t}\r\n\r\n\t\tcreateCorner('top', 'left');\r\n\t\tcreateCorner('top', 'right');\r\n\t\tcreateCorner('bottom', 'left');\r\n\t\tcreateCorner('bottom', 'right');\r\n\t},\r\n\r\n\t_clearControlPos: function () {\r\n\t\tthis._container.removeChild(this._controlContainer);\r\n\t}\r\n});\r\n\n\n/*\r\n * L.Control.Zoom is used for the default zoom buttons on the map.\r\n */\r\n\r\nL.Control.Zoom = L.Control.extend({\r\n\toptions: {\r\n\t\tposition: 'topleft',\r\n\t\tzoomInText: '+',\r\n\t\tzoomInTitle: 'Zoom in',\r\n\t\tzoomOutText: '-',\r\n\t\tzoomOutTitle: 'Zoom out'\r\n\t},\r\n\r\n\tonAdd: function (map) {\r\n\t\tvar zoomName = 'leaflet-control-zoom',\r\n\t\t    container = L.DomUtil.create('div', zoomName + ' leaflet-bar');\r\n\r\n\t\tthis._map = map;\r\n\r\n\t\tthis._zoomInButton  = this._createButton(\r\n\t\t        this.options.zoomInText, this.options.zoomInTitle,\r\n\t\t        zoomName + '-in',  container, this._zoomIn,  this);\r\n\t\tthis._zoomOutButton = this._createButton(\r\n\t\t        this.options.zoomOutText, this.options.zoomOutTitle,\r\n\t\t        zoomName + '-out', container, this._zoomOut, this);\r\n\r\n\t\tthis._updateDisabled();\r\n\t\tmap.on('zoomend zoomlevelschange', this._updateDisabled, this);\r\n\r\n\t\treturn container;\r\n\t},\r\n\r\n\tonRemove: function (map) {\r\n\t\tmap.off('zoomend zoomlevelschange', this._updateDisabled, this);\r\n\t},\r\n\r\n\t_zoomIn: function (e) {\r\n\t\tthis._map.zoomIn(e.shiftKey ? 3 : 1);\r\n\t},\r\n\r\n\t_zoomOut: function (e) {\r\n\t\tthis._map.zoomOut(e.shiftKey ? 3 : 1);\r\n\t},\r\n\r\n\t_createButton: function (html, title, className, container, fn, context) {\r\n\t\tvar link = L.DomUtil.create('a', className, container);\r\n\t\tlink.innerHTML = html;\r\n\t\tlink.href = '#';\r\n\t\tlink.title = title;\r\n\r\n\t\tvar stop = L.DomEvent.stopPropagation;\r\n\r\n\t\tL.DomEvent\r\n\t\t    .on(link, 'click', stop)\r\n\t\t    .on(link, 'mousedown', stop)\r\n\t\t    .on(link, 'dblclick', stop)\r\n\t\t    .on(link, 'click', L.DomEvent.preventDefault)\r\n\t\t    .on(link, 'click', fn, context)\r\n\t\t    .on(link, 'click', this._refocusOnMap, context);\r\n\r\n\t\treturn link;\r\n\t},\r\n\r\n\t_updateDisabled: function () {\r\n\t\tvar map = this._map,\r\n\t\t\tclassName = 'leaflet-disabled';\r\n\r\n\t\tL.DomUtil.removeClass(this._zoomInButton, className);\r\n\t\tL.DomUtil.removeClass(this._zoomOutButton, className);\r\n\r\n\t\tif (map._zoom === map.getMinZoom()) {\r\n\t\t\tL.DomUtil.addClass(this._zoomOutButton, className);\r\n\t\t}\r\n\t\tif (map._zoom === map.getMaxZoom()) {\r\n\t\t\tL.DomUtil.addClass(this._zoomInButton, className);\r\n\t\t}\r\n\t}\r\n});\r\n\r\nL.Map.mergeOptions({\r\n\tzoomControl: true\r\n});\r\n\r\nL.Map.addInitHook(function () {\r\n\tif (this.options.zoomControl) {\r\n\t\tthis.zoomControl = new L.Control.Zoom();\r\n\t\tthis.addControl(this.zoomControl);\r\n\t}\r\n});\r\n\r\nL.control.zoom = function (options) {\r\n\treturn new L.Control.Zoom(options);\r\n};\r\n\r\n\n\n/*\r\n * L.Control.Attribution is used for displaying attribution on the map (added by default).\r\n */\r\n\r\nL.Control.Attribution = L.Control.extend({\r\n\toptions: {\r\n\t\tposition: 'bottomright',\r\n\t\tprefix: '<a href=\"http://leafletjs.com\" title=\"A JS library for interactive maps\">Leaflet</a>'\r\n\t},\r\n\r\n\tinitialize: function (options) {\r\n\t\tL.setOptions(this, options);\r\n\r\n\t\tthis._attributions = {};\r\n\t},\r\n\r\n\tonAdd: function (map) {\r\n\t\tthis._container = L.DomUtil.create('div', 'leaflet-control-attribution');\r\n\t\tL.DomEvent.disableClickPropagation(this._container);\r\n\r\n\t\tfor (var i in map._layers) {\r\n\t\t\tif (map._layers[i].getAttribution) {\r\n\t\t\t\tthis.addAttribution(map._layers[i].getAttribution());\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tmap\r\n\t\t    .on('layeradd', this._onLayerAdd, this)\r\n\t\t    .on('layerremove', this._onLayerRemove, this);\r\n\r\n\t\tthis._update();\r\n\r\n\t\treturn this._container;\r\n\t},\r\n\r\n\tonRemove: function (map) {\r\n\t\tmap\r\n\t\t    .off('layeradd', this._onLayerAdd)\r\n\t\t    .off('layerremove', this._onLayerRemove);\r\n\r\n\t},\r\n\r\n\tsetPrefix: function (prefix) {\r\n\t\tthis.options.prefix = prefix;\r\n\t\tthis._update();\r\n\t\treturn this;\r\n\t},\r\n\r\n\taddAttribution: function (text) {\r\n\t\tif (!text) { return; }\r\n\r\n\t\tif (!this._attributions[text]) {\r\n\t\t\tthis._attributions[text] = 0;\r\n\t\t}\r\n\t\tthis._attributions[text]++;\r\n\r\n\t\tthis._update();\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tremoveAttribution: function (text) {\r\n\t\tif (!text) { return; }\r\n\r\n\t\tif (this._attributions[text]) {\r\n\t\t\tthis._attributions[text]--;\r\n\t\t\tthis._update();\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t_update: function () {\r\n\t\tif (!this._map) { return; }\r\n\r\n\t\tvar attribs = [];\r\n\r\n\t\tfor (var i in this._attributions) {\r\n\t\t\tif (this._attributions[i]) {\r\n\t\t\t\tattribs.push(i);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar prefixAndAttribs = [];\r\n\r\n\t\tif (this.options.prefix) {\r\n\t\t\tprefixAndAttribs.push(this.options.prefix);\r\n\t\t}\r\n\t\tif (attribs.length) {\r\n\t\t\tprefixAndAttribs.push(attribs.join(', '));\r\n\t\t}\r\n\r\n\t\tthis._container.innerHTML = prefixAndAttribs.join(' | ');\r\n\t},\r\n\r\n\t_onLayerAdd: function (e) {\r\n\t\tif (e.layer.getAttribution) {\r\n\t\t\tthis.addAttribution(e.layer.getAttribution());\r\n\t\t}\r\n\t},\r\n\r\n\t_onLayerRemove: function (e) {\r\n\t\tif (e.layer.getAttribution) {\r\n\t\t\tthis.removeAttribution(e.layer.getAttribution());\r\n\t\t}\r\n\t}\r\n});\r\n\r\nL.Map.mergeOptions({\r\n\tattributionControl: true\r\n});\r\n\r\nL.Map.addInitHook(function () {\r\n\tif (this.options.attributionControl) {\r\n\t\tthis.attributionControl = (new L.Control.Attribution()).addTo(this);\r\n\t}\r\n});\r\n\r\nL.control.attribution = function (options) {\r\n\treturn new L.Control.Attribution(options);\r\n};\r\n\n\n/*\n * L.Control.Scale is used for displaying metric/imperial scale on the map.\n */\n\nL.Control.Scale = L.Control.extend({\n\toptions: {\n\t\tposition: 'bottomleft',\n\t\tmaxWidth: 100,\n\t\tmetric: true,\n\t\timperial: true,\n\t\tupdateWhenIdle: false\n\t},\n\n\tonAdd: function (map) {\n\t\tthis._map = map;\n\n\t\tvar className = 'leaflet-control-scale',\n\t\t    container = L.DomUtil.create('div', className),\n\t\t    options = this.options;\n\n\t\tthis._addScales(options, className, container);\n\n\t\tmap.on(options.updateWhenIdle ? 'moveend' : 'move', this._update, this);\n\t\tmap.whenReady(this._update, this);\n\n\t\treturn container;\n\t},\n\n\tonRemove: function (map) {\n\t\tmap.off(this.options.updateWhenIdle ? 'moveend' : 'move', this._update, this);\n\t},\n\n\t_addScales: function (options, className, container) {\n\t\tif (options.metric) {\n\t\t\tthis._mScale = L.DomUtil.create('div', className + '-line', container);\n\t\t}\n\t\tif (options.imperial) {\n\t\t\tthis._iScale = L.DomUtil.create('div', className + '-line', container);\n\t\t}\n\t},\n\n\t_update: function () {\n\t\tvar bounds = this._map.getBounds(),\n\t\t    centerLat = bounds.getCenter().lat,\n\t\t    halfWorldMeters = 6378137 * Math.PI * Math.cos(centerLat * Math.PI / 180),\n\t\t    dist = halfWorldMeters * (bounds.getNorthEast().lng - bounds.getSouthWest().lng) / 180,\n\n\t\t    size = this._map.getSize(),\n\t\t    options = this.options,\n\t\t    maxMeters = 0;\n\n\t\tif (size.x > 0) {\n\t\t\tmaxMeters = dist * (options.maxWidth / size.x);\n\t\t}\n\n\t\tthis._updateScales(options, maxMeters);\n\t},\n\n\t_updateScales: function (options, maxMeters) {\n\t\tif (options.metric && maxMeters) {\n\t\t\tthis._updateMetric(maxMeters);\n\t\t}\n\n\t\tif (options.imperial && maxMeters) {\n\t\t\tthis._updateImperial(maxMeters);\n\t\t}\n\t},\n\n\t_updateMetric: function (maxMeters) {\n\t\tvar meters = this._getRoundNum(maxMeters);\n\n\t\tthis._mScale.style.width = this._getScaleWidth(meters / maxMeters) + 'px';\n\t\tthis._mScale.innerHTML = meters < 1000 ? meters + ' m' : (meters / 1000) + ' km';\n\t},\n\n\t_updateImperial: function (maxMeters) {\n\t\tvar maxFeet = maxMeters * 3.2808399,\n\t\t    scale = this._iScale,\n\t\t    maxMiles, miles, feet;\n\n\t\tif (maxFeet > 5280) {\n\t\t\tmaxMiles = maxFeet / 5280;\n\t\t\tmiles = this._getRoundNum(maxMiles);\n\n\t\t\tscale.style.width = this._getScaleWidth(miles / maxMiles) + 'px';\n\t\t\tscale.innerHTML = miles + ' mi';\n\n\t\t} else {\n\t\t\tfeet = this._getRoundNum(maxFeet);\n\n\t\t\tscale.style.width = this._getScaleWidth(feet / maxFeet) + 'px';\n\t\t\tscale.innerHTML = feet + ' ft';\n\t\t}\n\t},\n\n\t_getScaleWidth: function (ratio) {\n\t\treturn Math.round(this.options.maxWidth * ratio) - 10;\n\t},\n\n\t_getRoundNum: function (num) {\n\t\tvar pow10 = Math.pow(10, (Math.floor(num) + '').length - 1),\n\t\t    d = num / pow10;\n\n\t\td = d >= 10 ? 10 : d >= 5 ? 5 : d >= 3 ? 3 : d >= 2 ? 2 : 1;\n\n\t\treturn pow10 * d;\n\t}\n});\n\nL.control.scale = function (options) {\n\treturn new L.Control.Scale(options);\n};\n\n\n/*\r\n * L.Control.Layers is a control to allow users to switch between different layers on the map.\r\n */\r\n\r\nL.Control.Layers = L.Control.extend({\r\n\toptions: {\r\n\t\tcollapsed: true,\r\n\t\tposition: 'topright',\r\n\t\tautoZIndex: true\r\n\t},\r\n\r\n\tinitialize: function (baseLayers, overlays, options) {\r\n\t\tL.setOptions(this, options);\r\n\r\n\t\tthis._layers = {};\r\n\t\tthis._lastZIndex = 0;\r\n\t\tthis._handlingClick = false;\r\n\r\n\t\tfor (var i in baseLayers) {\r\n\t\t\tthis._addLayer(baseLayers[i], i);\r\n\t\t}\r\n\r\n\t\tfor (i in overlays) {\r\n\t\t\tthis._addLayer(overlays[i], i, true);\r\n\t\t}\r\n\t},\r\n\r\n\tonAdd: function (map) {\r\n\t\tthis._initLayout();\r\n\t\tthis._update();\r\n\r\n\t\tmap\r\n\t\t    .on('layeradd', this._onLayerChange, this)\r\n\t\t    .on('layerremove', this._onLayerChange, this);\r\n\r\n\t\treturn this._container;\r\n\t},\r\n\r\n\tonRemove: function (map) {\r\n\t\tmap\r\n\t\t    .off('layeradd', this._onLayerChange, this)\r\n\t\t    .off('layerremove', this._onLayerChange, this);\r\n\t},\r\n\r\n\taddBaseLayer: function (layer, name) {\r\n\t\tthis._addLayer(layer, name);\r\n\t\tthis._update();\r\n\t\treturn this;\r\n\t},\r\n\r\n\taddOverlay: function (layer, name) {\r\n\t\tthis._addLayer(layer, name, true);\r\n\t\tthis._update();\r\n\t\treturn this;\r\n\t},\r\n\r\n\tremoveLayer: function (layer) {\r\n\t\tvar id = L.stamp(layer);\r\n\t\tdelete this._layers[id];\r\n\t\tthis._update();\r\n\t\treturn this;\r\n\t},\r\n\r\n\t_initLayout: function () {\r\n\t\tvar className = 'leaflet-control-layers',\r\n\t\t    container = this._container = L.DomUtil.create('div', className);\r\n\r\n\t\t//Makes this work on IE10 Touch devices by stopping it from firing a mouseout event when the touch is released\r\n\t\tcontainer.setAttribute('aria-haspopup', true);\r\n\r\n\t\tif (!L.Browser.touch) {\r\n\t\t\tL.DomEvent\r\n\t\t\t\t.disableClickPropagation(container)\r\n\t\t\t\t.disableScrollPropagation(container);\r\n\t\t} else {\r\n\t\t\tL.DomEvent.on(container, 'click', L.DomEvent.stopPropagation);\r\n\t\t}\r\n\r\n\t\tvar form = this._form = L.DomUtil.create('form', className + '-list');\r\n\r\n\t\tif (this.options.collapsed) {\r\n\t\t\tif (!L.Browser.android) {\r\n\t\t\t\tL.DomEvent\r\n\t\t\t\t    .on(container, 'mouseover', this._expand, this)\r\n\t\t\t\t    .on(container, 'mouseout', this._collapse, this);\r\n\t\t\t}\r\n\t\t\tvar link = this._layersLink = L.DomUtil.create('a', className + '-toggle', container);\r\n\t\t\tlink.href = '#';\r\n\t\t\tlink.title = 'Layers';\r\n\r\n\t\t\tif (L.Browser.touch) {\r\n\t\t\t\tL.DomEvent\r\n\t\t\t\t    .on(link, 'click', L.DomEvent.stop)\r\n\t\t\t\t    .on(link, 'click', this._expand, this);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tL.DomEvent.on(link, 'focus', this._expand, this);\r\n\t\t\t}\r\n\t\t\t//Work around for Firefox android issue https://github.com/Leaflet/Leaflet/issues/2033\r\n\t\t\tL.DomEvent.on(form, 'click', function () {\r\n\t\t\t\tsetTimeout(L.bind(this._onInputClick, this), 0);\r\n\t\t\t}, this);\r\n\r\n\t\t\tthis._map.on('click', this._collapse, this);\r\n\t\t\t// TODO keyboard accessibility\r\n\t\t} else {\r\n\t\t\tthis._expand();\r\n\t\t}\r\n\r\n\t\tthis._baseLayersList = L.DomUtil.create('div', className + '-base', form);\r\n\t\tthis._separator = L.DomUtil.create('div', className + '-separator', form);\r\n\t\tthis._overlaysList = L.DomUtil.create('div', className + '-overlays', form);\r\n\r\n\t\tcontainer.appendChild(form);\r\n\t},\r\n\r\n\t_addLayer: function (layer, name, overlay) {\r\n\t\tvar id = L.stamp(layer);\r\n\r\n\t\tthis._layers[id] = {\r\n\t\t\tlayer: layer,\r\n\t\t\tname: name,\r\n\t\t\toverlay: overlay\r\n\t\t};\r\n\r\n\t\tif (this.options.autoZIndex && layer.setZIndex) {\r\n\t\t\tthis._lastZIndex++;\r\n\t\t\tlayer.setZIndex(this._lastZIndex);\r\n\t\t}\r\n\t},\r\n\r\n\t_update: function () {\r\n\t\tif (!this._container) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._baseLayersList.innerHTML = '';\r\n\t\tthis._overlaysList.innerHTML = '';\r\n\r\n\t\tvar baseLayersPresent = false,\r\n\t\t    overlaysPresent = false,\r\n\t\t    i, obj;\r\n\r\n\t\tfor (i in this._layers) {\r\n\t\t\tobj = this._layers[i];\r\n\t\t\tthis._addItem(obj);\r\n\t\t\toverlaysPresent = overlaysPresent || obj.overlay;\r\n\t\t\tbaseLayersPresent = baseLayersPresent || !obj.overlay;\r\n\t\t}\r\n\r\n\t\tthis._separator.style.display = overlaysPresent && baseLayersPresent ? '' : 'none';\r\n\t},\r\n\r\n\t_onLayerChange: function (e) {\r\n\t\tvar obj = this._layers[L.stamp(e.layer)];\r\n\r\n\t\tif (!obj) { return; }\r\n\r\n\t\tif (!this._handlingClick) {\r\n\t\t\tthis._update();\r\n\t\t}\r\n\r\n\t\tvar type = obj.overlay ?\r\n\t\t\t(e.type === 'layeradd' ? 'overlayadd' : 'overlayremove') :\r\n\t\t\t(e.type === 'layeradd' ? 'baselayerchange' : null);\r\n\r\n\t\tif (type) {\r\n\t\t\tthis._map.fire(type, obj);\r\n\t\t}\r\n\t},\r\n\r\n\t// IE7 bugs out if you create a radio dynamically, so you have to do it this hacky way (see http://bit.ly/PqYLBe)\r\n\t_createRadioElement: function (name, checked) {\r\n\r\n\t\tvar radioHtml = '<input type=\"radio\" class=\"leaflet-control-layers-selector\" name=\"' + name + '\"';\r\n\t\tif (checked) {\r\n\t\t\tradioHtml += ' checked=\"checked\"';\r\n\t\t}\r\n\t\tradioHtml += '/>';\r\n\r\n\t\tvar radioFragment = document.createElement('div');\r\n\t\tradioFragment.innerHTML = radioHtml;\r\n\r\n\t\treturn radioFragment.firstChild;\r\n\t},\r\n\r\n\t_addItem: function (obj) {\r\n\t\tvar label = document.createElement('label'),\r\n\t\t    input,\r\n\t\t    checked = this._map.hasLayer(obj.layer);\r\n\r\n\t\tif (obj.overlay) {\r\n\t\t\tinput = document.createElement('input');\r\n\t\t\tinput.type = 'checkbox';\r\n\t\t\tinput.className = 'leaflet-control-layers-selector';\r\n\t\t\tinput.defaultChecked = checked;\r\n\t\t} else {\r\n\t\t\tinput = this._createRadioElement('leaflet-base-layers', checked);\r\n\t\t}\r\n\r\n\t\tinput.layerId = L.stamp(obj.layer);\r\n\r\n\t\tL.DomEvent.on(input, 'click', this._onInputClick, this);\r\n\r\n\t\tvar name = document.createElement('span');\r\n\t\tname.innerHTML = ' ' + obj.name;\r\n\r\n\t\tlabel.appendChild(input);\r\n\t\tlabel.appendChild(name);\r\n\r\n\t\tvar container = obj.overlay ? this._overlaysList : this._baseLayersList;\r\n\t\tcontainer.appendChild(label);\r\n\r\n\t\treturn label;\r\n\t},\r\n\r\n\t_onInputClick: function () {\r\n\t\tvar i, input, obj,\r\n\t\t    inputs = this._form.getElementsByTagName('input'),\r\n\t\t    inputsLen = inputs.length;\r\n\r\n\t\tthis._handlingClick = true;\r\n\r\n\t\tfor (i = 0; i < inputsLen; i++) {\r\n\t\t\tinput = inputs[i];\r\n\t\t\tobj = this._layers[input.layerId];\r\n\r\n\t\t\tif (input.checked && !this._map.hasLayer(obj.layer)) {\r\n\t\t\t\tthis._map.addLayer(obj.layer);\r\n\r\n\t\t\t} else if (!input.checked && this._map.hasLayer(obj.layer)) {\r\n\t\t\t\tthis._map.removeLayer(obj.layer);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._handlingClick = false;\r\n\r\n\t\tthis._refocusOnMap();\r\n\t},\r\n\r\n\t_expand: function () {\r\n\t\tL.DomUtil.addClass(this._container, 'leaflet-control-layers-expanded');\r\n\t},\r\n\r\n\t_collapse: function () {\r\n\t\tthis._container.className = this._container.className.replace(' leaflet-control-layers-expanded', '');\r\n\t}\r\n});\r\n\r\nL.control.layers = function (baseLayers, overlays, options) {\r\n\treturn new L.Control.Layers(baseLayers, overlays, options);\r\n};\r\n\n\n/*\n * L.PosAnimation is used by Leaflet internally for pan animations.\n */\n\nL.PosAnimation = L.Class.extend({\n\tincludes: L.Mixin.Events,\n\n\trun: function (el, newPos, duration, easeLinearity) { // (HTMLElement, Point[, Number, Number])\n\t\tthis.stop();\n\n\t\tthis._el = el;\n\t\tthis._inProgress = true;\n\t\tthis._newPos = newPos;\n\n\t\tthis.fire('start');\n\n\t\tel.style[L.DomUtil.TRANSITION] = 'all ' + (duration || 0.25) +\n\t\t        's cubic-bezier(0,0,' + (easeLinearity || 0.5) + ',1)';\n\n\t\tL.DomEvent.on(el, L.DomUtil.TRANSITION_END, this._onTransitionEnd, this);\n\t\tL.DomUtil.setPosition(el, newPos);\n\n\t\t// toggle reflow, Chrome flickers for some reason if you don't do this\n\t\tL.Util.falseFn(el.offsetWidth);\n\n\t\t// there's no native way to track value updates of transitioned properties, so we imitate this\n\t\tthis._stepTimer = setInterval(L.bind(this._onStep, this), 50);\n\t},\n\n\tstop: function () {\n\t\tif (!this._inProgress) { return; }\n\n\t\t// if we just removed the transition property, the element would jump to its final position,\n\t\t// so we need to make it stay at the current position\n\n\t\tL.DomUtil.setPosition(this._el, this._getPos());\n\t\tthis._onTransitionEnd();\n\t\tL.Util.falseFn(this._el.offsetWidth); // force reflow in case we are about to start a new animation\n\t},\n\n\t_onStep: function () {\n\t\tvar stepPos = this._getPos();\n\t\tif (!stepPos) {\n\t\t\tthis._onTransitionEnd();\n\t\t\treturn;\n\t\t}\n\t\t// jshint camelcase: false\n\t\t// make L.DomUtil.getPosition return intermediate position value during animation\n\t\tthis._el._leaflet_pos = stepPos;\n\n\t\tthis.fire('step');\n\t},\n\n\t// you can't easily get intermediate values of properties animated with CSS3 Transitions,\n\t// we need to parse computed style (in case of transform it returns matrix string)\n\n\t_transformRe: /([-+]?(?:\\d*\\.)?\\d+)\\D*, ([-+]?(?:\\d*\\.)?\\d+)\\D*\\)/,\n\n\t_getPos: function () {\n\t\tvar left, top, matches,\n\t\t    el = this._el,\n\t\t    style = window.getComputedStyle(el);\n\n\t\tif (L.Browser.any3d) {\n\t\t\tmatches = style[L.DomUtil.TRANSFORM].match(this._transformRe);\n\t\t\tif (!matches) { return; }\n\t\t\tleft = parseFloat(matches[1]);\n\t\t\ttop  = parseFloat(matches[2]);\n\t\t} else {\n\t\t\tleft = parseFloat(style.left);\n\t\t\ttop  = parseFloat(style.top);\n\t\t}\n\n\t\treturn new L.Point(left, top, true);\n\t},\n\n\t_onTransitionEnd: function () {\n\t\tL.DomEvent.off(this._el, L.DomUtil.TRANSITION_END, this._onTransitionEnd, this);\n\n\t\tif (!this._inProgress) { return; }\n\t\tthis._inProgress = false;\n\n\t\tthis._el.style[L.DomUtil.TRANSITION] = '';\n\n\t\t// jshint camelcase: false\n\t\t// make sure L.DomUtil.getPosition returns the final position value after animation\n\t\tthis._el._leaflet_pos = this._newPos;\n\n\t\tclearInterval(this._stepTimer);\n\n\t\tthis.fire('step').fire('end');\n\t}\n\n});\n\n\n/*\n * Extends L.Map to handle panning animations.\n */\n\nL.Map.include({\n\n\tsetView: function (center, zoom, options) {\n\n\t\tzoom = zoom === undefined ? this._zoom : this._limitZoom(zoom);\n\t\tcenter = this._limitCenter(L.latLng(center), zoom, this.options.maxBounds);\n\t\toptions = options || {};\n\n\t\tif (this._panAnim) {\n\t\t\tthis._panAnim.stop();\n\t\t}\n\n\t\tif (this._loaded && !options.reset && options !== true) {\n\n\t\t\tif (options.animate !== undefined) {\n\t\t\t\toptions.zoom = L.extend({animate: options.animate}, options.zoom);\n\t\t\t\toptions.pan = L.extend({animate: options.animate}, options.pan);\n\t\t\t}\n\n\t\t\t// try animating pan or zoom\n\t\t\tvar animated = (this._zoom !== zoom) ?\n\t\t\t\tthis._tryAnimatedZoom && this._tryAnimatedZoom(center, zoom, options.zoom) :\n\t\t\t\tthis._tryAnimatedPan(center, options.pan);\n\n\t\t\tif (animated) {\n\t\t\t\t// prevent resize handler call, the view will refresh after animation anyway\n\t\t\t\tclearTimeout(this._sizeTimer);\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}\n\n\t\t// animation didn't start, just reset the map view\n\t\tthis._resetView(center, zoom);\n\n\t\treturn this;\n\t},\n\n\tpanBy: function (offset, options) {\n\t\toffset = L.point(offset).round();\n\t\toptions = options || {};\n\n\t\tif (!offset.x && !offset.y) {\n\t\t\treturn this;\n\t\t}\n\n\t\tif (!this._panAnim) {\n\t\t\tthis._panAnim = new L.PosAnimation();\n\n\t\t\tthis._panAnim.on({\n\t\t\t\t'step': this._onPanTransitionStep,\n\t\t\t\t'end': this._onPanTransitionEnd\n\t\t\t}, this);\n\t\t}\n\n\t\t// don't fire movestart if animating inertia\n\t\tif (!options.noMoveStart) {\n\t\t\tthis.fire('movestart');\n\t\t}\n\n\t\t// animate pan unless animate: false specified\n\t\tif (options.animate !== false) {\n\t\t\tL.DomUtil.addClass(this._mapPane, 'leaflet-pan-anim');\n\n\t\t\tvar newPos = this._getMapPanePos().subtract(offset);\n\t\t\tthis._panAnim.run(this._mapPane, newPos, options.duration || 0.25, options.easeLinearity);\n\t\t} else {\n\t\t\tthis._rawPanBy(offset);\n\t\t\tthis.fire('move').fire('moveend');\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t_onPanTransitionStep: function () {\n\t\tthis.fire('move');\n\t},\n\n\t_onPanTransitionEnd: function () {\n\t\tL.DomUtil.removeClass(this._mapPane, 'leaflet-pan-anim');\n\t\tthis.fire('moveend');\n\t},\n\n\t_tryAnimatedPan: function (center, options) {\n\t\t// difference between the new and current centers in pixels\n\t\tvar offset = this._getCenterOffset(center)._floor();\n\n\t\t// don't animate too far unless animate: true specified in options\n\t\tif ((options && options.animate) !== true && !this.getSize().contains(offset)) { return false; }\n\n\t\tthis.panBy(offset, options);\n\n\t\treturn true;\n\t}\n});\n\n\n/*\n * L.PosAnimation fallback implementation that powers Leaflet pan animations\n * in browsers that don't support CSS3 Transitions.\n */\n\nL.PosAnimation = L.DomUtil.TRANSITION ? L.PosAnimation : L.PosAnimation.extend({\n\n\trun: function (el, newPos, duration, easeLinearity) { // (HTMLElement, Point[, Number, Number])\n\t\tthis.stop();\n\n\t\tthis._el = el;\n\t\tthis._inProgress = true;\n\t\tthis._duration = duration || 0.25;\n\t\tthis._easeOutPower = 1 / Math.max(easeLinearity || 0.5, 0.2);\n\n\t\tthis._startPos = L.DomUtil.getPosition(el);\n\t\tthis._offset = newPos.subtract(this._startPos);\n\t\tthis._startTime = +new Date();\n\n\t\tthis.fire('start');\n\n\t\tthis._animate();\n\t},\n\n\tstop: function () {\n\t\tif (!this._inProgress) { return; }\n\n\t\tthis._step();\n\t\tthis._complete();\n\t},\n\n\t_animate: function () {\n\t\t// animation loop\n\t\tthis._animId = L.Util.requestAnimFrame(this._animate, this);\n\t\tthis._step();\n\t},\n\n\t_step: function () {\n\t\tvar elapsed = (+new Date()) - this._startTime,\n\t\t    duration = this._duration * 1000;\n\n\t\tif (elapsed < duration) {\n\t\t\tthis._runFrame(this._easeOut(elapsed / duration));\n\t\t} else {\n\t\t\tthis._runFrame(1);\n\t\t\tthis._complete();\n\t\t}\n\t},\n\n\t_runFrame: function (progress) {\n\t\tvar pos = this._startPos.add(this._offset.multiplyBy(progress));\n\t\tL.DomUtil.setPosition(this._el, pos);\n\n\t\tthis.fire('step');\n\t},\n\n\t_complete: function () {\n\t\tL.Util.cancelAnimFrame(this._animId);\n\n\t\tthis._inProgress = false;\n\t\tthis.fire('end');\n\t},\n\n\t_easeOut: function (t) {\n\t\treturn 1 - Math.pow(1 - t, this._easeOutPower);\n\t}\n});\n\n\n/*\n * Extends L.Map to handle zoom animations.\n */\n\nL.Map.mergeOptions({\n\tzoomAnimation: true,\n\tzoomAnimationThreshold: 4\n});\n\nif (L.DomUtil.TRANSITION) {\n\n\tL.Map.addInitHook(function () {\n\t\t// don't animate on browsers without hardware-accelerated transitions or old Android/Opera\n\t\tthis._zoomAnimated = this.options.zoomAnimation && L.DomUtil.TRANSITION &&\n\t\t\t\tL.Browser.any3d && !L.Browser.android23 && !L.Browser.mobileOpera;\n\n\t\t// zoom transitions run with the same duration for all layers, so if one of transitionend events\n\t\t// happens after starting zoom animation (propagating to the map pane), we know that it ended globally\n\t\tif (this._zoomAnimated) {\n\t\t\tL.DomEvent.on(this._mapPane, L.DomUtil.TRANSITION_END, this._catchTransitionEnd, this);\n\t\t}\n\t});\n}\n\nL.Map.include(!L.DomUtil.TRANSITION ? {} : {\n\n\t_catchTransitionEnd: function (e) {\n\t\tif (this._animatingZoom && e.propertyName.indexOf('transform') >= 0) {\n\t\t\tthis._onZoomTransitionEnd();\n\t\t}\n\t},\n\n\t_nothingToAnimate: function () {\n\t\treturn !this._container.getElementsByClassName('leaflet-zoom-animated').length;\n\t},\n\n\t_tryAnimatedZoom: function (center, zoom, options) {\n\n\t\tif (this._animatingZoom) { return true; }\n\n\t\toptions = options || {};\n\n\t\t// don't animate if disabled, not supported or zoom difference is too large\n\t\tif (!this._zoomAnimated || options.animate === false || this._nothingToAnimate() ||\n\t\t        Math.abs(zoom - this._zoom) > this.options.zoomAnimationThreshold) { return false; }\n\n\t\t// offset is the pixel coords of the zoom origin relative to the current center\n\t\tvar scale = this.getZoomScale(zoom),\n\t\t    offset = this._getCenterOffset(center)._divideBy(1 - 1 / scale),\n\t\t\torigin = this._getCenterLayerPoint()._add(offset);\n\n\t\t// don't animate if the zoom origin isn't within one screen from the current center, unless forced\n\t\tif (options.animate !== true && !this.getSize().contains(offset)) { return false; }\n\n\t\tthis\n\t\t    .fire('movestart')\n\t\t    .fire('zoomstart');\n\n\t\tthis._animateZoom(center, zoom, origin, scale, null, true);\n\n\t\treturn true;\n\t},\n\n\t_animateZoom: function (center, zoom, origin, scale, delta, backwards, forTouchZoom) {\n\n\t\tif (!forTouchZoom) {\n\t\t\tthis._animatingZoom = true;\n\t\t}\n\n\t\t// put transform transition on all layers with leaflet-zoom-animated class\n\t\tL.DomUtil.addClass(this._mapPane, 'leaflet-zoom-anim');\n\n\t\t// remember what center/zoom to set after animation\n\t\tthis._animateToCenter = center;\n\t\tthis._animateToZoom = zoom;\n\n\t\t// disable any dragging during animation\n\t\tif (L.Draggable) {\n\t\t\tL.Draggable._disabled = true;\n\t\t}\n\n\t\tL.Util.requestAnimFrame(function () {\n\t\t\tthis.fire('zoomanim', {\n\t\t\t\tcenter: center,\n\t\t\t\tzoom: zoom,\n\t\t\t\torigin: origin,\n\t\t\t\tscale: scale,\n\t\t\t\tdelta: delta,\n\t\t\t\tbackwards: backwards\n\t\t\t});\n\t\t\t// horrible hack to work around a Chrome bug https://github.com/Leaflet/Leaflet/issues/3689\n\t\t\tsetTimeout(L.bind(this._onZoomTransitionEnd, this), 250);\n\t\t}, this);\n\t},\n\n\t_onZoomTransitionEnd: function () {\n\t\tif (!this._animatingZoom) { return; }\n\n\t\tthis._animatingZoom = false;\n\n\t\tL.DomUtil.removeClass(this._mapPane, 'leaflet-zoom-anim');\n\n\t\tL.Util.requestAnimFrame(function () {\n\t\t\tthis._resetView(this._animateToCenter, this._animateToZoom, true, true);\n\n\t\t\tif (L.Draggable) {\n\t\t\t\tL.Draggable._disabled = false;\n\t\t\t}\n\t\t}, this);\n\t}\n});\n\n\n/*\n\tZoom animation logic for L.TileLayer.\n*/\n\nL.TileLayer.include({\n\t_animateZoom: function (e) {\n\t\tif (!this._animating) {\n\t\t\tthis._animating = true;\n\t\t\tthis._prepareBgBuffer();\n\t\t}\n\n\t\tvar bg = this._bgBuffer,\n\t\t    transform = L.DomUtil.TRANSFORM,\n\t\t    initialTransform = e.delta ? L.DomUtil.getTranslateString(e.delta) : bg.style[transform],\n\t\t    scaleStr = L.DomUtil.getScaleString(e.scale, e.origin);\n\n\t\tbg.style[transform] = e.backwards ?\n\t\t\t\tscaleStr + ' ' + initialTransform :\n\t\t\t\tinitialTransform + ' ' + scaleStr;\n\t},\n\n\t_endZoomAnim: function () {\n\t\tvar front = this._tileContainer,\n\t\t    bg = this._bgBuffer;\n\n\t\tfront.style.visibility = '';\n\t\tfront.parentNode.appendChild(front); // Bring to fore\n\n\t\t// force reflow\n\t\tL.Util.falseFn(bg.offsetWidth);\n\n\t\tvar zoom = this._map.getZoom();\n\t\tif (zoom > this.options.maxZoom || zoom < this.options.minZoom) {\n\t\t\tthis._clearBgBuffer();\n\t\t}\n\n\t\tthis._animating = false;\n\t},\n\n\t_clearBgBuffer: function () {\n\t\tvar map = this._map;\n\n\t\tif (map && !map._animatingZoom && !map.touchZoom._zooming) {\n\t\t\tthis._bgBuffer.innerHTML = '';\n\t\t\tthis._bgBuffer.style[L.DomUtil.TRANSFORM] = '';\n\t\t}\n\t},\n\n\t_prepareBgBuffer: function () {\n\n\t\tvar front = this._tileContainer,\n\t\t    bg = this._bgBuffer;\n\n\t\t// if foreground layer doesn't have many tiles but bg layer does,\n\t\t// keep the existing bg layer and just zoom it some more\n\n\t\tvar bgLoaded = this._getLoadedTilesPercentage(bg),\n\t\t    frontLoaded = this._getLoadedTilesPercentage(front);\n\n\t\tif (bg && bgLoaded > 0.5 && frontLoaded < 0.5) {\n\n\t\t\tfront.style.visibility = 'hidden';\n\t\t\tthis._stopLoadingImages(front);\n\t\t\treturn;\n\t\t}\n\n\t\t// prepare the buffer to become the front tile pane\n\t\tbg.style.visibility = 'hidden';\n\t\tbg.style[L.DomUtil.TRANSFORM] = '';\n\n\t\t// switch out the current layer to be the new bg layer (and vice-versa)\n\t\tthis._tileContainer = bg;\n\t\tbg = this._bgBuffer = front;\n\n\t\tthis._stopLoadingImages(bg);\n\n\t\t//prevent bg buffer from clearing right after zoom\n\t\tclearTimeout(this._clearBgBufferTimer);\n\t},\n\n\t_getLoadedTilesPercentage: function (container) {\n\t\tvar tiles = container.getElementsByTagName('img'),\n\t\t    i, len, count = 0;\n\n\t\tfor (i = 0, len = tiles.length; i < len; i++) {\n\t\t\tif (tiles[i].complete) {\n\t\t\t\tcount++;\n\t\t\t}\n\t\t}\n\t\treturn count / len;\n\t},\n\n\t// stops loading all tiles in the background layer\n\t_stopLoadingImages: function (container) {\n\t\tvar tiles = Array.prototype.slice.call(container.getElementsByTagName('img')),\n\t\t    i, len, tile;\n\n\t\tfor (i = 0, len = tiles.length; i < len; i++) {\n\t\t\ttile = tiles[i];\n\n\t\t\tif (!tile.complete) {\n\t\t\t\ttile.onload = L.Util.falseFn;\n\t\t\t\ttile.onerror = L.Util.falseFn;\n\t\t\t\ttile.src = L.Util.emptyImageUrl;\n\n\t\t\t\ttile.parentNode.removeChild(tile);\n\t\t\t}\n\t\t}\n\t}\n});\n\n\n/*\r\n * Provides L.Map with convenient shortcuts for using browser geolocation features.\r\n */\r\n\r\nL.Map.include({\r\n\t_defaultLocateOptions: {\r\n\t\twatch: false,\r\n\t\tsetView: false,\r\n\t\tmaxZoom: Infinity,\r\n\t\ttimeout: 10000,\r\n\t\tmaximumAge: 0,\r\n\t\tenableHighAccuracy: false\r\n\t},\r\n\r\n\tlocate: function (/*Object*/ options) {\r\n\r\n\t\toptions = this._locateOptions = L.extend(this._defaultLocateOptions, options);\r\n\r\n\t\tif (!navigator.geolocation) {\r\n\t\t\tthis._handleGeolocationError({\r\n\t\t\t\tcode: 0,\r\n\t\t\t\tmessage: 'Geolocation not supported.'\r\n\t\t\t});\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tvar onResponse = L.bind(this._handleGeolocationResponse, this),\r\n\t\t\tonError = L.bind(this._handleGeolocationError, this);\r\n\r\n\t\tif (options.watch) {\r\n\t\t\tthis._locationWatchId =\r\n\t\t\t        navigator.geolocation.watchPosition(onResponse, onError, options);\r\n\t\t} else {\r\n\t\t\tnavigator.geolocation.getCurrentPosition(onResponse, onError, options);\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\tstopLocate: function () {\r\n\t\tif (navigator.geolocation) {\r\n\t\t\tnavigator.geolocation.clearWatch(this._locationWatchId);\r\n\t\t}\r\n\t\tif (this._locateOptions) {\r\n\t\t\tthis._locateOptions.setView = false;\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\t_handleGeolocationError: function (error) {\r\n\t\tvar c = error.code,\r\n\t\t    message = error.message ||\r\n\t\t            (c === 1 ? 'permission denied' :\r\n\t\t            (c === 2 ? 'position unavailable' : 'timeout'));\r\n\r\n\t\tif (this._locateOptions.setView && !this._loaded) {\r\n\t\t\tthis.fitWorld();\r\n\t\t}\r\n\r\n\t\tthis.fire('locationerror', {\r\n\t\t\tcode: c,\r\n\t\t\tmessage: 'Geolocation error: ' + message + '.'\r\n\t\t});\r\n\t},\r\n\r\n\t_handleGeolocationResponse: function (pos) {\r\n\t\tvar lat = pos.coords.latitude,\r\n\t\t    lng = pos.coords.longitude,\r\n\t\t    latlng = new L.LatLng(lat, lng),\r\n\r\n\t\t    latAccuracy = 180 * pos.coords.accuracy / 40075017,\r\n\t\t    lngAccuracy = latAccuracy / Math.cos(L.LatLng.DEG_TO_RAD * lat),\r\n\r\n\t\t    bounds = L.latLngBounds(\r\n\t\t            [lat - latAccuracy, lng - lngAccuracy],\r\n\t\t            [lat + latAccuracy, lng + lngAccuracy]),\r\n\r\n\t\t    options = this._locateOptions;\r\n\r\n\t\tif (options.setView) {\r\n\t\t\tvar zoom = Math.min(this.getBoundsZoom(bounds), options.maxZoom);\r\n\t\t\tthis.setView(latlng, zoom);\r\n\t\t}\r\n\r\n\t\tvar data = {\r\n\t\t\tlatlng: latlng,\r\n\t\t\tbounds: bounds,\r\n\t\t\ttimestamp: pos.timestamp\r\n\t\t};\r\n\r\n\t\tfor (var i in pos.coords) {\r\n\t\t\tif (typeof pos.coords[i] === 'number') {\r\n\t\t\t\tdata[i] = pos.coords[i];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.fire('locationfound', data);\r\n\t}\r\n});\r\n\n\n}(window, document));",
    "/**\n * Expose `requestAnimationFrame()`.\n */\n\nexports = module.exports = window.requestAnimationFrame\n  || window.webkitRequestAnimationFrame\n  || window.mozRequestAnimationFrame\n  || window.oRequestAnimationFrame\n  || window.msRequestAnimationFrame\n  || fallback;\n\n/**\n * Fallback implementation.\n */\n\nvar prev = new Date().getTime();\nfunction fallback(fn) {\n  var curr = new Date().getTime();\n  var ms = Math.max(0, 16 - (curr - prev));\n  var req = setTimeout(fn, ms);\n  prev = curr;\n  return req;\n}\n\n/**\n * Cancel.\n */\n\nvar cancel = window.cancelAnimationFrame\n  || window.webkitCancelAnimationFrame\n  || window.mozCancelAnimationFrame\n  || window.oCancelAnimationFrame\n  || window.msCancelAnimationFrame\n  || window.clearTimeout;\n\nexports.cancel = function(id){\n  cancel.call(window, id);\n};\n",
    "(function (root, smoothScroll) {\n  'use strict';\n\n  // Support RequireJS and CommonJS/NodeJS module formats.\n  // Attach smoothScroll to the `window` when executed as a <script>.\n\n  // RequireJS\n  if (typeof define === 'function' && define.amd) {\n    define(smoothScroll);\n\n  // CommonJS\n  } else if (typeof exports === 'object' && typeof module === 'object') {\n    module.exports = smoothScroll();\n\n  } else {\n    root.smoothScroll = smoothScroll();\n  }\n\n})(this, function(){\n'use strict';\n\n// Do not initialize smoothScroll when running server side, handle it in client:\nif (typeof window !== 'object') return;\n\n// We do not want this script to be applied in browsers that do not support those\n// That means no smoothscroll on IE9 and below.\nif(document.querySelectorAll === void 0 || window.pageYOffset === void 0 || history.pushState === void 0) { return; }\n\n// Get the top position of an element in the document\nvar getTop = function(element) {\n    // return value of html.getBoundingClientRect().top ... IE : 0, other browsers : -pageYOffset\n    if(element.nodeName === 'HTML') return -window.pageYOffset\n    return element.getBoundingClientRect().top + window.pageYOffset;\n}\n// ease in out function thanks to:\n// http://blog.greweb.fr/2012/02/bezier-curve-based-easing-functions-from-concept-to-implementation/\nvar easeInOutCubic = function (t) { return t<.5 ? 4*t*t*t : (t-1)*(2*t-2)*(2*t-2)+1 }\n\n// calculate the scroll position we should be in\n// given the start and end point of the scroll\n// the time elapsed from the beginning of the scroll\n// and the total duration of the scroll (default 500ms)\nvar position = function(start, end, elapsed, duration) {\n    if (elapsed > duration) return end;\n    return start + (end - start) * easeInOutCubic(elapsed / duration); // <-- you can change the easing funtion there\n    // return start + (end - start) * (elapsed / duration); // <-- this would give a linear scroll\n}\n\n// we use requestAnimationFrame to be called by the browser before every repaint\n// if the first argument is an element then scroll to the top of this element\n// if the first argument is numeric then scroll to this location\n// if the callback exist, it is called when the scrolling is finished\n// if context is set then scroll that element, else scroll window \nvar smoothScroll = function(el, duration, callback, context){\n    duration = duration || 500;\n    context = context || window;\n    var start = window.pageYOffset;\n\n    if (typeof el === 'number') {\n      var end = parseInt(el);\n    } else {\n      var end = getTop(el);\n    }\n\n    var clock = Date.now();\n    var requestAnimationFrame = window.requestAnimationFrame ||\n        window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame ||\n        function(fn){window.setTimeout(fn, 15);};\n\n    var step = function(){\n        var elapsed = Date.now() - clock;\n        if (context !== window) {\n        \tcontext.scrollTop = position(start, end, elapsed, duration);\n        }\n        else {\n        \twindow.scroll(0, position(start, end, elapsed, duration));\n        }\n\n        if (elapsed > duration) {\n            if (typeof callback === 'function') {\n                callback(el);\n            }\n        } else {\n            requestAnimationFrame(step);\n        }\n    }\n    step();\n}\n\nvar linkHandler = function(ev) {\n    ev.preventDefault();\n\n    if (location.hash !== this.hash) window.history.pushState(null, null, this.hash)\n    // using the history api to solve issue #1 - back doesn't work\n    // most browser don't update :target when the history api is used:\n    // THIS IS A BUG FROM THE BROWSERS.\n    // change the scrolling duration in this call\n    smoothScroll(document.getElementById(this.hash.substring(1)), 500, function(el) {\n        location.replace('#' + el.id)\n        // this will cause the :target to be activated.\n    });\n}\n\n// We look for all the internal links in the documents and attach the smoothscroll function\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n    var internal = document.querySelectorAll('a[href^=\"#\"]:not([href=\"#\"])'), a;\n    for(var i=internal.length; a=internal[--i];){\n        a.addEventListener(\"click\", linkHandler, false);\n    }\n});\n\n// return smoothscroll API\nreturn smoothScroll;\n\n});\n"
  ]
}